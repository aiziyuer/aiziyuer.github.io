{"meta":{"version":1,"warehouse":"5.0.1"},"models":{"Asset":[{"_id":"node_modules/hexo-theme-landscape/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/fancybox/jquery.fancybox.min.css","path":"fancybox/jquery.fancybox.min.css","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/fancybox/jquery.fancybox.min.js","path":"fancybox/jquery.fancybox.min.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/js/jquery-3.6.4.min.js","path":"js/jquery-3.6.4.min.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/js/script.js","path":"js/script.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/css/images/banner.jpg","path":"css/images/banner.jpg","modified":1,"renderable":1}],"Cache":[{"_id":"source/_posts/hello-world.md","hash":"7d98d6592de80fdcd2949bd7401cec12afd98cdf","modified":1742642830203},{"_id":"source/_posts/blog/2016-07-11-how-blog-support-search.markdown","hash":"589c7fa85dc79868c3d0b81a01c21b4b707e4fba","modified":1742642947423},{"_id":"source/_posts/blog/2016-07-14-how-to-accelerate-your-blog.markdown","hash":"26403c9a09d95c416170e50f42572b499f23411b","modified":1742642947424},{"_id":"source/_posts/blog/2016-07-17-how-to-add-disqus.markdown","hash":"1d4a7af824cd13856d3527486a69732a1d177480","modified":1742642947425},{"_id":"source/_posts/blog/2016-07-10-blog-roadmap.markdown","hash":"099d098b3b4c441b41cbd94750685a6a6fa8c367","modified":1742642947423},{"_id":"source/_posts/books/2015-03-30-book-list-of-2015.md","hash":"bad06a52ec7820d1b1364251600c73b7aa35cedd","modified":1742642947499},{"_id":"source/_posts/ai/2015-10-07-how-to-calculate-mean-and-variance.md","hash":"d2d846bdcd9ebe78f97ec82969948eb950b6653a","modified":1742642947348},{"_id":"source/_posts/life/2015-09-25-superuser编译.md","hash":"2b4163729eefb5626a6fcbaed089d820c5ba147f","modified":1742642947653},{"_id":"source/_posts/life/2015-09-20-about-me.md","hash":"8070b1213446b53c6dccce867aabadd23d1cff19","modified":1742642947652},{"_id":"source/_posts/mobile/2016-07-15-android-xposed-module-introduce.markdown","hash":"4b025b410648cfeba8836322cae2c910387eb756","modified":1742642947734},{"_id":"source/_posts/blog/2016-07-11-how-to-manager-blog-start.markdown","hash":"b1a1b6a07dc2c15599d2a57997ddf887c9ed3c25","modified":1742642947424},{"_id":"source/_posts/mobile/2016-07-15-how-to-root-your-android-mobile.markdown","hash":"34b665fce42f0311c5d85f7beea51060e0980c9f","modified":1742642947734},{"_id":"source/_posts/graph/2015-05-28-翻页效果模拟.md","hash":"7b57f63accba3a4396829ff5974e92f3d8ca2444","modified":1742642947575},{"_id":"source/_posts/life/2016-07-13-git-study.markdown","hash":"31f723e009b0b750b9d468fda2f7c57e932f8fd6","modified":1742642947654},{"_id":"source/_posts/life/2016-07-10-gulp-work-study.markdown","hash":"0ee87d063a8aaf4efdce9f55a28b33e8ed027743","modified":1742642947653},{"_id":"source/_posts/study/2015-03-30-leetCode-TwoNumbers .md","hash":"c7b9ba089b304804d101a3314fbcf6c382c64d91","modified":1742642947815},{"_id":"source/_posts/study/2015-03-30-leetCode-TwoSum.md","hash":"6fa359a4c8184e88cd82870ed635c0a508d98293","modified":1742642947815},{"_id":"source/_posts/study/2015-05-09-maven开发web.md","hash":"f474afda59c1645e2916f7f1f7910fa2db8ae0f0","modified":1742642947816},{"_id":"source/_posts/tools/2015-04-26-sublime配置.md","hash":"fa40af8690ce5d190e4d952cdcf7ec4cd9035545","modified":1742642947898},{"_id":"source/_posts/tools/2015-10-24-vim-compile.md","hash":"b01cb42ef12b509794c7ea8c1deafc5ce42e424c","modified":1742642947898},{"_id":"source/_posts/study/2015-08-09-区间查找算法.md","hash":"b0280835d7af32668215f7000d646ae889f4de46","modified":1742642947816},{"_id":"source/_posts/study/2015-11-15-kafka-work-as-windows-service.md","hash":"3de6c45095625b9474087753203d2da808184f64","modified":1742642947817},{"_id":"source/_posts/web/2015-06-18-Tomcat支持双向认证.md","hash":"265585f52620e5888d810031e2fe62145006b41d","modified":1742642947975},{"_id":"source/_posts/web/2016-07-16-timeline-guide.markdown","hash":"5799b23c58a1d448e4056aafc709f7a761d00b52","modified":1742642947975},{"_id":"node_modules/hexo-theme-landscape/LICENSE","hash":"c480fce396b23997ee23cc535518ffaaf7f458f8","modified":1742642852024},{"_id":"node_modules/hexo-theme-landscape/README.md","hash":"6497b70356271fd6f9f1dc862353be844c457a53","modified":1742642852448},{"_id":"node_modules/hexo-theme-landscape/package.json","hash":"06889bee30e4c39479467021da434d3a6a0990fc","modified":1742642852447},{"_id":"node_modules/hexo-theme-landscape/_config.yml","hash":"a93d7b3990e45bc7247eecf01888f71674887a63","modified":1742642852495},{"_id":"node_modules/hexo-theme-landscape/languages/de.yml","hash":"3ebf0775abbee928c8d7bda943c191d166ded0d3","modified":1742642852500},{"_id":"node_modules/hexo-theme-landscape/languages/default.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1742642852501},{"_id":"node_modules/hexo-theme-landscape/languages/de-DE.yml","hash":"d29d1c4256b7ed9df42f511c2ff0a23ad5fd6c1f","modified":1742642852498},{"_id":"node_modules/hexo-theme-landscape/languages/en-GB.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1742642852502},{"_id":"node_modules/hexo-theme-landscape/languages/en-US.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1742642852503},{"_id":"node_modules/hexo-theme-landscape/languages/en.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":1742642852504},{"_id":"node_modules/hexo-theme-landscape/languages/es-ES.yml","hash":"7008a8fc91f18d2a735864817b8ebda30c7a2c66","modified":1742642852506},{"_id":"node_modules/hexo-theme-landscape/languages/es.yml","hash":"76edb1171b86532ef12cfd15f5f2c1ac3949f061","modified":1742642852507},{"_id":"node_modules/hexo-theme-landscape/languages/fr-FR.yml","hash":"8d09dbdab00a30a2870b56f7c0a7ca7deafa7b88","modified":1742642852508},{"_id":"node_modules/hexo-theme-landscape/languages/fr.yml","hash":"415e1c580ced8e4ce20b3b0aeedc3610341c76fb","modified":1742642852509},{"_id":"node_modules/hexo-theme-landscape/languages/hu-HU.yml","hash":"712d18664898fa21ba38d4973e90ef41a324ea25","modified":1742642852510},{"_id":"node_modules/hexo-theme-landscape/languages/hu.yml","hash":"284d557130bf54a74e7dcef9d42096130e4d9550","modified":1742642852511},{"_id":"node_modules/hexo-theme-landscape/languages/it-IT.yml","hash":"2cb6dc2fab9bd2dbe1c8bb869a9e8bf85a564fdd","modified":1742642852512},{"_id":"node_modules/hexo-theme-landscape/languages/it.yml","hash":"89b7d91306b2c1a0f3ac023b657bf974f798a1e8","modified":1742642852514},{"_id":"node_modules/hexo-theme-landscape/languages/ja-JP.yml","hash":"08481267e0c112e1f6855620f2837ec4c4a98bbd","modified":1742642852515},{"_id":"node_modules/hexo-theme-landscape/languages/ja.yml","hash":"a73e1b9c80fd6e930e2628b393bfe3fb716a21a9","modified":1742642852516},{"_id":"node_modules/hexo-theme-landscape/languages/ko-KR.yml","hash":"19209ad8f9d4057e8df808937f950eb265e1db69","modified":1742642852517},{"_id":"node_modules/hexo-theme-landscape/languages/ko.yml","hash":"881d6a0a101706e0452af81c580218e0bfddd9cf","modified":1742642852519},{"_id":"node_modules/hexo-theme-landscape/languages/mn-MN.yml","hash":"b9e5f3e7c0c2f779cf2cfded6db847b5941637ca","modified":1742642852520},{"_id":"node_modules/hexo-theme-landscape/languages/mn.yml","hash":"2e7523951072a9403ead3840ad823edd1084c116","modified":1742642852521},{"_id":"node_modules/hexo-theme-landscape/languages/nl-NL.yml","hash":"5ebbc30021f05d99938f96dfff280392df7f91f0","modified":1742642852522},{"_id":"node_modules/hexo-theme-landscape/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":1742642852523},{"_id":"node_modules/hexo-theme-landscape/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":1742642852524},{"_id":"node_modules/hexo-theme-landscape/languages/pt-PT.yml","hash":"0f852b6b228e6ea59aa3540574bb89b233f2a098","modified":1742642852525},{"_id":"node_modules/hexo-theme-landscape/languages/pt.yml","hash":"57d07b75d434fbfc33b0ddb543021cb5f53318a8","modified":1742642852526},{"_id":"node_modules/hexo-theme-landscape/languages/ru-RU.yml","hash":"360d11a28bb768afb1dd15f63fa7fd3a8cc547ee","modified":1742642852527},{"_id":"node_modules/hexo-theme-landscape/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":1742642852529},{"_id":"node_modules/hexo-theme-landscape/languages/th-TH.yml","hash":"ebfdba9bc4842c829473c1e6e4544344f182724d","modified":1742642852530},{"_id":"node_modules/hexo-theme-landscape/languages/th.yml","hash":"84a55b00aa01f03982be294e43c33a20e6d32862","modified":1742642852531},{"_id":"node_modules/hexo-theme-landscape/languages/tr.yml","hash":"a1cdbfa17682d7a971de8ab8588bf57c74224b5b","modified":1742642852532},{"_id":"node_modules/hexo-theme-landscape/languages/zh-CN.yml","hash":"1efd95774f401c80193eac6ee3f1794bfe93dc5a","modified":1742642852534},{"_id":"node_modules/hexo-theme-landscape/languages/zh-TW.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":1742642852535},{"_id":"node_modules/hexo-theme-landscape/layout/archive.ejs","hash":"97160b8111dd0283f8231408bcab4c87d31c1646","modified":1742642852256},{"_id":"node_modules/hexo-theme-landscape/layout/category.ejs","hash":"97160b8111dd0283f8231408bcab4c87d31c1646","modified":1742642852281},{"_id":"node_modules/hexo-theme-landscape/layout/index.ejs","hash":"57281fc3812c877ec2d8e89ec87ede57b9789d4c","modified":1742642852322},{"_id":"node_modules/hexo-theme-landscape/layout/layout.ejs","hash":"0d1765036e4874500e68256fedb7470e96eeb6ee","modified":1742642852325},{"_id":"node_modules/hexo-theme-landscape/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1742642852333},{"_id":"node_modules/hexo-theme-landscape/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1742642852336},{"_id":"node_modules/hexo-theme-landscape/layout/tag.ejs","hash":"97160b8111dd0283f8231408bcab4c87d31c1646","modified":1742642852349},{"_id":"node_modules/hexo-theme-landscape/scripts/fancybox.js","hash":"c857d7a5e4a5d71c743a009c5932bf84229db428","modified":1742642852407},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/after-footer.ejs","hash":"1b89d0caba03a66a43d9c290a5e94fa438a89210","modified":1742642852172},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/archive-post.ejs","hash":"c7a71425a946d05414c069ec91811b5c09a92c47","modified":1742642852197},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/archive.ejs","hash":"0039146b8ccbdf9b9f8bee58fc6c238f0e9921fc","modified":1742642852206},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/article.ejs","hash":"e9d4678e14be5e3cd5e34d783e5af6d6626092f5","modified":1742642852261},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/footer.ejs","hash":"3656eb692254346671abc03cb3ba1459829e0dce","modified":1742642852289},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/gauges-analytics.ejs","hash":"21a1e2a3907d1a3dad1cd0ab855fe6735f233c74","modified":1742642852306},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/google-analytics.ejs","hash":"2ea7442ea1e1a8ab4e41e26c563f58413b59a3d0","modified":1742642852312},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/head.ejs","hash":"0e94f5722d4c44d3cc91be2f4fd30b9ab503b868","modified":1742642852315},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/header.ejs","hash":"6a5033d189554c9a6d42e2ef7952ae5c9742648e","modified":1742642852319},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/mobile-nav.ejs","hash":"e952a532dfc583930a666b9d4479c32d4a84b44e","modified":1742642852328},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/sidebar.ejs","hash":"930da35cc2d447a92e5ee8f835735e6fd2232469","modified":1742642852341},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/archive.ejs","hash":"beb4a86fcc82a9bdda9289b59db5a1988918bec3","modified":1742642852237},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/category.ejs","hash":"dd1e5af3c6af3f5d6c85dfd5ca1766faed6a0b05","modified":1742642852277},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/tag.ejs","hash":"2de380865df9ab5f577f7d3bcadf44261eb5faae","modified":1742642852346},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/recent_posts.ejs","hash":"60c4b012dcc656438ff59997e60367e5a21ab746","modified":1742642852338},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/tagcloud.ejs","hash":"b4a2079101643f63993dcdb32925c9b071763b46","modified":1742642852352},{"_id":"node_modules/hexo-theme-landscape/source/css/_extend.styl","hash":"222fbe6d222531d61c1ef0f868c90f747b1c2ced","modified":1742642852456},{"_id":"node_modules/hexo-theme-landscape/source/css/_variables.styl","hash":"ca28281423ae57d76b6c1eb91cd845fd4e518bd6","modified":1742642852458},{"_id":"node_modules/hexo-theme-landscape/source/css/style.styl","hash":"e55a1d92954ed20f6887f92dc727bb995a010a43","modified":1742642852493},{"_id":"node_modules/hexo-theme-landscape/source/fancybox/jquery.fancybox.min.css","hash":"1be9b79be02a1cfc5d96c4a5e0feb8f472babd95","modified":1742642852109},{"_id":"node_modules/hexo-theme-landscape/source/js/script.js","hash":"49773efcb2221bbdf2d86f3f5c5ff2d841b528cc","modified":1742642852443},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/category.ejs","hash":"c6bcd0e04271ffca81da25bcff5adf3d46f02fc0","modified":1742642852271},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/date.ejs","hash":"f1458584b679545830b75bef2526e2f3eb931045","modified":1742642852285},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/gallery.ejs","hash":"3d9d81a3c693ff2378ef06ddb6810254e509de5b","modified":1742642852293},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/nav.ejs","hash":"16a904de7bceccbb36b4267565f2215704db2880","modified":1742642852330},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/tag.ejs","hash":"2fcb0bf9c8847a644167a27824c9bb19ac74dd14","modified":1742642852343},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/archive.styl","hash":"db15f5677dc68f1730e82190bab69c24611ca292","modified":1742642852464},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/title.ejs","hash":"4d7e62574ddf46de9b41605fe3140d77b5ddb26d","modified":1742642852355},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/article.styl","hash":"f608400a08cf137ab15ec1f44bac551950afe879","modified":1742642852467},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/comment.styl","hash":"79d280d8d203abb3bd933ca9b8e38c78ec684987","modified":1742642852471},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/footer.styl","hash":"e35a060b8512031048919709a8e7b1ec0e40bc1b","modified":1742642852472},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/header.styl","hash":"268d2989acb06e2ddd06cc36a6918c6cd865476b","modified":1742642852481},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/highlight.styl","hash":"9cc3b2927d814f2f6e8e188f9d3657b94f4c6ef3","modified":1742642852483},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/mobile.styl","hash":"a399cf9e1e1cec3e4269066e2948d7ae5854d745","modified":1742642852487},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/sidebar-aside.styl","hash":"890349df5145abf46ce7712010c89237900b3713","modified":1742642852488},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/sidebar-bottom.styl","hash":"8fd4f30d319542babfd31f087ddbac550f000a8a","modified":1742642852490},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/sidebar.styl","hash":"404ec059dc674a48b9ab89cd83f258dec4dcb24d","modified":1742642852492},{"_id":"node_modules/hexo-theme-landscape/source/css/_util/grid.styl","hash":"0bf55ee5d09f193e249083602ac5fcdb1e571aed","modified":1742642852480},{"_id":"node_modules/hexo-theme-landscape/source/css/_util/mixin.styl","hash":"44f32767d9fd3c1c08a60d91f181ee53c8f0dbb3","modified":1742642852485},{"_id":"node_modules/hexo-theme-landscape/source/fancybox/jquery.fancybox.min.js","hash":"6181412e73966696d08e1e5b1243a572d0f22ba6","modified":1742642852440},{"_id":"node_modules/hexo-theme-landscape/source/js/jquery-3.6.4.min.js","hash":"eda46747c71d38a880bee44f9a439c3858bb8f99","modified":1742642852425},{"_id":"node_modules/hexo-theme-landscape/source/css/images/banner.jpg","hash":"f44aa591089fcb3ec79770a1e102fd3289a7c6a6","modified":1742642852400},{"_id":"public/2025/03/22/web/2015-06-18-Tomcat支持双向认证/index.html","hash":"6c7e5cb7828c3ef3147f2286ba0271befa12b5c4","modified":1742642951580},{"_id":"public/2025/03/22/web/2016-07-16-timeline-guide/index.html","hash":"228d10e889d8cbd2f09eae689b61e4868c3d665f","modified":1742642951580},{"_id":"public/2025/03/22/tools/2015-04-26-sublime配置/index.html","hash":"649fb3ce21362c8deaa5050eca312d06dd40e112","modified":1742642951580},{"_id":"public/2025/03/22/tools/2015-10-24-vim-compile/index.html","hash":"9194aeb07666ee9e35a92d508967daff12440e67","modified":1742642951580},{"_id":"public/2025/03/22/study/2015-11-15-kafka-work-as-windows-service/index.html","hash":"4bdd94f4f3a9bf23ab1365e9df0863983c08c05a","modified":1742642951580},{"_id":"public/2025/03/22/study/2015-05-09-maven开发web/index.html","hash":"1396be44a5a1af40d30899e316e23d38eaa4fe7b","modified":1742642951580},{"_id":"public/2025/03/22/study/2015-08-09-区间查找算法/index.html","hash":"d679dacfd4899b558cb7944c586748cc750dcb74","modified":1742642951580},{"_id":"public/2025/03/22/study/2015-03-30-leetCode-TwoNumbers /index.html","hash":"eec31b1d94860cdf075da7e7244928890640930f","modified":1742642951580},{"_id":"public/2025/03/22/study/2015-03-30-leetCode-TwoSum/index.html","hash":"3170aa83ef36e1eac5ddf01bd51f6a906b86ce41","modified":1742642951580},{"_id":"public/2025/03/22/mobile/2016-07-15-android-xposed-module-introduce/index.html","hash":"983974687d3f07d467d0917fefb529f438e8c7f1","modified":1742642951580},{"_id":"public/2025/03/22/mobile/2016-07-15-how-to-root-your-android-mobile/index.html","hash":"36fb526cb32c598dc0f1a1b22bd6ab1b8545d367","modified":1742642951580},{"_id":"public/2025/03/22/life/2016-07-10-gulp-work-study/index.html","hash":"8b0bc31780cffb937b71b6edf6b33a2190397dda","modified":1742642951580},{"_id":"public/2025/03/22/life/2016-07-13-git-study/index.html","hash":"e522d1814f386ea64c1772a8c8039ca8c9ede846","modified":1742642951580},{"_id":"public/2025/03/22/life/2015-09-20-about-me/index.html","hash":"bbefcde868b205d88b11d29434e11c084336e11d","modified":1742642951580},{"_id":"public/2025/03/22/graph/2015-05-28-翻页效果模拟/index.html","hash":"6328c3be9f3bd760f08343a01acecc4a8d4ac0d9","modified":1742642951580},{"_id":"public/2025/03/22/books/2015-03-30-book-list-of-2015/index.html","hash":"e0f4124d6f19b61b7cb814db343f172ecdb110d4","modified":1742642951580},{"_id":"public/2025/03/22/blog/2016-07-17-how-to-add-disqus/index.html","hash":"5f2d0e48698af9df5342ea855c0a850f16161e0b","modified":1742642951580},{"_id":"public/2025/03/22/blog/2016-07-11-how-to-manager-blog-start/index.html","hash":"1dadc091b1d7240c2144400388601597a6d5df37","modified":1742642951580},{"_id":"public/2025/03/22/blog/2016-07-14-how-to-accelerate-your-blog/index.html","hash":"b22e1a83a0393af710f48a4e1a0af08c080a0ac5","modified":1742642951580},{"_id":"public/2025/03/22/blog/2016-07-11-how-blog-support-search/index.html","hash":"f0dc01d47efd625e09f318a63033ee0e884c951c","modified":1742642951580},{"_id":"public/2025/03/22/blog/2016-07-10-blog-roadmap/index.html","hash":"c83c0d73b64eb41e0a2729a1eb84702cb72d7d21","modified":1742642951580},{"_id":"public/2025/03/22/ai/2015-10-07-how-to-calculate-mean-and-variance/index.html","hash":"821a3634d13ed6dbcf1c5debc450e1c158b3939e","modified":1742642951580},{"_id":"public/2025/03/22/hello-world/index.html","hash":"f07dfecd725f9e99545627d6a7c4196f53125ff1","modified":1742642951580},{"_id":"public/index.html","hash":"9e4cad0ad87d680d46c6a1f617cfcf8c872ee466","modified":1742642951580},{"_id":"public/page/2/index.html","hash":"02644521719b976c016a316b1e08e3953293b5b2","modified":1742642951580},{"_id":"public/page/3/index.html","hash":"b7ffcf1d77d9dfa8bf47999cfaf962f3df2cebfc","modified":1742642951580},{"_id":"public/archives/index.html","hash":"6bb63842275337b8a373202e298271412c7c9d99","modified":1742642951580},{"_id":"public/archives/page/2/index.html","hash":"633aa0480be6cfcfae24c004b35a15e1c3408aab","modified":1742642951580},{"_id":"public/archives/page/3/index.html","hash":"9e1e67537454d290a3e9cfe26ce223540d17d545","modified":1742642951580},{"_id":"public/archives/2025/index.html","hash":"0ac67a7bc987a96d2f3ed2d0cc20796942f4cf4f","modified":1742642951580},{"_id":"public/archives/2025/page/2/index.html","hash":"1872a116a1f5c0457422d5b6bb3aacddd6a72711","modified":1742642951580},{"_id":"public/archives/2025/page/3/index.html","hash":"596d28bf7ac051cdf3bb2c663a1e1f58b5f7ca2d","modified":1742642951580},{"_id":"public/archives/2025/03/index.html","hash":"a4d694f3e37d0173b035ffae23b14fd644bc4280","modified":1742642951580},{"_id":"public/archives/2025/03/page/2/index.html","hash":"6e306b04168301cebbdecc09fa8216aa01899342","modified":1742642951580},{"_id":"public/archives/2025/03/page/3/index.html","hash":"297290b43bb653d2a0629b4a3dba57dd50996514","modified":1742642951580},{"_id":"public/categories/博客/index.html","hash":"f07215def1add52f9f9d095d9c162a33bb3b0440","modified":1742642951580},{"_id":"public/categories/算法/index.html","hash":"f020e476f276056f0f73455288ce5752d910fb79","modified":1742642951580},{"_id":"public/categories/读书/index.html","hash":"6fa0adf68d3f1770eee5d95a51b832dcffad145e","modified":1742642951580},{"_id":"public/categories/图形/index.html","hash":"d2380c1fa97b1fb2c555014b83485429cb12cb57","modified":1742642951580},{"_id":"public/categories/生活/index.html","hash":"b8d02bed1577e09aa95207862279e1abaa3bf375","modified":1742642951580},{"_id":"public/categories/移动/index.html","hash":"f1bb5c43f93d857e37872e7424aebc343a4ffb96","modified":1742642951580},{"_id":"public/categories/学习/index.html","hash":"496816dc730a9afbd4cca4d256d151963e32376b","modified":1742642951580},{"_id":"public/categories/工具/index.html","hash":"7d4186085fd0d1bb871222d456dfdfd77a3a328c","modified":1742642951580},{"_id":"public/categories/网页/index.html","hash":"fd4d84584f8e71ad36ed1f007996fe1a3b1c9743","modified":1742642951580},{"_id":"public/tags/blog/index.html","hash":"6ccb646f722eec08f426de52b6028afe5f81c776","modified":1742642951580},{"_id":"public/tags/javascript/index.html","hash":"4d1b19c70267bc40b229fc5606b277c96b3ec8f6","modified":1742642951580},{"_id":"public/tags/算法，统计/index.html","hash":"280541892d86489603621547c36762fd82296ce1","modified":1742642951580},{"_id":"public/tags/技术/index.html","hash":"98ae388ac970ee6ed6f68390c742074695966985","modified":1742642951580},{"_id":"public/tags/bash/index.html","hash":"f28d01b557c7de6bb75e22eda8e3e716736246cf","modified":1742642951580},{"_id":"public/tags/数学，图形，Geogebra/index.html","hash":"675b5f0199c9bb954ce19364c55efbf82579dec8","modified":1742642951580},{"_id":"public/tags/about/index.html","hash":"31e6dd120dd00f5a71f46197f04437c4026b36e5","modified":1742642951580},{"_id":"public/tags/me/index.html","hash":"313aa29f9e96a1c0e85225917eab8d9fd1849373","modified":1742642951580},{"_id":"public/tags/nodejs/index.html","hash":"5999dbc06a3b0dfdb33c1af4e33d8fdc3d2cbc06","modified":1742642951580},{"_id":"public/tags/自动化/index.html","hash":"abcf80be21f63cbde2a73c85e68cfb19dba36950","modified":1742642951580},{"_id":"public/tags/git/index.html","hash":"a3fbdc467270855faa166f299e14f272de202b74","modified":1742642951580},{"_id":"public/tags/ssh/index.html","hash":"e640428944d236c5d60c16962d9cd941e13a6efc","modified":1742642951580},{"_id":"public/tags/android/index.html","hash":"acf284604212e2729e36906bbbdbcba0e3ea10b0","modified":1742642951580},{"_id":"public/tags/生活/index.html","hash":"a0bba5741e8b6b4e8348b76f88398e33a337daf2","modified":1742642951580},{"_id":"public/tags/效率/index.html","hash":"e31003cdca6f567a396efa517c68a2c199e6404c","modified":1742642951580},{"_id":"public/tags/websocket/index.html","hash":"0ca4c10bcb13da2fbcead5b3bb39c407a3556c90","modified":1742642951580},{"_id":"public/tags/算法，java/index.html","hash":"25dace9472a8dfe8a88d6e626aa97ae8546c1f00","modified":1742642951580},{"_id":"public/tags/bat/index.html","hash":"be26ea072834553870fd71b86ae174bfdc6e4e01","modified":1742642951580},{"_id":"public/tags/windows/index.html","hash":"33fbf11e9df80b8b6db1cd1caddb2a65f0002caa","modified":1742642951580},{"_id":"public/tags/2015/index.html","hash":"c0ce1cda4724bd1763067ab9d0f3823d102d9f6e","modified":1742642951580},{"_id":"public/tags/sublime/index.html","hash":"ee7fd33ede9dc14bc209c7823e6cdcda8ef03938","modified":1742642951580},{"_id":"public/tags/前端/index.html","hash":"1f060a6b4cd84a81c56ed4b243f51e494d1ed818","modified":1742642951580},{"_id":"public/tags/java/index.html","hash":"982ae8825f87e67b8d5d0daa9974ac2e8fce7eb8","modified":1742642951580},{"_id":"public/tags/keytool/index.html","hash":"2a0c93f01024080ea580045801eaf4ba6105e08d","modified":1742642951580},{"_id":"public/css/style.css","hash":"ecc329be740a220cc188ff49b02da4847cb7ee5e","modified":1742642951580},{"_id":"public/fancybox/jquery.fancybox.min.css","hash":"1be9b79be02a1cfc5d96c4a5e0feb8f472babd95","modified":1742642951580},{"_id":"public/fancybox/jquery.fancybox.min.js","hash":"6181412e73966696d08e1e5b1243a572d0f22ba6","modified":1742642951580},{"_id":"public/js/jquery-3.6.4.min.js","hash":"eda46747c71d38a880bee44f9a439c3858bb8f99","modified":1742642951580},{"_id":"public/js/script.js","hash":"49773efcb2221bbdf2d86f3f5c5ff2d841b528cc","modified":1742642951580},{"_id":"public/css/images/banner.jpg","hash":"f44aa591089fcb3ec79770a1e102fd3289a7c6a6","modified":1742642951580}],"Category":[{"name":"博客","_id":"cm8k4mbdk0003q69d3nhnb5y7"},{"name":"算法","_id":"cm8k4mbdq0008q69desf4hdog"},{"name":"读书","_id":"cm8k4mbdy000lq69d2kjz3y95"},{"name":"图形","_id":"cm8k4mbe1000sq69d4qyx0ibp"},{"name":"生活","_id":"cm8k4mbe3000zq69dgmxwhz83"},{"name":"移动","_id":"cm8k4mbec001iq69d9a995yzg"},{"name":"学习","_id":"cm8k4mbeg001sq69de0z637on"},{"name":"工具","_id":"cm8k4mbek0028q69dgcrg718w"},{"name":"网页","_id":"cm8k4mbel002dq69d7n4og5yh"}],"Data":[],"Page":[],"Post":[{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","slug":"hello-world","published":1,"date":"2025-03-22T11:27:10.203Z","updated":"2025-03-22T11:27:10.203Z","comments":1,"layout":"post","photos":[],"_id":"cm8k4mbd30000q69d8somgf3o","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n","excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n"},{"layout":"post","title":"如何实现博客的搜索","published":1,"_content":"\n这个问题其实是在几个月前已经解决了,但是这个问题确确实实困扰了我很长的时间,所以我相信写出来肯定也会方便不少人.\n\n``` javascript\n$('#search-input').keyup(function() {\n\n    $(this).addClass('active').siblings().removeClass('active');\n\n    // 先将隐藏所有的文章\n    $('.pl__all').hide();\n\n    // 获取输入框的内容(转小写是为了不区分大小写)\n    var search_val = $('#search-input').val().toLowerCase();\n\n    // 这里是获取当前用户选择了分类\n    $('#pl__container > .' + $('#tags__ul > .active').attr('id') + ' > .pl__title ').each(function(i) {\n\n        var e = $(this);\n        // 忽略大小写后进行比较\n        if (e.text().toLowerCase().contains(search_val)) {\n            // 设置延迟10ms并且渐变显示出来\n            e.parent().delay(10).fadeIn(15);\n        }\n\n    });\n\n});\n```","source":"_posts/blog/2016-07-11-how-blog-support-search.markdown","raw":"---\nlayout: post\ntitle: 如何实现博客的搜索\ncategories: [博客]\ntags: [blog, javascript]\npublished: True\n---\n\n这个问题其实是在几个月前已经解决了,但是这个问题确确实实困扰了我很长的时间,所以我相信写出来肯定也会方便不少人.\n\n``` javascript\n$('#search-input').keyup(function() {\n\n    $(this).addClass('active').siblings().removeClass('active');\n\n    // 先将隐藏所有的文章\n    $('.pl__all').hide();\n\n    // 获取输入框的内容(转小写是为了不区分大小写)\n    var search_val = $('#search-input').val().toLowerCase();\n\n    // 这里是获取当前用户选择了分类\n    $('#pl__container > .' + $('#tags__ul > .active').attr('id') + ' > .pl__title ').each(function(i) {\n\n        var e = $(this);\n        // 忽略大小写后进行比较\n        if (e.text().toLowerCase().contains(search_val)) {\n            // 设置延迟10ms并且渐变显示出来\n            e.parent().delay(10).fadeIn(15);\n        }\n\n    });\n\n});\n```","slug":"blog/2016-07-11-how-blog-support-search","date":"2025-03-22T11:29:07.423Z","updated":"2025-03-22T11:29:07.423Z","comments":1,"photos":[],"_id":"cm8k4mbd90001q69d8p8qdz7n","content":"<p>这个问题其实是在几个月前已经解决了,但是这个问题确确实实困扰了我很长的时间,所以我相信写出来肯定也会方便不少人.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">&#x27;#search-input&#x27;</span>).<span class=\"title function_\">keyup</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    $(<span class=\"variable language_\">this</span>).<span class=\"title function_\">addClass</span>(<span class=\"string\">&#x27;active&#x27;</span>).<span class=\"title function_\">siblings</span>().<span class=\"title function_\">removeClass</span>(<span class=\"string\">&#x27;active&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 先将隐藏所有的文章</span></span><br><span class=\"line\">    $(<span class=\"string\">&#x27;.pl__all&#x27;</span>).<span class=\"title function_\">hide</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 获取输入框的内容(转小写是为了不区分大小写)</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> search_val = $(<span class=\"string\">&#x27;#search-input&#x27;</span>).<span class=\"title function_\">val</span>().<span class=\"title function_\">toLowerCase</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 这里是获取当前用户选择了分类</span></span><br><span class=\"line\">    $(<span class=\"string\">&#x27;#pl__container &gt; .&#x27;</span> + $(<span class=\"string\">&#x27;#tags__ul &gt; .active&#x27;</span>).<span class=\"title function_\">attr</span>(<span class=\"string\">&#x27;id&#x27;</span>) + <span class=\"string\">&#x27; &gt; .pl__title &#x27;</span>).<span class=\"title function_\">each</span>(<span class=\"keyword\">function</span>(<span class=\"params\">i</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> e = $(<span class=\"variable language_\">this</span>);</span><br><span class=\"line\">        <span class=\"comment\">// 忽略大小写后进行比较</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (e.<span class=\"title function_\">text</span>().<span class=\"title function_\">toLowerCase</span>().<span class=\"title function_\">contains</span>(search_val)) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 设置延迟10ms并且渐变显示出来</span></span><br><span class=\"line\">            e.<span class=\"title function_\">parent</span>().<span class=\"title function_\">delay</span>(<span class=\"number\">10</span>).<span class=\"title function_\">fadeIn</span>(<span class=\"number\">15</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>","excerpt":"","more":"<p>这个问题其实是在几个月前已经解决了,但是这个问题确确实实困扰了我很长的时间,所以我相信写出来肯定也会方便不少人.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">&#x27;#search-input&#x27;</span>).<span class=\"title function_\">keyup</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    $(<span class=\"variable language_\">this</span>).<span class=\"title function_\">addClass</span>(<span class=\"string\">&#x27;active&#x27;</span>).<span class=\"title function_\">siblings</span>().<span class=\"title function_\">removeClass</span>(<span class=\"string\">&#x27;active&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 先将隐藏所有的文章</span></span><br><span class=\"line\">    $(<span class=\"string\">&#x27;.pl__all&#x27;</span>).<span class=\"title function_\">hide</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 获取输入框的内容(转小写是为了不区分大小写)</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> search_val = $(<span class=\"string\">&#x27;#search-input&#x27;</span>).<span class=\"title function_\">val</span>().<span class=\"title function_\">toLowerCase</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 这里是获取当前用户选择了分类</span></span><br><span class=\"line\">    $(<span class=\"string\">&#x27;#pl__container &gt; .&#x27;</span> + $(<span class=\"string\">&#x27;#tags__ul &gt; .active&#x27;</span>).<span class=\"title function_\">attr</span>(<span class=\"string\">&#x27;id&#x27;</span>) + <span class=\"string\">&#x27; &gt; .pl__title &#x27;</span>).<span class=\"title function_\">each</span>(<span class=\"keyword\">function</span>(<span class=\"params\">i</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> e = $(<span class=\"variable language_\">this</span>);</span><br><span class=\"line\">        <span class=\"comment\">// 忽略大小写后进行比较</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (e.<span class=\"title function_\">text</span>().<span class=\"title function_\">toLowerCase</span>().<span class=\"title function_\">contains</span>(search_val)) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 设置延迟10ms并且渐变显示出来</span></span><br><span class=\"line\">            e.<span class=\"title function_\">parent</span>().<span class=\"title function_\">delay</span>(<span class=\"number\">10</span>).<span class=\"title function_\">fadeIn</span>(<span class=\"number\">15</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"如何计算方差和平均值","published":1,"_content":"\n在日常工作中，会碰到需要重复统计某些固定范围的数据，而这些数据往往有以下的特点：\n\n- 数据可能是每天都需要更新；\n- 每天的数据量非常大；\n- 最终需要快速展示多天数据的统计信息：方差，期望；\n- 统计所用内存不能太大；\n\n从以上的条件中可以看到，方差和均值的计算必须是增量式的，不能存储中间的结果；庆幸的是，数学总是很奇妙，可以满足我们磕磕绊绊的需求。\n\n## 递推公式\n\n平均值计算:\n\n$${ E }_{ n }={ E }_{ n-1 }+\\frac { { X }_{ n }-{ E }_{ n-1 } }{ n } ,\\quad 其中{ E }_{ n }=\\frac { \\sum _{ i=1 }^{ n }{ { x }_{ n } }  }{ n } ,{ E }_{ n }={ x }_{ 0 }. $$\n\n方差计算:\n\n$$F_{ n }={ F }_{ n-1 }+({ x }_{ n }-{ F }_{ n-1 })({ x }_{ n }-{ F }_{ n }),\\quad { 其中{ { S }_{ n } }^{ 2 } }=\\frac { { F }_{ n } }{ n } =\\frac { \\sum _{ i-1 }^{ n }{ { ({ x }_{ i }-{ E }_{ n }) }^{ 2 } }  }{ n } ,{ { S }_{ 0 } }^{ 2 }=0. $$\n\n所以每次迭代都可以直接通过上一次的结果得到当前的平均值和方差，下面给出一些公式的推导。\n\n## 公式推导\n\n### 平均值推导\n\n平均值定义：$${ E }_{ n }=\\frac { \\sum _{ i=1 }^{ n }{ { x }_{ n } }  }{ n } ,$$所以可以得到如下推导:\n\n$${ E }_{ n }=\\frac { \\sum _{ i=1 }^{ n }{ { x }_{ n } }  }{ n } =\\frac { \\sum _{ i=1 }^{ n-1 }{ { x }_{ i } } +{ x }_{ n } }{ n } =\\frac { (n-1)\\frac { \\sum _{ i=1 }^{ n-1 }{ { x }_{ i } }  }{ n-1 } +{ x }_{ n } }{ n } =\\frac { (n-1){ E }_{ n-1 }+{ x }_{ n } }{ n } ={ E }_{ n-1 }+\\frac { { x }_{ n }-{ E }_{ n-1 } }{ n }$$,\n\n 其中其中$${ E }_{ 0 }={ x }_{ 0 }$$.\n\n### 方差推导\n\n方差定义： $${ { { S }_{ n } }^{ 2 } }=\\frac { \\sum _{ i-1 }^{ n }{ { ({ x }_{ i }-{ E }_{ n }) }^{ 2 } }  }{ n } $$.\n\n为了推导方便，令$${ F }_{ n }=\\sum _{ i=1 }^{ n }{ { ({ x }_{ i }-{ E }_{ n }) }^{ 2 } }. $$, 想要获得方差，其实就是需要计算函数F在n处的值，已下给出相关推导:\n\n$${ F }_{ n }-{ F }_{ n-1 }=\\sum _{ i=1 }^{ n }{ { ({ x }_{ i }-{ E }_{ n }) }^{ 2 } } -\\sum _{ i=1 }^{ n-1 }{ { ({ x }_{ i }-{ E }_{ n-1 }) }^{ 2 }= } \\sum _{ i=1 }^{ n }{ { ({ x }_{ i }-{ E }_{ n-1 }+{ E }_{ n-1 }-{ E }_{ n }) }^{ 2 } } -\\sum _{ i=1 }^{ n-1 }{ { ({ x }_{ i }-{ E }_{ n-1 }) }^{ 2 } } $$，\n\n继续展开第一项中的平方: \n\n$${ F }_{ n }-{ F }_{ n-1 }={ ({ x }_{ n }-{ E }_{ n-1 }) }^{ 2 }+\\sum _{ i=1 }^{ n-1 }{ { ({ x }_{ i }-{ E }_{ n-1 }) }^{ 2 } } +2({ E }_{ n-1 }-{ E }_{ n })\\sum _{ i=1 }^{ n }{ ({ x }_{ i }-{ E }_{ n-1 }) } +\\sum _{ i=1 }^{ n }{ { ({ E }_{ n-1 }-{ E }_{ n }) }^{ 2 } } -\\sum _{ i=1 }^{ n-1 }{ { ({ x }_{ i }-{ E }_{ n-1 }) }^{ 2 } } $$,\n\n第二项和第五项消掉并且直接计算第三四项求和:\n\n$${ F }_{ n }-{ F }_{ n-1 }={ ({ x }_{ n }-{ E }_{ n-1 }) }^{ 2 }+2({ E }_{ n-1 }-{ E }_{ n })({ nE }_{ n }-{ nE }_{ n-1 })+{ n({ E }_{ n-1 }-{ E }_{ n }) }^{ 2 }$$,\n\n根据平均值的计算可以推导如下:\n\n$${ E }_{ n }={ E }_{ n-1 }+\\frac { { x }_{ n }-{ E }_{ n-1 } }{ n } \\Rightarrow n{ E }_{ n }=n{ E }_{ n-1 }+{ x }_{ n }-{ E }_{ n-1 }\\Rightarrow n({ E }_{ n }-{ E }_{ n-1 })={ x }_{ n }-{ E }_{ n-1 }$$,\n\n带入上一步第二项化简:\n\n$${ F }_{ n }-{ F }_{ n-1 }={ ({ x }_{ n }-{ E }_{ n-1 }) }^{ 2 }+2({ x }_{ n }-{ E }_{ n-1 })({ E }_{ n-1 }-{ E }_{ n })+{ n({ E }_{ n-1 }-{ E }_{ n }) }^{ 2 }={ ({ x }_{ n }-{ E }_{ n-1 }) }^{ 2 }-2({ x }_{ n }-{ E }_{ n-1 })({ E }_{ n }-{ E }_{ n-1 })+{ n({ E }_{ n }-{ E }_{ n-1 }) }^{ 2 }$$,\n\n后面两项提出公因式后:\n\n$${ F }_{ n }-{ F }_{ n-1 }={ ({ x }_{ n }-{ E }_{ n-1 }) }^{ 2 }+({ E }_{ n }-{ E }_{ n-1 }){ [-2x }_{ n }+2{ E }_{ n-1 }+n({ E }_{ n }-{ E }_{ n-1 })]$$,\n\n带入均值推导公式的第二个推导式并化简:\n\n$${ F }_{ n }-{ F }_{ n-1 }={ ({ x }_{ n }-{ E }_{ n-1 }) }^{ 2 }+({ E }_{ n }-{ E }_{ n-1 }){ [{ E }_{ n-1 }-x }_{ n }]$$,\n\n整理顺序看起来更加清晰:\n\n$${ F }_{ n }-{ F }_{ n-1 }={ ({ x }_{ n }-{ E }_{ n-1 }) }^{ 2 }-({ x }_{ n }-{ E }_{ n-1 })({ E }_{ n }-{ E }_{ n-1 })$$,\n\n提取公因式获得最终的最简式:\n\n$${ F }_{ n }-{ F }_{ n-1 }=({ x }_{ n }-{ E }_{ n-1 })({ x }_{ n }-{ E }_{ n })$$,\n\n因此可以得到如下公式:\n\n$${ F }_{ n }={ F }_{ n-1 }+({ x }_{ n }-{ E }_{ n-1 })({ x }_{ n }-{ E }_{ n })$$,\n\n其中$${ F }_{ 0 }={ 0 }$$.\n\n证毕.\n\n## 编码实现\n\n### java版本\n(未完待续)\n","source":"_posts/ai/2015-10-07-how-to-calculate-mean-and-variance.md","raw":"---\nlayout: post\ntitle: 如何计算方差和平均值\ncategories: [算法]\ntags: [算法，统计]\npublished: True\n\n---\n\n在日常工作中，会碰到需要重复统计某些固定范围的数据，而这些数据往往有以下的特点：\n\n- 数据可能是每天都需要更新；\n- 每天的数据量非常大；\n- 最终需要快速展示多天数据的统计信息：方差，期望；\n- 统计所用内存不能太大；\n\n从以上的条件中可以看到，方差和均值的计算必须是增量式的，不能存储中间的结果；庆幸的是，数学总是很奇妙，可以满足我们磕磕绊绊的需求。\n\n## 递推公式\n\n平均值计算:\n\n$${ E }_{ n }={ E }_{ n-1 }+\\frac { { X }_{ n }-{ E }_{ n-1 } }{ n } ,\\quad 其中{ E }_{ n }=\\frac { \\sum _{ i=1 }^{ n }{ { x }_{ n } }  }{ n } ,{ E }_{ n }={ x }_{ 0 }. $$\n\n方差计算:\n\n$$F_{ n }={ F }_{ n-1 }+({ x }_{ n }-{ F }_{ n-1 })({ x }_{ n }-{ F }_{ n }),\\quad { 其中{ { S }_{ n } }^{ 2 } }=\\frac { { F }_{ n } }{ n } =\\frac { \\sum _{ i-1 }^{ n }{ { ({ x }_{ i }-{ E }_{ n }) }^{ 2 } }  }{ n } ,{ { S }_{ 0 } }^{ 2 }=0. $$\n\n所以每次迭代都可以直接通过上一次的结果得到当前的平均值和方差，下面给出一些公式的推导。\n\n## 公式推导\n\n### 平均值推导\n\n平均值定义：$${ E }_{ n }=\\frac { \\sum _{ i=1 }^{ n }{ { x }_{ n } }  }{ n } ,$$所以可以得到如下推导:\n\n$${ E }_{ n }=\\frac { \\sum _{ i=1 }^{ n }{ { x }_{ n } }  }{ n } =\\frac { \\sum _{ i=1 }^{ n-1 }{ { x }_{ i } } +{ x }_{ n } }{ n } =\\frac { (n-1)\\frac { \\sum _{ i=1 }^{ n-1 }{ { x }_{ i } }  }{ n-1 } +{ x }_{ n } }{ n } =\\frac { (n-1){ E }_{ n-1 }+{ x }_{ n } }{ n } ={ E }_{ n-1 }+\\frac { { x }_{ n }-{ E }_{ n-1 } }{ n }$$,\n\n 其中其中$${ E }_{ 0 }={ x }_{ 0 }$$.\n\n### 方差推导\n\n方差定义： $${ { { S }_{ n } }^{ 2 } }=\\frac { \\sum _{ i-1 }^{ n }{ { ({ x }_{ i }-{ E }_{ n }) }^{ 2 } }  }{ n } $$.\n\n为了推导方便，令$${ F }_{ n }=\\sum _{ i=1 }^{ n }{ { ({ x }_{ i }-{ E }_{ n }) }^{ 2 } }. $$, 想要获得方差，其实就是需要计算函数F在n处的值，已下给出相关推导:\n\n$${ F }_{ n }-{ F }_{ n-1 }=\\sum _{ i=1 }^{ n }{ { ({ x }_{ i }-{ E }_{ n }) }^{ 2 } } -\\sum _{ i=1 }^{ n-1 }{ { ({ x }_{ i }-{ E }_{ n-1 }) }^{ 2 }= } \\sum _{ i=1 }^{ n }{ { ({ x }_{ i }-{ E }_{ n-1 }+{ E }_{ n-1 }-{ E }_{ n }) }^{ 2 } } -\\sum _{ i=1 }^{ n-1 }{ { ({ x }_{ i }-{ E }_{ n-1 }) }^{ 2 } } $$，\n\n继续展开第一项中的平方: \n\n$${ F }_{ n }-{ F }_{ n-1 }={ ({ x }_{ n }-{ E }_{ n-1 }) }^{ 2 }+\\sum _{ i=1 }^{ n-1 }{ { ({ x }_{ i }-{ E }_{ n-1 }) }^{ 2 } } +2({ E }_{ n-1 }-{ E }_{ n })\\sum _{ i=1 }^{ n }{ ({ x }_{ i }-{ E }_{ n-1 }) } +\\sum _{ i=1 }^{ n }{ { ({ E }_{ n-1 }-{ E }_{ n }) }^{ 2 } } -\\sum _{ i=1 }^{ n-1 }{ { ({ x }_{ i }-{ E }_{ n-1 }) }^{ 2 } } $$,\n\n第二项和第五项消掉并且直接计算第三四项求和:\n\n$${ F }_{ n }-{ F }_{ n-1 }={ ({ x }_{ n }-{ E }_{ n-1 }) }^{ 2 }+2({ E }_{ n-1 }-{ E }_{ n })({ nE }_{ n }-{ nE }_{ n-1 })+{ n({ E }_{ n-1 }-{ E }_{ n }) }^{ 2 }$$,\n\n根据平均值的计算可以推导如下:\n\n$${ E }_{ n }={ E }_{ n-1 }+\\frac { { x }_{ n }-{ E }_{ n-1 } }{ n } \\Rightarrow n{ E }_{ n }=n{ E }_{ n-1 }+{ x }_{ n }-{ E }_{ n-1 }\\Rightarrow n({ E }_{ n }-{ E }_{ n-1 })={ x }_{ n }-{ E }_{ n-1 }$$,\n\n带入上一步第二项化简:\n\n$${ F }_{ n }-{ F }_{ n-1 }={ ({ x }_{ n }-{ E }_{ n-1 }) }^{ 2 }+2({ x }_{ n }-{ E }_{ n-1 })({ E }_{ n-1 }-{ E }_{ n })+{ n({ E }_{ n-1 }-{ E }_{ n }) }^{ 2 }={ ({ x }_{ n }-{ E }_{ n-1 }) }^{ 2 }-2({ x }_{ n }-{ E }_{ n-1 })({ E }_{ n }-{ E }_{ n-1 })+{ n({ E }_{ n }-{ E }_{ n-1 }) }^{ 2 }$$,\n\n后面两项提出公因式后:\n\n$${ F }_{ n }-{ F }_{ n-1 }={ ({ x }_{ n }-{ E }_{ n-1 }) }^{ 2 }+({ E }_{ n }-{ E }_{ n-1 }){ [-2x }_{ n }+2{ E }_{ n-1 }+n({ E }_{ n }-{ E }_{ n-1 })]$$,\n\n带入均值推导公式的第二个推导式并化简:\n\n$${ F }_{ n }-{ F }_{ n-1 }={ ({ x }_{ n }-{ E }_{ n-1 }) }^{ 2 }+({ E }_{ n }-{ E }_{ n-1 }){ [{ E }_{ n-1 }-x }_{ n }]$$,\n\n整理顺序看起来更加清晰:\n\n$${ F }_{ n }-{ F }_{ n-1 }={ ({ x }_{ n }-{ E }_{ n-1 }) }^{ 2 }-({ x }_{ n }-{ E }_{ n-1 })({ E }_{ n }-{ E }_{ n-1 })$$,\n\n提取公因式获得最终的最简式:\n\n$${ F }_{ n }-{ F }_{ n-1 }=({ x }_{ n }-{ E }_{ n-1 })({ x }_{ n }-{ E }_{ n })$$,\n\n因此可以得到如下公式:\n\n$${ F }_{ n }={ F }_{ n-1 }+({ x }_{ n }-{ E }_{ n-1 })({ x }_{ n }-{ E }_{ n })$$,\n\n其中$${ F }_{ 0 }={ 0 }$$.\n\n证毕.\n\n## 编码实现\n\n### java版本\n(未完待续)\n","slug":"ai/2015-10-07-how-to-calculate-mean-and-variance","date":"2025-03-22T11:29:07.347Z","updated":"2025-03-22T11:29:07.348Z","comments":1,"photos":[],"_id":"cm8k4mbdd0002q69dh9f5dmti","content":"<p>在日常工作中，会碰到需要重复统计某些固定范围的数据，而这些数据往往有以下的特点：</p>\n<ul>\n<li>数据可能是每天都需要更新；</li>\n<li>每天的数据量非常大；</li>\n<li>最终需要快速展示多天数据的统计信息：方差，期望；</li>\n<li>统计所用内存不能太大；</li>\n</ul>\n<p>从以上的条件中可以看到，方差和均值的计算必须是增量式的，不能存储中间的结果；庆幸的是，数学总是很奇妙，可以满足我们磕磕绊绊的需求。</p>\n<h2 id=\"递推公式\"><a href=\"#递推公式\" class=\"headerlink\" title=\"递推公式\"></a>递推公式</h2><p>平均值计算:</p>\n<p>$${ E }<em>{ n }&#x3D;{ E }</em>{ n-1 }+\\frac { { X }<em>{ n }-{ E }</em>{ n-1 } }{ n } ,\\quad 其中{ E }<em>{ n }&#x3D;\\frac { \\sum <em>{ i&#x3D;1 }^{ n }{ { x }</em>{ n } }  }{ n } ,{ E }</em>{ n }&#x3D;{ x }_{ 0 }. $$</p>\n<p>方差计算:</p>\n<p>$$F_{ n }&#x3D;{ F }<em>{ n-1 }+({ x }</em>{ n }-{ F }<em>{ n-1 })({ x }</em>{ n }-{ F }<em>{ n }),\\quad { 其中{ { S }</em>{ n } }^{ 2 } }&#x3D;\\frac { { F }<em>{ n } }{ n } &#x3D;\\frac { \\sum <em>{ i-1 }^{ n }{ { ({ x }</em>{ i }-{ E }</em>{ n }) }^{ 2 } }  }{ n } ,{ { S }_{ 0 } }^{ 2 }&#x3D;0. $$</p>\n<p>所以每次迭代都可以直接通过上一次的结果得到当前的平均值和方差，下面给出一些公式的推导。</p>\n<h2 id=\"公式推导\"><a href=\"#公式推导\" class=\"headerlink\" title=\"公式推导\"></a>公式推导</h2><h3 id=\"平均值推导\"><a href=\"#平均值推导\" class=\"headerlink\" title=\"平均值推导\"></a>平均值推导</h3><p>平均值定义：$${ E }_{ n }&#x3D;\\frac { \\sum <em>{ i&#x3D;1 }^{ n }{ { x }</em>{ n } }  }{ n } ,$$所以可以得到如下推导:</p>\n<p>$${ E }<em>{ n }&#x3D;\\frac { \\sum <em>{ i&#x3D;1 }^{ n }{ { x }</em>{ n } }  }{ n } &#x3D;\\frac { \\sum <em>{ i&#x3D;1 }^{ n-1 }{ { x }</em>{ i } } +{ x }</em>{ n } }{ n } &#x3D;\\frac { (n-1)\\frac { \\sum <em>{ i&#x3D;1 }^{ n-1 }{ { x }</em>{ i } }  }{ n-1 } +{ x }<em>{ n } }{ n } &#x3D;\\frac { (n-1){ E }</em>{ n-1 }+{ x }<em>{ n } }{ n } &#x3D;{ E }</em>{ n-1 }+\\frac { { x }<em>{ n }-{ E }</em>{ n-1 } }{ n }$$,</p>\n<p> 其中其中$${ E }<em>{ 0 }&#x3D;{ x }</em>{ 0 }$$.</p>\n<h3 id=\"方差推导\"><a href=\"#方差推导\" class=\"headerlink\" title=\"方差推导\"></a>方差推导</h3><p>方差定义： $${ { { S }<em>{ n } }^{ 2 } }&#x3D;\\frac { \\sum <em>{ i-1 }^{ n }{ { ({ x }</em>{ i }-{ E }</em>{ n }) }^{ 2 } }  }{ n } $$.</p>\n<p>为了推导方便，令$${ F }<em>{ n }&#x3D;\\sum <em>{ i&#x3D;1 }^{ n }{ { ({ x }</em>{ i }-{ E }</em>{ n }) }^{ 2 } }. $$, 想要获得方差，其实就是需要计算函数F在n处的值，已下给出相关推导:</p>\n<p>$${ F }<em>{ n }-{ F }</em>{ n-1 }&#x3D;\\sum <em>{ i&#x3D;1 }^{ n }{ { ({ x }</em>{ i }-{ E }<em>{ n }) }^{ 2 } } -\\sum <em>{ i&#x3D;1 }^{ n-1 }{ { ({ x }</em>{ i }-{ E }</em>{ n-1 }) }^{ 2 }&#x3D; } \\sum <em>{ i&#x3D;1 }^{ n }{ { ({ x }</em>{ i }-{ E }<em>{ n-1 }+{ E }</em>{ n-1 }-{ E }<em>{ n }) }^{ 2 } } -\\sum <em>{ i&#x3D;1 }^{ n-1 }{ { ({ x }</em>{ i }-{ E }</em>{ n-1 }) }^{ 2 } } $$，</p>\n<p>继续展开第一项中的平方: </p>\n<p>$${ F }<em>{ n }-{ F }</em>{ n-1 }&#x3D;{ ({ x }<em>{ n }-{ E }</em>{ n-1 }) }^{ 2 }+\\sum <em>{ i&#x3D;1 }^{ n-1 }{ { ({ x }</em>{ i }-{ E }<em>{ n-1 }) }^{ 2 } } +2({ E }</em>{ n-1 }-{ E }<em>{ n })\\sum <em>{ i&#x3D;1 }^{ n }{ ({ x }</em>{ i }-{ E }</em>{ n-1 }) } +\\sum <em>{ i&#x3D;1 }^{ n }{ { ({ E }</em>{ n-1 }-{ E }<em>{ n }) }^{ 2 } } -\\sum <em>{ i&#x3D;1 }^{ n-1 }{ { ({ x }</em>{ i }-{ E }</em>{ n-1 }) }^{ 2 } } $$,</p>\n<p>第二项和第五项消掉并且直接计算第三四项求和:</p>\n<p>$${ F }<em>{ n }-{ F }</em>{ n-1 }&#x3D;{ ({ x }<em>{ n }-{ E }</em>{ n-1 }) }^{ 2 }+2({ E }<em>{ n-1 }-{ E }</em>{ n })({ nE }<em>{ n }-{ nE }</em>{ n-1 })+{ n({ E }<em>{ n-1 }-{ E }</em>{ n }) }^{ 2 }$$,</p>\n<p>根据平均值的计算可以推导如下:</p>\n<p>$${ E }<em>{ n }&#x3D;{ E }</em>{ n-1 }+\\frac { { x }<em>{ n }-{ E }</em>{ n-1 } }{ n } \\Rightarrow n{ E }<em>{ n }&#x3D;n{ E }</em>{ n-1 }+{ x }<em>{ n }-{ E }</em>{ n-1 }\\Rightarrow n({ E }<em>{ n }-{ E }</em>{ n-1 })&#x3D;{ x }<em>{ n }-{ E }</em>{ n-1 }$$,</p>\n<p>带入上一步第二项化简:</p>\n<p>$${ F }<em>{ n }-{ F }</em>{ n-1 }&#x3D;{ ({ x }<em>{ n }-{ E }</em>{ n-1 }) }^{ 2 }+2({ x }<em>{ n }-{ E }</em>{ n-1 })({ E }<em>{ n-1 }-{ E }</em>{ n })+{ n({ E }<em>{ n-1 }-{ E }</em>{ n }) }^{ 2 }&#x3D;{ ({ x }<em>{ n }-{ E }</em>{ n-1 }) }^{ 2 }-2({ x }<em>{ n }-{ E }</em>{ n-1 })({ E }<em>{ n }-{ E }</em>{ n-1 })+{ n({ E }<em>{ n }-{ E }</em>{ n-1 }) }^{ 2 }$$,</p>\n<p>后面两项提出公因式后:</p>\n<p>$${ F }<em>{ n }-{ F }</em>{ n-1 }&#x3D;{ ({ x }<em>{ n }-{ E }</em>{ n-1 }) }^{ 2 }+({ E }<em>{ n }-{ E }</em>{ n-1 }){ [-2x }<em>{ n }+2{ E }</em>{ n-1 }+n({ E }<em>{ n }-{ E }</em>{ n-1 })]$$,</p>\n<p>带入均值推导公式的第二个推导式并化简:</p>\n<p>$${ F }<em>{ n }-{ F }</em>{ n-1 }&#x3D;{ ({ x }<em>{ n }-{ E }</em>{ n-1 }) }^{ 2 }+({ E }<em>{ n }-{ E }</em>{ n-1 }){ [{ E }<em>{ n-1 }-x }</em>{ n }]$$,</p>\n<p>整理顺序看起来更加清晰:</p>\n<p>$${ F }<em>{ n }-{ F }</em>{ n-1 }&#x3D;{ ({ x }<em>{ n }-{ E }</em>{ n-1 }) }^{ 2 }-({ x }<em>{ n }-{ E }</em>{ n-1 })({ E }<em>{ n }-{ E }</em>{ n-1 })$$,</p>\n<p>提取公因式获得最终的最简式:</p>\n<p>$${ F }<em>{ n }-{ F }</em>{ n-1 }&#x3D;({ x }<em>{ n }-{ E }</em>{ n-1 })({ x }<em>{ n }-{ E }</em>{ n })$$,</p>\n<p>因此可以得到如下公式:</p>\n<p>$${ F }<em>{ n }&#x3D;{ F }</em>{ n-1 }+({ x }<em>{ n }-{ E }</em>{ n-1 })({ x }<em>{ n }-{ E }</em>{ n })$$,</p>\n<p>其中$${ F }_{ 0 }&#x3D;{ 0 }$$.</p>\n<p>证毕.</p>\n<h2 id=\"编码实现\"><a href=\"#编码实现\" class=\"headerlink\" title=\"编码实现\"></a>编码实现</h2><h3 id=\"java版本\"><a href=\"#java版本\" class=\"headerlink\" title=\"java版本\"></a>java版本</h3><p>(未完待续)</p>\n","excerpt":"","more":"<p>在日常工作中，会碰到需要重复统计某些固定范围的数据，而这些数据往往有以下的特点：</p>\n<ul>\n<li>数据可能是每天都需要更新；</li>\n<li>每天的数据量非常大；</li>\n<li>最终需要快速展示多天数据的统计信息：方差，期望；</li>\n<li>统计所用内存不能太大；</li>\n</ul>\n<p>从以上的条件中可以看到，方差和均值的计算必须是增量式的，不能存储中间的结果；庆幸的是，数学总是很奇妙，可以满足我们磕磕绊绊的需求。</p>\n<h2 id=\"递推公式\"><a href=\"#递推公式\" class=\"headerlink\" title=\"递推公式\"></a>递推公式</h2><p>平均值计算:</p>\n<p>$${ E }<em>{ n }&#x3D;{ E }</em>{ n-1 }+\\frac { { X }<em>{ n }-{ E }</em>{ n-1 } }{ n } ,\\quad 其中{ E }<em>{ n }&#x3D;\\frac { \\sum <em>{ i&#x3D;1 }^{ n }{ { x }</em>{ n } }  }{ n } ,{ E }</em>{ n }&#x3D;{ x }_{ 0 }. $$</p>\n<p>方差计算:</p>\n<p>$$F_{ n }&#x3D;{ F }<em>{ n-1 }+({ x }</em>{ n }-{ F }<em>{ n-1 })({ x }</em>{ n }-{ F }<em>{ n }),\\quad { 其中{ { S }</em>{ n } }^{ 2 } }&#x3D;\\frac { { F }<em>{ n } }{ n } &#x3D;\\frac { \\sum <em>{ i-1 }^{ n }{ { ({ x }</em>{ i }-{ E }</em>{ n }) }^{ 2 } }  }{ n } ,{ { S }_{ 0 } }^{ 2 }&#x3D;0. $$</p>\n<p>所以每次迭代都可以直接通过上一次的结果得到当前的平均值和方差，下面给出一些公式的推导。</p>\n<h2 id=\"公式推导\"><a href=\"#公式推导\" class=\"headerlink\" title=\"公式推导\"></a>公式推导</h2><h3 id=\"平均值推导\"><a href=\"#平均值推导\" class=\"headerlink\" title=\"平均值推导\"></a>平均值推导</h3><p>平均值定义：$${ E }_{ n }&#x3D;\\frac { \\sum <em>{ i&#x3D;1 }^{ n }{ { x }</em>{ n } }  }{ n } ,$$所以可以得到如下推导:</p>\n<p>$${ E }<em>{ n }&#x3D;\\frac { \\sum <em>{ i&#x3D;1 }^{ n }{ { x }</em>{ n } }  }{ n } &#x3D;\\frac { \\sum <em>{ i&#x3D;1 }^{ n-1 }{ { x }</em>{ i } } +{ x }</em>{ n } }{ n } &#x3D;\\frac { (n-1)\\frac { \\sum <em>{ i&#x3D;1 }^{ n-1 }{ { x }</em>{ i } }  }{ n-1 } +{ x }<em>{ n } }{ n } &#x3D;\\frac { (n-1){ E }</em>{ n-1 }+{ x }<em>{ n } }{ n } &#x3D;{ E }</em>{ n-1 }+\\frac { { x }<em>{ n }-{ E }</em>{ n-1 } }{ n }$$,</p>\n<p> 其中其中$${ E }<em>{ 0 }&#x3D;{ x }</em>{ 0 }$$.</p>\n<h3 id=\"方差推导\"><a href=\"#方差推导\" class=\"headerlink\" title=\"方差推导\"></a>方差推导</h3><p>方差定义： $${ { { S }<em>{ n } }^{ 2 } }&#x3D;\\frac { \\sum <em>{ i-1 }^{ n }{ { ({ x }</em>{ i }-{ E }</em>{ n }) }^{ 2 } }  }{ n } $$.</p>\n<p>为了推导方便，令$${ F }<em>{ n }&#x3D;\\sum <em>{ i&#x3D;1 }^{ n }{ { ({ x }</em>{ i }-{ E }</em>{ n }) }^{ 2 } }. $$, 想要获得方差，其实就是需要计算函数F在n处的值，已下给出相关推导:</p>\n<p>$${ F }<em>{ n }-{ F }</em>{ n-1 }&#x3D;\\sum <em>{ i&#x3D;1 }^{ n }{ { ({ x }</em>{ i }-{ E }<em>{ n }) }^{ 2 } } -\\sum <em>{ i&#x3D;1 }^{ n-1 }{ { ({ x }</em>{ i }-{ E }</em>{ n-1 }) }^{ 2 }&#x3D; } \\sum <em>{ i&#x3D;1 }^{ n }{ { ({ x }</em>{ i }-{ E }<em>{ n-1 }+{ E }</em>{ n-1 }-{ E }<em>{ n }) }^{ 2 } } -\\sum <em>{ i&#x3D;1 }^{ n-1 }{ { ({ x }</em>{ i }-{ E }</em>{ n-1 }) }^{ 2 } } $$，</p>\n<p>继续展开第一项中的平方: </p>\n<p>$${ F }<em>{ n }-{ F }</em>{ n-1 }&#x3D;{ ({ x }<em>{ n }-{ E }</em>{ n-1 }) }^{ 2 }+\\sum <em>{ i&#x3D;1 }^{ n-1 }{ { ({ x }</em>{ i }-{ E }<em>{ n-1 }) }^{ 2 } } +2({ E }</em>{ n-1 }-{ E }<em>{ n })\\sum <em>{ i&#x3D;1 }^{ n }{ ({ x }</em>{ i }-{ E }</em>{ n-1 }) } +\\sum <em>{ i&#x3D;1 }^{ n }{ { ({ E }</em>{ n-1 }-{ E }<em>{ n }) }^{ 2 } } -\\sum <em>{ i&#x3D;1 }^{ n-1 }{ { ({ x }</em>{ i }-{ E }</em>{ n-1 }) }^{ 2 } } $$,</p>\n<p>第二项和第五项消掉并且直接计算第三四项求和:</p>\n<p>$${ F }<em>{ n }-{ F }</em>{ n-1 }&#x3D;{ ({ x }<em>{ n }-{ E }</em>{ n-1 }) }^{ 2 }+2({ E }<em>{ n-1 }-{ E }</em>{ n })({ nE }<em>{ n }-{ nE }</em>{ n-1 })+{ n({ E }<em>{ n-1 }-{ E }</em>{ n }) }^{ 2 }$$,</p>\n<p>根据平均值的计算可以推导如下:</p>\n<p>$${ E }<em>{ n }&#x3D;{ E }</em>{ n-1 }+\\frac { { x }<em>{ n }-{ E }</em>{ n-1 } }{ n } \\Rightarrow n{ E }<em>{ n }&#x3D;n{ E }</em>{ n-1 }+{ x }<em>{ n }-{ E }</em>{ n-1 }\\Rightarrow n({ E }<em>{ n }-{ E }</em>{ n-1 })&#x3D;{ x }<em>{ n }-{ E }</em>{ n-1 }$$,</p>\n<p>带入上一步第二项化简:</p>\n<p>$${ F }<em>{ n }-{ F }</em>{ n-1 }&#x3D;{ ({ x }<em>{ n }-{ E }</em>{ n-1 }) }^{ 2 }+2({ x }<em>{ n }-{ E }</em>{ n-1 })({ E }<em>{ n-1 }-{ E }</em>{ n })+{ n({ E }<em>{ n-1 }-{ E }</em>{ n }) }^{ 2 }&#x3D;{ ({ x }<em>{ n }-{ E }</em>{ n-1 }) }^{ 2 }-2({ x }<em>{ n }-{ E }</em>{ n-1 })({ E }<em>{ n }-{ E }</em>{ n-1 })+{ n({ E }<em>{ n }-{ E }</em>{ n-1 }) }^{ 2 }$$,</p>\n<p>后面两项提出公因式后:</p>\n<p>$${ F }<em>{ n }-{ F }</em>{ n-1 }&#x3D;{ ({ x }<em>{ n }-{ E }</em>{ n-1 }) }^{ 2 }+({ E }<em>{ n }-{ E }</em>{ n-1 }){ [-2x }<em>{ n }+2{ E }</em>{ n-1 }+n({ E }<em>{ n }-{ E }</em>{ n-1 })]$$,</p>\n<p>带入均值推导公式的第二个推导式并化简:</p>\n<p>$${ F }<em>{ n }-{ F }</em>{ n-1 }&#x3D;{ ({ x }<em>{ n }-{ E }</em>{ n-1 }) }^{ 2 }+({ E }<em>{ n }-{ E }</em>{ n-1 }){ [{ E }<em>{ n-1 }-x }</em>{ n }]$$,</p>\n<p>整理顺序看起来更加清晰:</p>\n<p>$${ F }<em>{ n }-{ F }</em>{ n-1 }&#x3D;{ ({ x }<em>{ n }-{ E }</em>{ n-1 }) }^{ 2 }-({ x }<em>{ n }-{ E }</em>{ n-1 })({ E }<em>{ n }-{ E }</em>{ n-1 })$$,</p>\n<p>提取公因式获得最终的最简式:</p>\n<p>$${ F }<em>{ n }-{ F }</em>{ n-1 }&#x3D;({ x }<em>{ n }-{ E }</em>{ n-1 })({ x }<em>{ n }-{ E }</em>{ n })$$,</p>\n<p>因此可以得到如下公式:</p>\n<p>$${ F }<em>{ n }&#x3D;{ F }</em>{ n-1 }+({ x }<em>{ n }-{ E }</em>{ n-1 })({ x }<em>{ n }-{ E }</em>{ n })$$,</p>\n<p>其中$${ F }_{ 0 }&#x3D;{ 0 }$$.</p>\n<p>证毕.</p>\n<h2 id=\"编码实现\"><a href=\"#编码实现\" class=\"headerlink\" title=\"编码实现\"></a>编码实现</h2><h3 id=\"java版本\"><a href=\"#java版本\" class=\"headerlink\" title=\"java版本\"></a>java版本</h3><p>(未完待续)</p>\n"},{"layout":"post","title":"博客的RoadMap","published":1,"_content":"\n\n本文主要用来记录过去的三年我在博客中已经完成的功能及在以后的日子里可能会带来的特性;\n\n\n\n## 博客的功能\n\n- [x] 借助的`MathJax`支持数学公式,基本`Latex`语法\n- [x] 纯`js`+'jquery'实现的热搜索,文章较少基本够用,后面考虑配合正则在feed中查找;\n- [x] 博客使用前端自动化工具`gulp`进行依赖管理;\n- [x] `gulp`的常用任务实现: `watch`, `jekyll`, `sass`\n- [x] 博客字体美化修改, 使得在`mac`, `android`, `win`下的字体都比较好看\n- [ ] 将`RoadMap`做成`Timeline`\n- [x] 订阅功能: `feed`、`atom`我还需要考虑一下;\n- [ ] 代码高亮, 需要一个黑色主题的, 尽可能丰富, 尽可能支持多中语言\n- [x] 实现博客的评论功能, [怎样为你的博客增加评论功能](https://blog.aiziyuer.com/2016/07/17/how-to-add-disqus.html)\n- [ ] 访问统计, 国内外分流\n- [ ] 实现博客的暗色主题化, 我大部分的工作都是在夜晚进行的\n- [x] 博客支持`https`访问\n- [x] 博客使用`cdn`进行访问加速\n\n","source":"_posts/blog/2016-07-10-blog-roadmap.markdown","raw":"---\nlayout: post\ntitle: 博客的RoadMap\ncategories: [博客]\ntags: [技术]\npublished: true\n---\n\n\n本文主要用来记录过去的三年我在博客中已经完成的功能及在以后的日子里可能会带来的特性;\n\n\n\n## 博客的功能\n\n- [x] 借助的`MathJax`支持数学公式,基本`Latex`语法\n- [x] 纯`js`+'jquery'实现的热搜索,文章较少基本够用,后面考虑配合正则在feed中查找;\n- [x] 博客使用前端自动化工具`gulp`进行依赖管理;\n- [x] `gulp`的常用任务实现: `watch`, `jekyll`, `sass`\n- [x] 博客字体美化修改, 使得在`mac`, `android`, `win`下的字体都比较好看\n- [ ] 将`RoadMap`做成`Timeline`\n- [x] 订阅功能: `feed`、`atom`我还需要考虑一下;\n- [ ] 代码高亮, 需要一个黑色主题的, 尽可能丰富, 尽可能支持多中语言\n- [x] 实现博客的评论功能, [怎样为你的博客增加评论功能](https://blog.aiziyuer.com/2016/07/17/how-to-add-disqus.html)\n- [ ] 访问统计, 国内外分流\n- [ ] 实现博客的暗色主题化, 我大部分的工作都是在夜晚进行的\n- [x] 博客支持`https`访问\n- [x] 博客使用`cdn`进行访问加速\n\n","slug":"blog/2016-07-10-blog-roadmap","date":"2025-03-22T11:29:07.422Z","updated":"2025-03-22T11:29:07.423Z","comments":1,"photos":[],"_id":"cm8k4mbdn0005q69d8j48224v","content":"<p>本文主要用来记录过去的三年我在博客中已经完成的功能及在以后的日子里可能会带来的特性;</p>\n<h2 id=\"博客的功能\"><a href=\"#博客的功能\" class=\"headerlink\" title=\"博客的功能\"></a>博客的功能</h2><ul>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 借助的<code>MathJax</code>支持数学公式,基本<code>Latex</code>语法</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 纯<code>js</code>+’jquery’实现的热搜索,文章较少基本够用,后面考虑配合正则在feed中查找;</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 博客使用前端自动化工具<code>gulp</code>进行依赖管理;</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> <code>gulp</code>的常用任务实现: <code>watch</code>, <code>jekyll</code>, <code>sass</code></li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 博客字体美化修改, 使得在<code>mac</code>, <code>android</code>, <code>win</code>下的字体都比较好看</li>\n<li><input disabled=\"\" type=\"checkbox\"> 将<code>RoadMap</code>做成<code>Timeline</code></li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 订阅功能: <code>feed</code>、<code>atom</code>我还需要考虑一下;</li>\n<li><input disabled=\"\" type=\"checkbox\"> 代码高亮, 需要一个黑色主题的, 尽可能丰富, 尽可能支持多中语言</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 实现博客的评论功能, <a href=\"https://blog.aiziyuer.com/2016/07/17/how-to-add-disqus.html\">怎样为你的博客增加评论功能</a></li>\n<li><input disabled=\"\" type=\"checkbox\"> 访问统计, 国内外分流</li>\n<li><input disabled=\"\" type=\"checkbox\"> 实现博客的暗色主题化, 我大部分的工作都是在夜晚进行的</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 博客支持<code>https</code>访问</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 博客使用<code>cdn</code>进行访问加速</li>\n</ul>\n","excerpt":"","more":"<p>本文主要用来记录过去的三年我在博客中已经完成的功能及在以后的日子里可能会带来的特性;</p>\n<h2 id=\"博客的功能\"><a href=\"#博客的功能\" class=\"headerlink\" title=\"博客的功能\"></a>博客的功能</h2><ul>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 借助的<code>MathJax</code>支持数学公式,基本<code>Latex</code>语法</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 纯<code>js</code>+’jquery’实现的热搜索,文章较少基本够用,后面考虑配合正则在feed中查找;</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 博客使用前端自动化工具<code>gulp</code>进行依赖管理;</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> <code>gulp</code>的常用任务实现: <code>watch</code>, <code>jekyll</code>, <code>sass</code></li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 博客字体美化修改, 使得在<code>mac</code>, <code>android</code>, <code>win</code>下的字体都比较好看</li>\n<li><input disabled=\"\" type=\"checkbox\"> 将<code>RoadMap</code>做成<code>Timeline</code></li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 订阅功能: <code>feed</code>、<code>atom</code>我还需要考虑一下;</li>\n<li><input disabled=\"\" type=\"checkbox\"> 代码高亮, 需要一个黑色主题的, 尽可能丰富, 尽可能支持多中语言</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 实现博客的评论功能, <a href=\"https://blog.aiziyuer.com/2016/07/17/how-to-add-disqus.html\">怎样为你的博客增加评论功能</a></li>\n<li><input disabled=\"\" type=\"checkbox\"> 访问统计, 国内外分流</li>\n<li><input disabled=\"\" type=\"checkbox\"> 实现博客的暗色主题化, 我大部分的工作都是在夜晚进行的</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 博客支持<code>https</code>访问</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 博客使用<code>cdn</code>进行访问加速</li>\n</ul>\n"},{"layout":"post","title":"如何高效地管理博客","published":1,"_content":"\n我的博客主要是采用`jekyll`作为后台进行`markdown`文法的文章渲染,但是我在使用过程中发现主要有两种使用场景:\n\n- 对博客主题进行修改 -- 往往需要调节`css`和`js`等跟博客文章无关的东西, 需要一个可以即时预览的功能\n- 纯粹写文章, 不想被其他因素打扰, 不涉及美化工作, 文法基本已经记住,不需要实时预览,但是需要刷新页面就能看效果\n\n## 实时预览功能\n\n这个实时预览功能, 最直接的就是修改文章样式后, 浏览器(可能还有我的手机平板)上的网页内容需要跟着刷新.而且同时\n我的博客中样式的编写都是`scss`的,所以需要有个实时的编译器,观察到我的样式改变后,立刻生成对应的`css`文件,并且通知\n`jekyll`服务刷新头文件,最后通知浏览器刷新页面.\n\n\n### 前端自动化\n\n考虑到博客也算是一个弱化的前端工程,尝试过[`compass`](http://compass-style.org/)、\n[`kola`](http://koala-app.com/),觉得限制实在太多,\n所以干脆从头开始使用纯前端自动化工具[`gulp`](http://www.gulpjs.com.cn/)管理博客.\n\n### 一些经验\n\n`gulp`这个东西给我的感觉有点像`unix`的味道, 不过不管她多么好用,依然离不开[`nodejs`](https://nodejs.org/zh-cn/),\n[`npm`](https://www.npmjs.com/),我这里就不赘述. 以下是我的一些`gulp`任务书写经验\n\n- `gulpfile.js`其实可以是一个文件夹, `gulp`的运行非常聪明, 她可以以文件夹下的index.js作为入口文件\n- 整个工程中,只有`gulp`的脚本是属于`nodejs`, 所以`.jshintrc`文件建议在`gulpfile.js`单独弄一个\n- 使用[`require-dir`](https://github.com/aseemk/requireDir)插件可以遍历一个文件夹下所有的`javascript`文件,懒人必备\n- `config.json`作为配置文件的方式太low了, 一律使用`config.js`+ `module.exports`的方式替代,美真的不是一点点\n\n### Sass的编译\n\n> talk's cheap, show u the code.\n\n``` javascript \n\n// gulpfile.js/tasks/css.js 定义编译的任务\ngulp.task('css', () => {\n    gulp.src(config.src.scss + '/**/*.?(s)css')\n        .pipe($.sass())\n        .on('error', (err) => {\n        \t// 这里捕获异常, 只是打印错误日志, 不会终止css任务\n            $.util.log(err);\n        })\n        .pipe($.concat('style.css'))\n        .pipe(gulp.dest(config.src.css));\n});\n\n// gulpfile.js/tasks/watch.js 定义watch任务, 当有css文件更新就触发编译任务\ngulp.task('watch:css', () => {\n    gulp.watch(config.src.scss + '**/*.?(s)css', ['css']);\n});\n\n```\n\n### Jekyll编译服务\n\n因为`jekyll`是使用`ruby`语言开发的一个小的服务器,所以需要使用`nodejs`提供的`chind.spawn`的方式来多进程运行:\n\n``` javascript \n\n// gulpfile.js/tasks/jekyll.js 使用child.spawn来完成jekyll进程的启动\ngulp.task('jekyll', () => {\n\n    var jekyll_exe = process.platform === \"win32\" ? \"jekyll.bat\" : \"jekyll\";\n    var jekyll = child.spawn(jekyll_exe, ['build',\n        '--incremental', // 当文章非常多的时候开启, 文章少的时候貌似不开效果更好\n        '--watch'\n    ]);\n\n    var jekyllLogger = (buffer) => {\n        buffer.toString()\n            .split(/\\n/)\n            .forEach((message) => $.util.log('Jekyll: ' + message));\n    };\n\n    jekyll.stdout.on('data', jekyllLogger);\n    jekyll.stderr.on('data', jekyllLogger);\n});\n\n```\n\n### 同步刷新浏览器\n\n这里要介绍下一个很好玩的插件[`browserSync`](https://www.browsersync.io/), 我的理解是她代理了一部分的http服务,\n所以访问网站的同时,其实是她在页面的投入加入了一些东西, 所以她可以远程触发浏览器重新请求网页, 配置如下:\n\n```javascript\nvar browserSync = require('browser-sync').create();\n\ngulp.task('server', ['css'], () => {\n\n\t$.util.log(config.site);\n\n    browserSync.init({\n        files: [config.site.root + '/**'],\n        port: 3131,\n        server: {\n            baseDir: config.site.root\n        }\n    });\n   \n});\n```\n\n### 汇总gulp任务\n\n到这里, 基本上稍微串一串几个任务就可以实现第一个需求了: `gulp.task('start', ['jekyll','server', 'watch']);`\n\n\n### 纯粹写代码\n\n由于我之前博客是使用`gulp`来进行管理, 这种方式肯定是希望控制台回显更多的错误日志才好,但是如果是平时的使用,我更希望专注于内容的协作, 所以我使用`bash`改写了启动脚本:\n\n```bash\n#!/usr/bin/env bash\n\nusage()\n{\n\tprintf \"\nUsage\n\n  start [options]\n\nOptions\n\n[-k|--kill] 杀死jekyll进程\n\n[-j|--jekyll] 启动jekyll进程\n\n[-h|--help] 显示帮助\n\n[-g|--gulp] gulp的方式运行\n\t\n\"\n}\n\nkill_jekyll_service(){\n  ps -ef | grep jekyll | grep -v grep | awk '{print $2}' | xargs kill -9\n}\n\nstart_jekyll_service(){\n  jekyll server >output.log 2>&1 &\n}\n\ngulp_start(){\n  gulp start\n}\n\nwhile true; do\n  case \"$1\" in\n\n    (-k|--kill)\n\t    kill_jekyll_service\n      exit 0\n\t    ;;\n\n    (-j|--jekyll)\n      kill_jekyll_service\n      start_jekyll_service\n      exit 0\n      ;;\n\n    (-h|--help)\n      usage\n      exit 0\n      ;;\n\n    (-g|--gulp)\n      gulp_start\n      exit 0\n      ;;\n\n    (*)\n      usage\n      exit 1\n      ;;\n\n  esac\ndone\n```\n\n","source":"_posts/blog/2016-07-11-how-to-manager-blog-start.markdown","raw":"---\nlayout: post\ntitle: 如何高效地管理博客\ncategories: [博客]\ntags: [blog, bash]\npublished: True\n---\n\n我的博客主要是采用`jekyll`作为后台进行`markdown`文法的文章渲染,但是我在使用过程中发现主要有两种使用场景:\n\n- 对博客主题进行修改 -- 往往需要调节`css`和`js`等跟博客文章无关的东西, 需要一个可以即时预览的功能\n- 纯粹写文章, 不想被其他因素打扰, 不涉及美化工作, 文法基本已经记住,不需要实时预览,但是需要刷新页面就能看效果\n\n## 实时预览功能\n\n这个实时预览功能, 最直接的就是修改文章样式后, 浏览器(可能还有我的手机平板)上的网页内容需要跟着刷新.而且同时\n我的博客中样式的编写都是`scss`的,所以需要有个实时的编译器,观察到我的样式改变后,立刻生成对应的`css`文件,并且通知\n`jekyll`服务刷新头文件,最后通知浏览器刷新页面.\n\n\n### 前端自动化\n\n考虑到博客也算是一个弱化的前端工程,尝试过[`compass`](http://compass-style.org/)、\n[`kola`](http://koala-app.com/),觉得限制实在太多,\n所以干脆从头开始使用纯前端自动化工具[`gulp`](http://www.gulpjs.com.cn/)管理博客.\n\n### 一些经验\n\n`gulp`这个东西给我的感觉有点像`unix`的味道, 不过不管她多么好用,依然离不开[`nodejs`](https://nodejs.org/zh-cn/),\n[`npm`](https://www.npmjs.com/),我这里就不赘述. 以下是我的一些`gulp`任务书写经验\n\n- `gulpfile.js`其实可以是一个文件夹, `gulp`的运行非常聪明, 她可以以文件夹下的index.js作为入口文件\n- 整个工程中,只有`gulp`的脚本是属于`nodejs`, 所以`.jshintrc`文件建议在`gulpfile.js`单独弄一个\n- 使用[`require-dir`](https://github.com/aseemk/requireDir)插件可以遍历一个文件夹下所有的`javascript`文件,懒人必备\n- `config.json`作为配置文件的方式太low了, 一律使用`config.js`+ `module.exports`的方式替代,美真的不是一点点\n\n### Sass的编译\n\n> talk's cheap, show u the code.\n\n``` javascript \n\n// gulpfile.js/tasks/css.js 定义编译的任务\ngulp.task('css', () => {\n    gulp.src(config.src.scss + '/**/*.?(s)css')\n        .pipe($.sass())\n        .on('error', (err) => {\n        \t// 这里捕获异常, 只是打印错误日志, 不会终止css任务\n            $.util.log(err);\n        })\n        .pipe($.concat('style.css'))\n        .pipe(gulp.dest(config.src.css));\n});\n\n// gulpfile.js/tasks/watch.js 定义watch任务, 当有css文件更新就触发编译任务\ngulp.task('watch:css', () => {\n    gulp.watch(config.src.scss + '**/*.?(s)css', ['css']);\n});\n\n```\n\n### Jekyll编译服务\n\n因为`jekyll`是使用`ruby`语言开发的一个小的服务器,所以需要使用`nodejs`提供的`chind.spawn`的方式来多进程运行:\n\n``` javascript \n\n// gulpfile.js/tasks/jekyll.js 使用child.spawn来完成jekyll进程的启动\ngulp.task('jekyll', () => {\n\n    var jekyll_exe = process.platform === \"win32\" ? \"jekyll.bat\" : \"jekyll\";\n    var jekyll = child.spawn(jekyll_exe, ['build',\n        '--incremental', // 当文章非常多的时候开启, 文章少的时候貌似不开效果更好\n        '--watch'\n    ]);\n\n    var jekyllLogger = (buffer) => {\n        buffer.toString()\n            .split(/\\n/)\n            .forEach((message) => $.util.log('Jekyll: ' + message));\n    };\n\n    jekyll.stdout.on('data', jekyllLogger);\n    jekyll.stderr.on('data', jekyllLogger);\n});\n\n```\n\n### 同步刷新浏览器\n\n这里要介绍下一个很好玩的插件[`browserSync`](https://www.browsersync.io/), 我的理解是她代理了一部分的http服务,\n所以访问网站的同时,其实是她在页面的投入加入了一些东西, 所以她可以远程触发浏览器重新请求网页, 配置如下:\n\n```javascript\nvar browserSync = require('browser-sync').create();\n\ngulp.task('server', ['css'], () => {\n\n\t$.util.log(config.site);\n\n    browserSync.init({\n        files: [config.site.root + '/**'],\n        port: 3131,\n        server: {\n            baseDir: config.site.root\n        }\n    });\n   \n});\n```\n\n### 汇总gulp任务\n\n到这里, 基本上稍微串一串几个任务就可以实现第一个需求了: `gulp.task('start', ['jekyll','server', 'watch']);`\n\n\n### 纯粹写代码\n\n由于我之前博客是使用`gulp`来进行管理, 这种方式肯定是希望控制台回显更多的错误日志才好,但是如果是平时的使用,我更希望专注于内容的协作, 所以我使用`bash`改写了启动脚本:\n\n```bash\n#!/usr/bin/env bash\n\nusage()\n{\n\tprintf \"\nUsage\n\n  start [options]\n\nOptions\n\n[-k|--kill] 杀死jekyll进程\n\n[-j|--jekyll] 启动jekyll进程\n\n[-h|--help] 显示帮助\n\n[-g|--gulp] gulp的方式运行\n\t\n\"\n}\n\nkill_jekyll_service(){\n  ps -ef | grep jekyll | grep -v grep | awk '{print $2}' | xargs kill -9\n}\n\nstart_jekyll_service(){\n  jekyll server >output.log 2>&1 &\n}\n\ngulp_start(){\n  gulp start\n}\n\nwhile true; do\n  case \"$1\" in\n\n    (-k|--kill)\n\t    kill_jekyll_service\n      exit 0\n\t    ;;\n\n    (-j|--jekyll)\n      kill_jekyll_service\n      start_jekyll_service\n      exit 0\n      ;;\n\n    (-h|--help)\n      usage\n      exit 0\n      ;;\n\n    (-g|--gulp)\n      gulp_start\n      exit 0\n      ;;\n\n    (*)\n      usage\n      exit 1\n      ;;\n\n  esac\ndone\n```\n\n","slug":"blog/2016-07-11-how-to-manager-blog-start","date":"2025-03-22T11:29:07.424Z","updated":"2025-03-22T11:29:07.424Z","comments":1,"photos":[],"_id":"cm8k4mbdo0006q69d6z2bdufi","content":"<p>我的博客主要是采用<code>jekyll</code>作为后台进行<code>markdown</code>文法的文章渲染,但是我在使用过程中发现主要有两种使用场景:</p>\n<ul>\n<li>对博客主题进行修改 – 往往需要调节<code>css</code>和<code>js</code>等跟博客文章无关的东西, 需要一个可以即时预览的功能</li>\n<li>纯粹写文章, 不想被其他因素打扰, 不涉及美化工作, 文法基本已经记住,不需要实时预览,但是需要刷新页面就能看效果</li>\n</ul>\n<h2 id=\"实时预览功能\"><a href=\"#实时预览功能\" class=\"headerlink\" title=\"实时预览功能\"></a>实时预览功能</h2><p>这个实时预览功能, 最直接的就是修改文章样式后, 浏览器(可能还有我的手机平板)上的网页内容需要跟着刷新.而且同时<br>我的博客中样式的编写都是<code>scss</code>的,所以需要有个实时的编译器,观察到我的样式改变后,立刻生成对应的<code>css</code>文件,并且通知<br><code>jekyll</code>服务刷新头文件,最后通知浏览器刷新页面.</p>\n<h3 id=\"前端自动化\"><a href=\"#前端自动化\" class=\"headerlink\" title=\"前端自动化\"></a>前端自动化</h3><p>考虑到博客也算是一个弱化的前端工程,尝试过<a href=\"http://compass-style.org/\"><code>compass</code></a>、<br><a href=\"http://koala-app.com/\"><code>kola</code></a>,觉得限制实在太多,<br>所以干脆从头开始使用纯前端自动化工具<a href=\"http://www.gulpjs.com.cn/\"><code>gulp</code></a>管理博客.</p>\n<h3 id=\"一些经验\"><a href=\"#一些经验\" class=\"headerlink\" title=\"一些经验\"></a>一些经验</h3><p><code>gulp</code>这个东西给我的感觉有点像<code>unix</code>的味道, 不过不管她多么好用,依然离不开<a href=\"https://nodejs.org/zh-cn/\"><code>nodejs</code></a>,<br><a href=\"https://www.npmjs.com/\"><code>npm</code></a>,我这里就不赘述. 以下是我的一些<code>gulp</code>任务书写经验</p>\n<ul>\n<li><code>gulpfile.js</code>其实可以是一个文件夹, <code>gulp</code>的运行非常聪明, 她可以以文件夹下的index.js作为入口文件</li>\n<li>整个工程中,只有<code>gulp</code>的脚本是属于<code>nodejs</code>, 所以<code>.jshintrc</code>文件建议在<code>gulpfile.js</code>单独弄一个</li>\n<li>使用<a href=\"https://github.com/aseemk/requireDir\"><code>require-dir</code></a>插件可以遍历一个文件夹下所有的<code>javascript</code>文件,懒人必备</li>\n<li><code>config.json</code>作为配置文件的方式太low了, 一律使用<code>config.js</code>+ <code>module.exports</code>的方式替代,美真的不是一点点</li>\n</ul>\n<h3 id=\"Sass的编译\"><a href=\"#Sass的编译\" class=\"headerlink\" title=\"Sass的编译\"></a>Sass的编译</h3><blockquote>\n<p>talk’s cheap, show u the code.</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// gulpfile.js/tasks/css.js 定义编译的任务</span></span><br><span class=\"line\">gulp.<span class=\"title function_\">task</span>(<span class=\"string\">&#x27;css&#x27;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    gulp.<span class=\"title function_\">src</span>(config.<span class=\"property\">src</span>.<span class=\"property\">scss</span> + <span class=\"string\">&#x27;/**/*.?(s)css&#x27;</span>)</span><br><span class=\"line\">        .<span class=\"title function_\">pipe</span>($.<span class=\"title function_\">sass</span>())</span><br><span class=\"line\">        .<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;error&#x27;</span>, <span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        \t<span class=\"comment\">// 这里捕获异常, 只是打印错误日志, 不会终止css任务</span></span><br><span class=\"line\">            $.util.<span class=\"title function_\">log</span>(err);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .<span class=\"title function_\">pipe</span>($.<span class=\"title function_\">concat</span>(<span class=\"string\">&#x27;style.css&#x27;</span>))</span><br><span class=\"line\">        .<span class=\"title function_\">pipe</span>(gulp.<span class=\"title function_\">dest</span>(config.<span class=\"property\">src</span>.<span class=\"property\">css</span>));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// gulpfile.js/tasks/watch.js 定义watch任务, 当有css文件更新就触发编译任务</span></span><br><span class=\"line\">gulp.<span class=\"title function_\">task</span>(<span class=\"string\">&#x27;watch:css&#x27;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    gulp.<span class=\"title function_\">watch</span>(config.<span class=\"property\">src</span>.<span class=\"property\">scss</span> + <span class=\"string\">&#x27;**/*.?(s)css&#x27;</span>, [<span class=\"string\">&#x27;css&#x27;</span>]);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Jekyll编译服务\"><a href=\"#Jekyll编译服务\" class=\"headerlink\" title=\"Jekyll编译服务\"></a>Jekyll编译服务</h3><p>因为<code>jekyll</code>是使用<code>ruby</code>语言开发的一个小的服务器,所以需要使用<code>nodejs</code>提供的<code>chind.spawn</code>的方式来多进程运行:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// gulpfile.js/tasks/jekyll.js 使用child.spawn来完成jekyll进程的启动</span></span><br><span class=\"line\">gulp.<span class=\"title function_\">task</span>(<span class=\"string\">&#x27;jekyll&#x27;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> jekyll_exe = process.<span class=\"property\">platform</span> === <span class=\"string\">&quot;win32&quot;</span> ? <span class=\"string\">&quot;jekyll.bat&quot;</span> : <span class=\"string\">&quot;jekyll&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> jekyll = child.<span class=\"title function_\">spawn</span>(jekyll_exe, [<span class=\"string\">&#x27;build&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;--incremental&#x27;</span>, <span class=\"comment\">// 当文章非常多的时候开启, 文章少的时候貌似不开效果更好</span></span><br><span class=\"line\">        <span class=\"string\">&#x27;--watch&#x27;</span></span><br><span class=\"line\">    ]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> <span class=\"title function_\">jekyllLogger</span> = (<span class=\"params\">buffer</span>) =&gt; &#123;</span><br><span class=\"line\">        buffer.<span class=\"title function_\">toString</span>()</span><br><span class=\"line\">            .<span class=\"title function_\">split</span>(<span class=\"regexp\">/\\n/</span>)</span><br><span class=\"line\">            .<span class=\"title function_\">forEach</span>(<span class=\"function\">(<span class=\"params\">message</span>) =&gt;</span> $.util.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;Jekyll: &#x27;</span> + message));</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    jekyll.<span class=\"property\">stdout</span>.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;data&#x27;</span>, jekyllLogger);</span><br><span class=\"line\">    jekyll.<span class=\"property\">stderr</span>.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;data&#x27;</span>, jekyllLogger);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"同步刷新浏览器\"><a href=\"#同步刷新浏览器\" class=\"headerlink\" title=\"同步刷新浏览器\"></a>同步刷新浏览器</h3><p>这里要介绍下一个很好玩的插件<a href=\"https://www.browsersync.io/\"><code>browserSync</code></a>, 我的理解是她代理了一部分的http服务,<br>所以访问网站的同时,其实是她在页面的投入加入了一些东西, 所以她可以远程触发浏览器重新请求网页, 配置如下:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> browserSync = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;browser-sync&#x27;</span>).<span class=\"title function_\">create</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">gulp.<span class=\"title function_\">task</span>(<span class=\"string\">&#x27;server&#x27;</span>, [<span class=\"string\">&#x27;css&#x27;</span>], <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t$.util.<span class=\"title function_\">log</span>(config.<span class=\"property\">site</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    browserSync.<span class=\"title function_\">init</span>(&#123;</span><br><span class=\"line\">        <span class=\"attr\">files</span>: [config.<span class=\"property\">site</span>.<span class=\"property\">root</span> + <span class=\"string\">&#x27;/**&#x27;</span>],</span><br><span class=\"line\">        <span class=\"attr\">port</span>: <span class=\"number\">3131</span>,</span><br><span class=\"line\">        <span class=\"attr\">server</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">baseDir</span>: config.<span class=\"property\">site</span>.<span class=\"property\">root</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">   </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"汇总gulp任务\"><a href=\"#汇总gulp任务\" class=\"headerlink\" title=\"汇总gulp任务\"></a>汇总gulp任务</h3><p>到这里, 基本上稍微串一串几个任务就可以实现第一个需求了: <code>gulp.task(&#39;start&#39;, [&#39;jekyll&#39;,&#39;server&#39;, &#39;watch&#39;]);</code></p>\n<h3 id=\"纯粹写代码\"><a href=\"#纯粹写代码\" class=\"headerlink\" title=\"纯粹写代码\"></a>纯粹写代码</h3><p>由于我之前博客是使用<code>gulp</code>来进行管理, 这种方式肯定是希望控制台回显更多的错误日志才好,但是如果是平时的使用,我更希望专注于内容的协作, 所以我使用<code>bash</code>改写了启动脚本:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/usr/bin/env bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">usage</span></span>()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span> <span class=\"string\">&quot;</span></span><br><span class=\"line\"><span class=\"string\">Usage</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  start [options]</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Options</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">[-k|--kill] 杀死jekyll进程</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">[-j|--jekyll] 启动jekyll进程</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">[-h|--help] 显示帮助</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">[-g|--gulp] gulp的方式运行</span></span><br><span class=\"line\"><span class=\"string\">\t</span></span><br><span class=\"line\"><span class=\"string\">&quot;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">kill_jekyll_service</span></span>()&#123;</span><br><span class=\"line\">  ps -ef | grep jekyll | grep -v grep | awk <span class=\"string\">&#x27;&#123;print $2&#125;&#x27;</span> | xargs <span class=\"built_in\">kill</span> -9</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">start_jekyll_service</span></span>()&#123;</span><br><span class=\"line\">  jekyll server &gt;output.log 2&gt;&amp;1 &amp;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">gulp_start</span></span>()&#123;</span><br><span class=\"line\">  gulp start</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> <span class=\"literal\">true</span>; <span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"keyword\">case</span> <span class=\"string\">&quot;<span class=\"variable\">$1</span>&quot;</span> <span class=\"keyword\">in</span></span><br><span class=\"line\"></span><br><span class=\"line\">    (-k|--<span class=\"built_in\">kill</span>)</span><br><span class=\"line\">\t    kill_jekyll_service</span><br><span class=\"line\">      <span class=\"built_in\">exit</span> 0</span><br><span class=\"line\">\t    ;;</span><br><span class=\"line\"></span><br><span class=\"line\">    (-j|--jekyll)</span><br><span class=\"line\">      kill_jekyll_service</span><br><span class=\"line\">      start_jekyll_service</span><br><span class=\"line\">      <span class=\"built_in\">exit</span> 0</span><br><span class=\"line\">      ;;</span><br><span class=\"line\"></span><br><span class=\"line\">    (-h|--<span class=\"built_in\">help</span>)</span><br><span class=\"line\">      usage</span><br><span class=\"line\">      <span class=\"built_in\">exit</span> 0</span><br><span class=\"line\">      ;;</span><br><span class=\"line\"></span><br><span class=\"line\">    (-g|--gulp)</span><br><span class=\"line\">      gulp_start</span><br><span class=\"line\">      <span class=\"built_in\">exit</span> 0</span><br><span class=\"line\">      ;;</span><br><span class=\"line\"></span><br><span class=\"line\">    (*)</span><br><span class=\"line\">      usage</span><br><span class=\"line\">      <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">      ;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">esac</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n\n","excerpt":"","more":"<p>我的博客主要是采用<code>jekyll</code>作为后台进行<code>markdown</code>文法的文章渲染,但是我在使用过程中发现主要有两种使用场景:</p>\n<ul>\n<li>对博客主题进行修改 – 往往需要调节<code>css</code>和<code>js</code>等跟博客文章无关的东西, 需要一个可以即时预览的功能</li>\n<li>纯粹写文章, 不想被其他因素打扰, 不涉及美化工作, 文法基本已经记住,不需要实时预览,但是需要刷新页面就能看效果</li>\n</ul>\n<h2 id=\"实时预览功能\"><a href=\"#实时预览功能\" class=\"headerlink\" title=\"实时预览功能\"></a>实时预览功能</h2><p>这个实时预览功能, 最直接的就是修改文章样式后, 浏览器(可能还有我的手机平板)上的网页内容需要跟着刷新.而且同时<br>我的博客中样式的编写都是<code>scss</code>的,所以需要有个实时的编译器,观察到我的样式改变后,立刻生成对应的<code>css</code>文件,并且通知<br><code>jekyll</code>服务刷新头文件,最后通知浏览器刷新页面.</p>\n<h3 id=\"前端自动化\"><a href=\"#前端自动化\" class=\"headerlink\" title=\"前端自动化\"></a>前端自动化</h3><p>考虑到博客也算是一个弱化的前端工程,尝试过<a href=\"http://compass-style.org/\"><code>compass</code></a>、<br><a href=\"http://koala-app.com/\"><code>kola</code></a>,觉得限制实在太多,<br>所以干脆从头开始使用纯前端自动化工具<a href=\"http://www.gulpjs.com.cn/\"><code>gulp</code></a>管理博客.</p>\n<h3 id=\"一些经验\"><a href=\"#一些经验\" class=\"headerlink\" title=\"一些经验\"></a>一些经验</h3><p><code>gulp</code>这个东西给我的感觉有点像<code>unix</code>的味道, 不过不管她多么好用,依然离不开<a href=\"https://nodejs.org/zh-cn/\"><code>nodejs</code></a>,<br><a href=\"https://www.npmjs.com/\"><code>npm</code></a>,我这里就不赘述. 以下是我的一些<code>gulp</code>任务书写经验</p>\n<ul>\n<li><code>gulpfile.js</code>其实可以是一个文件夹, <code>gulp</code>的运行非常聪明, 她可以以文件夹下的index.js作为入口文件</li>\n<li>整个工程中,只有<code>gulp</code>的脚本是属于<code>nodejs</code>, 所以<code>.jshintrc</code>文件建议在<code>gulpfile.js</code>单独弄一个</li>\n<li>使用<a href=\"https://github.com/aseemk/requireDir\"><code>require-dir</code></a>插件可以遍历一个文件夹下所有的<code>javascript</code>文件,懒人必备</li>\n<li><code>config.json</code>作为配置文件的方式太low了, 一律使用<code>config.js</code>+ <code>module.exports</code>的方式替代,美真的不是一点点</li>\n</ul>\n<h3 id=\"Sass的编译\"><a href=\"#Sass的编译\" class=\"headerlink\" title=\"Sass的编译\"></a>Sass的编译</h3><blockquote>\n<p>talk’s cheap, show u the code.</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// gulpfile.js/tasks/css.js 定义编译的任务</span></span><br><span class=\"line\">gulp.<span class=\"title function_\">task</span>(<span class=\"string\">&#x27;css&#x27;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    gulp.<span class=\"title function_\">src</span>(config.<span class=\"property\">src</span>.<span class=\"property\">scss</span> + <span class=\"string\">&#x27;/**/*.?(s)css&#x27;</span>)</span><br><span class=\"line\">        .<span class=\"title function_\">pipe</span>($.<span class=\"title function_\">sass</span>())</span><br><span class=\"line\">        .<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;error&#x27;</span>, <span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        \t<span class=\"comment\">// 这里捕获异常, 只是打印错误日志, 不会终止css任务</span></span><br><span class=\"line\">            $.util.<span class=\"title function_\">log</span>(err);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .<span class=\"title function_\">pipe</span>($.<span class=\"title function_\">concat</span>(<span class=\"string\">&#x27;style.css&#x27;</span>))</span><br><span class=\"line\">        .<span class=\"title function_\">pipe</span>(gulp.<span class=\"title function_\">dest</span>(config.<span class=\"property\">src</span>.<span class=\"property\">css</span>));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// gulpfile.js/tasks/watch.js 定义watch任务, 当有css文件更新就触发编译任务</span></span><br><span class=\"line\">gulp.<span class=\"title function_\">task</span>(<span class=\"string\">&#x27;watch:css&#x27;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    gulp.<span class=\"title function_\">watch</span>(config.<span class=\"property\">src</span>.<span class=\"property\">scss</span> + <span class=\"string\">&#x27;**/*.?(s)css&#x27;</span>, [<span class=\"string\">&#x27;css&#x27;</span>]);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Jekyll编译服务\"><a href=\"#Jekyll编译服务\" class=\"headerlink\" title=\"Jekyll编译服务\"></a>Jekyll编译服务</h3><p>因为<code>jekyll</code>是使用<code>ruby</code>语言开发的一个小的服务器,所以需要使用<code>nodejs</code>提供的<code>chind.spawn</code>的方式来多进程运行:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// gulpfile.js/tasks/jekyll.js 使用child.spawn来完成jekyll进程的启动</span></span><br><span class=\"line\">gulp.<span class=\"title function_\">task</span>(<span class=\"string\">&#x27;jekyll&#x27;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> jekyll_exe = process.<span class=\"property\">platform</span> === <span class=\"string\">&quot;win32&quot;</span> ? <span class=\"string\">&quot;jekyll.bat&quot;</span> : <span class=\"string\">&quot;jekyll&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> jekyll = child.<span class=\"title function_\">spawn</span>(jekyll_exe, [<span class=\"string\">&#x27;build&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;--incremental&#x27;</span>, <span class=\"comment\">// 当文章非常多的时候开启, 文章少的时候貌似不开效果更好</span></span><br><span class=\"line\">        <span class=\"string\">&#x27;--watch&#x27;</span></span><br><span class=\"line\">    ]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> <span class=\"title function_\">jekyllLogger</span> = (<span class=\"params\">buffer</span>) =&gt; &#123;</span><br><span class=\"line\">        buffer.<span class=\"title function_\">toString</span>()</span><br><span class=\"line\">            .<span class=\"title function_\">split</span>(<span class=\"regexp\">/\\n/</span>)</span><br><span class=\"line\">            .<span class=\"title function_\">forEach</span>(<span class=\"function\">(<span class=\"params\">message</span>) =&gt;</span> $.util.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;Jekyll: &#x27;</span> + message));</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    jekyll.<span class=\"property\">stdout</span>.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;data&#x27;</span>, jekyllLogger);</span><br><span class=\"line\">    jekyll.<span class=\"property\">stderr</span>.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;data&#x27;</span>, jekyllLogger);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"同步刷新浏览器\"><a href=\"#同步刷新浏览器\" class=\"headerlink\" title=\"同步刷新浏览器\"></a>同步刷新浏览器</h3><p>这里要介绍下一个很好玩的插件<a href=\"https://www.browsersync.io/\"><code>browserSync</code></a>, 我的理解是她代理了一部分的http服务,<br>所以访问网站的同时,其实是她在页面的投入加入了一些东西, 所以她可以远程触发浏览器重新请求网页, 配置如下:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> browserSync = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;browser-sync&#x27;</span>).<span class=\"title function_\">create</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">gulp.<span class=\"title function_\">task</span>(<span class=\"string\">&#x27;server&#x27;</span>, [<span class=\"string\">&#x27;css&#x27;</span>], <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t$.util.<span class=\"title function_\">log</span>(config.<span class=\"property\">site</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    browserSync.<span class=\"title function_\">init</span>(&#123;</span><br><span class=\"line\">        <span class=\"attr\">files</span>: [config.<span class=\"property\">site</span>.<span class=\"property\">root</span> + <span class=\"string\">&#x27;/**&#x27;</span>],</span><br><span class=\"line\">        <span class=\"attr\">port</span>: <span class=\"number\">3131</span>,</span><br><span class=\"line\">        <span class=\"attr\">server</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">baseDir</span>: config.<span class=\"property\">site</span>.<span class=\"property\">root</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">   </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"汇总gulp任务\"><a href=\"#汇总gulp任务\" class=\"headerlink\" title=\"汇总gulp任务\"></a>汇总gulp任务</h3><p>到这里, 基本上稍微串一串几个任务就可以实现第一个需求了: <code>gulp.task(&#39;start&#39;, [&#39;jekyll&#39;,&#39;server&#39;, &#39;watch&#39;]);</code></p>\n<h3 id=\"纯粹写代码\"><a href=\"#纯粹写代码\" class=\"headerlink\" title=\"纯粹写代码\"></a>纯粹写代码</h3><p>由于我之前博客是使用<code>gulp</code>来进行管理, 这种方式肯定是希望控制台回显更多的错误日志才好,但是如果是平时的使用,我更希望专注于内容的协作, 所以我使用<code>bash</code>改写了启动脚本:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/usr/bin/env bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">usage</span></span>()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span> <span class=\"string\">&quot;</span></span><br><span class=\"line\"><span class=\"string\">Usage</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  start [options]</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Options</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">[-k|--kill] 杀死jekyll进程</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">[-j|--jekyll] 启动jekyll进程</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">[-h|--help] 显示帮助</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">[-g|--gulp] gulp的方式运行</span></span><br><span class=\"line\"><span class=\"string\">\t</span></span><br><span class=\"line\"><span class=\"string\">&quot;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">kill_jekyll_service</span></span>()&#123;</span><br><span class=\"line\">  ps -ef | grep jekyll | grep -v grep | awk <span class=\"string\">&#x27;&#123;print $2&#125;&#x27;</span> | xargs <span class=\"built_in\">kill</span> -9</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">start_jekyll_service</span></span>()&#123;</span><br><span class=\"line\">  jekyll server &gt;output.log 2&gt;&amp;1 &amp;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">gulp_start</span></span>()&#123;</span><br><span class=\"line\">  gulp start</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> <span class=\"literal\">true</span>; <span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"keyword\">case</span> <span class=\"string\">&quot;<span class=\"variable\">$1</span>&quot;</span> <span class=\"keyword\">in</span></span><br><span class=\"line\"></span><br><span class=\"line\">    (-k|--<span class=\"built_in\">kill</span>)</span><br><span class=\"line\">\t    kill_jekyll_service</span><br><span class=\"line\">      <span class=\"built_in\">exit</span> 0</span><br><span class=\"line\">\t    ;;</span><br><span class=\"line\"></span><br><span class=\"line\">    (-j|--jekyll)</span><br><span class=\"line\">      kill_jekyll_service</span><br><span class=\"line\">      start_jekyll_service</span><br><span class=\"line\">      <span class=\"built_in\">exit</span> 0</span><br><span class=\"line\">      ;;</span><br><span class=\"line\"></span><br><span class=\"line\">    (-h|--<span class=\"built_in\">help</span>)</span><br><span class=\"line\">      usage</span><br><span class=\"line\">      <span class=\"built_in\">exit</span> 0</span><br><span class=\"line\">      ;;</span><br><span class=\"line\"></span><br><span class=\"line\">    (-g|--gulp)</span><br><span class=\"line\">      gulp_start</span><br><span class=\"line\">      <span class=\"built_in\">exit</span> 0</span><br><span class=\"line\">      ;;</span><br><span class=\"line\"></span><br><span class=\"line\">    (*)</span><br><span class=\"line\">      usage</span><br><span class=\"line\">      <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">      ;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">esac</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n\n"},{"layout":"post","title":"怎样加速你的博客","published":1,"_content":"\n## 背景\n\n众所周知,墙内的生活是拮据的,国内访问github速度一直都非常缓慢,如果你跟我一样选择github的pages服务的话应该会碰到跟我一样的烦恼;\n\n- 国内访问速度巨慢, 但是国外的github服务非常稳定, 而且免费\n- 国内有替代品`coding.net`(gitcafe是他的前身), 但是全部放到上面不太放心\n\n搜索了一下, 发现有人已经想到了解决的办法, 这里只是做一些简单的说明\n\n## 原理\n\n如今的域名解析已经非常多样了, 除了普通意义的顶级域名(.com)的根域名解析, 想godday这样的大厂还会把域名映射功能\"外包\"出去,即允许\n第三方的域名服务提供商来提供这部分域名的解析功能, 而国内的`dnspod`就是这样一个存在, 它虽然不具备顶级域名的发放功能,但是实际上\n他是具有这样的能力(生得太晚了), 而且它的功能做的已经比godday还要好, 它可以针对线路的类型来分流;\n\n如果是`godday`+`dnspod`这样的组合,我们访问我们域名的整个过程就变成了 浏览器请求 -> 根域名服务解析 -> 一级域名解析 \n-> DNSPod根据请求的发起线路选择服务节点 -> 最终的服务提供 -> 相应请求\n\n## 我对CNAME的理解\n\n我觉得博客中的`CNAME`文件在`github`中会起到一个跳转作用, 但是不论是`github`还是`coding.net`, 其实C`NAME`文件只是为了\n让他们的服务器面授`DDOS`攻击,对于博客作者和博客观众没有任何作用.\n\nDNS记录中配置的`CNAME`是有用处的,它允许你使用域名的方式制定私服节点(运行博客的服务器);\n\n## 具体配置\n\n1. 到[`dnspod`](https://www.dnspod.cn/)注册个号, 然后进入控制台准备配置;\n2. 找到***域名解析***然后***添加域名***,这里基本都是傻瓜式;\n3. 添加三条记录, 根据线路类型做分流的两条记录以及一条默认线路:\n\n\t编号\t|主机记录\t|记录类型\t|线路类型\t| 记录值\n\t1\t|@ \t\t|CNAME\t|默认 \t| aiziyuer.github.io\n\t2\t|@ \t\t|CNAME \t|国内 \t| aiziyuer.coding.me\n\t3\t|@\t\t|CNAME \t|国外 \t| aiziyuer.github.io\n\n4. 需要设置`godday`使用`dnspod`来做`nameservice`;\n\tgodday 的DNS Manager -> Nameservers 选择自定义 -> 添加两条`f1g1ns1.dnspod.net`、`f1g1ns2.dnspod.net`\n\t-> 保存然后等待修改生效","source":"_posts/blog/2016-07-14-how-to-accelerate-your-blog.markdown","raw":"---\nlayout: post\ntitle: 怎样加速你的博客\ncategories: [博客]\ntags: [技术]\npublished: true\n---\n\n## 背景\n\n众所周知,墙内的生活是拮据的,国内访问github速度一直都非常缓慢,如果你跟我一样选择github的pages服务的话应该会碰到跟我一样的烦恼;\n\n- 国内访问速度巨慢, 但是国外的github服务非常稳定, 而且免费\n- 国内有替代品`coding.net`(gitcafe是他的前身), 但是全部放到上面不太放心\n\n搜索了一下, 发现有人已经想到了解决的办法, 这里只是做一些简单的说明\n\n## 原理\n\n如今的域名解析已经非常多样了, 除了普通意义的顶级域名(.com)的根域名解析, 想godday这样的大厂还会把域名映射功能\"外包\"出去,即允许\n第三方的域名服务提供商来提供这部分域名的解析功能, 而国内的`dnspod`就是这样一个存在, 它虽然不具备顶级域名的发放功能,但是实际上\n他是具有这样的能力(生得太晚了), 而且它的功能做的已经比godday还要好, 它可以针对线路的类型来分流;\n\n如果是`godday`+`dnspod`这样的组合,我们访问我们域名的整个过程就变成了 浏览器请求 -> 根域名服务解析 -> 一级域名解析 \n-> DNSPod根据请求的发起线路选择服务节点 -> 最终的服务提供 -> 相应请求\n\n## 我对CNAME的理解\n\n我觉得博客中的`CNAME`文件在`github`中会起到一个跳转作用, 但是不论是`github`还是`coding.net`, 其实C`NAME`文件只是为了\n让他们的服务器面授`DDOS`攻击,对于博客作者和博客观众没有任何作用.\n\nDNS记录中配置的`CNAME`是有用处的,它允许你使用域名的方式制定私服节点(运行博客的服务器);\n\n## 具体配置\n\n1. 到[`dnspod`](https://www.dnspod.cn/)注册个号, 然后进入控制台准备配置;\n2. 找到***域名解析***然后***添加域名***,这里基本都是傻瓜式;\n3. 添加三条记录, 根据线路类型做分流的两条记录以及一条默认线路:\n\n\t编号\t|主机记录\t|记录类型\t|线路类型\t| 记录值\n\t1\t|@ \t\t|CNAME\t|默认 \t| aiziyuer.github.io\n\t2\t|@ \t\t|CNAME \t|国内 \t| aiziyuer.coding.me\n\t3\t|@\t\t|CNAME \t|国外 \t| aiziyuer.github.io\n\n4. 需要设置`godday`使用`dnspod`来做`nameservice`;\n\tgodday 的DNS Manager -> Nameservers 选择自定义 -> 添加两条`f1g1ns1.dnspod.net`、`f1g1ns2.dnspod.net`\n\t-> 保存然后等待修改生效","slug":"blog/2016-07-14-how-to-accelerate-your-blog","date":"2025-03-22T11:29:07.424Z","updated":"2025-03-22T11:29:07.424Z","comments":1,"photos":[],"_id":"cm8k4mbdp0007q69d92wl00w8","content":"<h2 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h2><p>众所周知,墙内的生活是拮据的,国内访问github速度一直都非常缓慢,如果你跟我一样选择github的pages服务的话应该会碰到跟我一样的烦恼;</p>\n<ul>\n<li>国内访问速度巨慢, 但是国外的github服务非常稳定, 而且免费</li>\n<li>国内有替代品<code>coding.net</code>(gitcafe是他的前身), 但是全部放到上面不太放心</li>\n</ul>\n<p>搜索了一下, 发现有人已经想到了解决的办法, 这里只是做一些简单的说明</p>\n<h2 id=\"原理\"><a href=\"#原理\" class=\"headerlink\" title=\"原理\"></a>原理</h2><p>如今的域名解析已经非常多样了, 除了普通意义的顶级域名(.com)的根域名解析, 想godday这样的大厂还会把域名映射功能”外包”出去,即允许<br>第三方的域名服务提供商来提供这部分域名的解析功能, 而国内的<code>dnspod</code>就是这样一个存在, 它虽然不具备顶级域名的发放功能,但是实际上<br>他是具有这样的能力(生得太晚了), 而且它的功能做的已经比godday还要好, 它可以针对线路的类型来分流;</p>\n<p>如果是<code>godday</code>+<code>dnspod</code>这样的组合,我们访问我们域名的整个过程就变成了 浏览器请求 -&gt; 根域名服务解析 -&gt; 一级域名解析<br>-&gt; DNSPod根据请求的发起线路选择服务节点 -&gt; 最终的服务提供 -&gt; 相应请求</p>\n<h2 id=\"我对CNAME的理解\"><a href=\"#我对CNAME的理解\" class=\"headerlink\" title=\"我对CNAME的理解\"></a>我对CNAME的理解</h2><p>我觉得博客中的<code>CNAME</code>文件在<code>github</code>中会起到一个跳转作用, 但是不论是<code>github</code>还是<code>coding.net</code>, 其实C<code>NAME</code>文件只是为了<br>让他们的服务器面授<code>DDOS</code>攻击,对于博客作者和博客观众没有任何作用.</p>\n<p>DNS记录中配置的<code>CNAME</code>是有用处的,它允许你使用域名的方式制定私服节点(运行博客的服务器);</p>\n<h2 id=\"具体配置\"><a href=\"#具体配置\" class=\"headerlink\" title=\"具体配置\"></a>具体配置</h2><ol>\n<li><p>到<a href=\"https://www.dnspod.cn/\"><code>dnspod</code></a>注册个号, 然后进入控制台准备配置;</p>\n</li>\n<li><p>找到<em><strong>域名解析</strong></em>然后<em><strong>添加域名</strong></em>,这里基本都是傻瓜式;</p>\n</li>\n<li><p>添加三条记录, 根据线路类型做分流的两条记录以及一条默认线路:</p>\n<p> 编号    |主机记录    |记录类型    |线路类型    | 记录值<br> 1    |@         |CNAME    |默认     | aiziyuer.github.io<br> 2    |@         |CNAME     |国内     | aiziyuer.coding.me<br> 3    |@        |CNAME     |国外     | aiziyuer.github.io</p>\n</li>\n<li><p>需要设置<code>godday</code>使用<code>dnspod</code>来做<code>nameservice</code>;<br> godday 的DNS Manager -&gt; Nameservers 选择自定义 -&gt; 添加两条<code>f1g1ns1.dnspod.net</code>、<code>f1g1ns2.dnspod.net</code><br> -&gt; 保存然后等待修改生效</p>\n</li>\n</ol>\n","excerpt":"","more":"<h2 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h2><p>众所周知,墙内的生活是拮据的,国内访问github速度一直都非常缓慢,如果你跟我一样选择github的pages服务的话应该会碰到跟我一样的烦恼;</p>\n<ul>\n<li>国内访问速度巨慢, 但是国外的github服务非常稳定, 而且免费</li>\n<li>国内有替代品<code>coding.net</code>(gitcafe是他的前身), 但是全部放到上面不太放心</li>\n</ul>\n<p>搜索了一下, 发现有人已经想到了解决的办法, 这里只是做一些简单的说明</p>\n<h2 id=\"原理\"><a href=\"#原理\" class=\"headerlink\" title=\"原理\"></a>原理</h2><p>如今的域名解析已经非常多样了, 除了普通意义的顶级域名(.com)的根域名解析, 想godday这样的大厂还会把域名映射功能”外包”出去,即允许<br>第三方的域名服务提供商来提供这部分域名的解析功能, 而国内的<code>dnspod</code>就是这样一个存在, 它虽然不具备顶级域名的发放功能,但是实际上<br>他是具有这样的能力(生得太晚了), 而且它的功能做的已经比godday还要好, 它可以针对线路的类型来分流;</p>\n<p>如果是<code>godday</code>+<code>dnspod</code>这样的组合,我们访问我们域名的整个过程就变成了 浏览器请求 -&gt; 根域名服务解析 -&gt; 一级域名解析<br>-&gt; DNSPod根据请求的发起线路选择服务节点 -&gt; 最终的服务提供 -&gt; 相应请求</p>\n<h2 id=\"我对CNAME的理解\"><a href=\"#我对CNAME的理解\" class=\"headerlink\" title=\"我对CNAME的理解\"></a>我对CNAME的理解</h2><p>我觉得博客中的<code>CNAME</code>文件在<code>github</code>中会起到一个跳转作用, 但是不论是<code>github</code>还是<code>coding.net</code>, 其实C<code>NAME</code>文件只是为了<br>让他们的服务器面授<code>DDOS</code>攻击,对于博客作者和博客观众没有任何作用.</p>\n<p>DNS记录中配置的<code>CNAME</code>是有用处的,它允许你使用域名的方式制定私服节点(运行博客的服务器);</p>\n<h2 id=\"具体配置\"><a href=\"#具体配置\" class=\"headerlink\" title=\"具体配置\"></a>具体配置</h2><ol>\n<li><p>到<a href=\"https://www.dnspod.cn/\"><code>dnspod</code></a>注册个号, 然后进入控制台准备配置;</p>\n</li>\n<li><p>找到<em><strong>域名解析</strong></em>然后<em><strong>添加域名</strong></em>,这里基本都是傻瓜式;</p>\n</li>\n<li><p>添加三条记录, 根据线路类型做分流的两条记录以及一条默认线路:</p>\n<p> 编号    |主机记录    |记录类型    |线路类型    | 记录值<br> 1    |@         |CNAME    |默认     | aiziyuer.github.io<br> 2    |@         |CNAME     |国内     | aiziyuer.coding.me<br> 3    |@        |CNAME     |国外     | aiziyuer.github.io</p>\n</li>\n<li><p>需要设置<code>godday</code>使用<code>dnspod</code>来做<code>nameservice</code>;<br> godday 的DNS Manager -&gt; Nameservers 选择自定义 -&gt; 添加两条<code>f1g1ns1.dnspod.net</code>、<code>f1g1ns2.dnspod.net</code><br> -&gt; 保存然后等待修改生效</p>\n</li>\n</ol>\n"},{"title":"怎样为你的博客增加评论功能","layout":"post","published":1,"_content":"\n\n看了那么多网上使用多说失败的帖子, 所以决定直接使用[`disqus`](https://disqus.com/)作为我的博客系统\n\n\n## 博客微调\n\n这个评论系统做的真的非常棒, 暂时还不了解它的工作原理, 不明白它怎么区分不同的文章的, 不管怎样,先布上去再说.\n\n### 页面修改\n\n我的博客比较简单, 因为我只想给每个`post`页面, 所以在post页面中多一个`include`文件`disqus`, 内容如下:\n\n``` html\n<!-- An element a visitor can click if they <3 comments! -->\n<div id=\"disqus_thread\" name=\"{{ site.disqus.shortname }}\">\n  <noscript>Please enable JavaScript to view the <a href=\"https://disqus.com/?ref_noscript\">comments powered by Disqus.</a></noscript>\n  <a href=\"http://disqus.com\" class=\"dsq-brlink\" target=\"_blank\">Loading Disqus comments...</a>\n</div>\n```\n\n这样每个页面在加完后都会多个div来表示需要拉取谁的评论信息, 我这里使用的jekyll博客, 所以这里的配置其实是来自`_config.yml`:\n\n``` yaml\n# ...\n\ndisqus:\n  shortname: aiziyuer\n\n# ...\n```\n\n### 脚本修改\n\n我这里使用的ajax的方式执行js, 详细如下:\n\n``` javascript\nvar ds_loaded = false;\nvar top = $('#disqus_thread').offset().top;\nwindow.disqus_shortname = $('#disqus_thread').attr('name');\n\nfunction check() {\nif ( !ds_loaded && container.scrollTop() + container.height() > top ) {\n  $.ajax({\n    type: 'GET',\n    url: '//' + disqus_shortname + '.disqus.com/embed.js',\n    dataType: 'script',\n    cache: true\n  });\n  ds_loaded = true;\n}\n}check();\ncontainer.scroll(check);\n```\n","source":"_posts/blog/2016-07-17-how-to-add-disqus.markdown","raw":"---\ntitle: 怎样为你的博客增加评论功能\nlayout: post\ncategories: [博客]\ntags: [技术]\npublished: true\n---\n\n\n看了那么多网上使用多说失败的帖子, 所以决定直接使用[`disqus`](https://disqus.com/)作为我的博客系统\n\n\n## 博客微调\n\n这个评论系统做的真的非常棒, 暂时还不了解它的工作原理, 不明白它怎么区分不同的文章的, 不管怎样,先布上去再说.\n\n### 页面修改\n\n我的博客比较简单, 因为我只想给每个`post`页面, 所以在post页面中多一个`include`文件`disqus`, 内容如下:\n\n``` html\n<!-- An element a visitor can click if they <3 comments! -->\n<div id=\"disqus_thread\" name=\"{{ site.disqus.shortname }}\">\n  <noscript>Please enable JavaScript to view the <a href=\"https://disqus.com/?ref_noscript\">comments powered by Disqus.</a></noscript>\n  <a href=\"http://disqus.com\" class=\"dsq-brlink\" target=\"_blank\">Loading Disqus comments...</a>\n</div>\n```\n\n这样每个页面在加完后都会多个div来表示需要拉取谁的评论信息, 我这里使用的jekyll博客, 所以这里的配置其实是来自`_config.yml`:\n\n``` yaml\n# ...\n\ndisqus:\n  shortname: aiziyuer\n\n# ...\n```\n\n### 脚本修改\n\n我这里使用的ajax的方式执行js, 详细如下:\n\n``` javascript\nvar ds_loaded = false;\nvar top = $('#disqus_thread').offset().top;\nwindow.disqus_shortname = $('#disqus_thread').attr('name');\n\nfunction check() {\nif ( !ds_loaded && container.scrollTop() + container.height() > top ) {\n  $.ajax({\n    type: 'GET',\n    url: '//' + disqus_shortname + '.disqus.com/embed.js',\n    dataType: 'script',\n    cache: true\n  });\n  ds_loaded = true;\n}\n}check();\ncontainer.scroll(check);\n```\n","slug":"blog/2016-07-17-how-to-add-disqus","date":"2025-03-22T11:29:07.425Z","updated":"2025-03-22T11:29:07.425Z","comments":1,"photos":[],"_id":"cm8k4mbdr000aq69d9wz57bg0","content":"<p>看了那么多网上使用多说失败的帖子, 所以决定直接使用<a href=\"https://disqus.com/\"><code>disqus</code></a>作为我的博客系统</p>\n<h2 id=\"博客微调\"><a href=\"#博客微调\" class=\"headerlink\" title=\"博客微调\"></a>博客微调</h2><p>这个评论系统做的真的非常棒, 暂时还不了解它的工作原理, 不明白它怎么区分不同的文章的, 不管怎样,先布上去再说.</p>\n<h3 id=\"页面修改\"><a href=\"#页面修改\" class=\"headerlink\" title=\"页面修改\"></a>页面修改</h3><p>我的博客比较简单, 因为我只想给每个<code>post</code>页面, 所以在post页面中多一个<code>include</code>文件<code>disqus</code>, 内容如下:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- An element a visitor can click if they &lt;3 comments! --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;disqus_thread&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&#123;&#123; site.disqus.shortname &#125;&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">noscript</span>&gt;</span>Please enable JavaScript to view the <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://disqus.com/?ref_noscript&quot;</span>&gt;</span>comments powered by Disqus.<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">noscript</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;http://disqus.com&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;dsq-brlink&quot;</span> <span class=\"attr\">target</span>=<span class=\"string\">&quot;_blank&quot;</span>&gt;</span>Loading Disqus comments...<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>这样每个页面在加完后都会多个div来表示需要拉取谁的评论信息, 我这里使用的jekyll博客, 所以这里的配置其实是来自<code>_config.yml</code>:</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ...</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">disqus:</span></span><br><span class=\"line\">  <span class=\"attr\">shortname:</span> <span class=\"string\">aiziyuer</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ...</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"脚本修改\"><a href=\"#脚本修改\" class=\"headerlink\" title=\"脚本修改\"></a>脚本修改</h3><p>我这里使用的ajax的方式执行js, 详细如下:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> ds_loaded = <span class=\"literal\">false</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> top = $(<span class=\"string\">&#x27;#disqus_thread&#x27;</span>).<span class=\"title function_\">offset</span>().<span class=\"property\">top</span>;</span><br><span class=\"line\"><span class=\"variable language_\">window</span>.<span class=\"property\">disqus_shortname</span> = $(<span class=\"string\">&#x27;#disqus_thread&#x27;</span>).<span class=\"title function_\">attr</span>(<span class=\"string\">&#x27;name&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">check</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\"><span class=\"keyword\">if</span> ( !ds_loaded &amp;&amp; container.<span class=\"title function_\">scrollTop</span>() + container.<span class=\"title function_\">height</span>() &gt; top ) &#123;</span><br><span class=\"line\">  $.<span class=\"title function_\">ajax</span>(&#123;</span><br><span class=\"line\">    <span class=\"attr\">type</span>: <span class=\"string\">&#x27;GET&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">url</span>: <span class=\"string\">&#x27;//&#x27;</span> + disqus_shortname + <span class=\"string\">&#x27;.disqus.com/embed.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">dataType</span>: <span class=\"string\">&#x27;script&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">cache</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  ds_loaded = <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;<span class=\"title function_\">check</span>();</span><br><span class=\"line\">container.<span class=\"title function_\">scroll</span>(check);</span><br></pre></td></tr></table></figure>\n","excerpt":"","more":"<p>看了那么多网上使用多说失败的帖子, 所以决定直接使用<a href=\"https://disqus.com/\"><code>disqus</code></a>作为我的博客系统</p>\n<h2 id=\"博客微调\"><a href=\"#博客微调\" class=\"headerlink\" title=\"博客微调\"></a>博客微调</h2><p>这个评论系统做的真的非常棒, 暂时还不了解它的工作原理, 不明白它怎么区分不同的文章的, 不管怎样,先布上去再说.</p>\n<h3 id=\"页面修改\"><a href=\"#页面修改\" class=\"headerlink\" title=\"页面修改\"></a>页面修改</h3><p>我的博客比较简单, 因为我只想给每个<code>post</code>页面, 所以在post页面中多一个<code>include</code>文件<code>disqus</code>, 内容如下:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- An element a visitor can click if they &lt;3 comments! --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;disqus_thread&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&#123;&#123; site.disqus.shortname &#125;&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">noscript</span>&gt;</span>Please enable JavaScript to view the <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://disqus.com/?ref_noscript&quot;</span>&gt;</span>comments powered by Disqus.<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">noscript</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;http://disqus.com&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;dsq-brlink&quot;</span> <span class=\"attr\">target</span>=<span class=\"string\">&quot;_blank&quot;</span>&gt;</span>Loading Disqus comments...<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>这样每个页面在加完后都会多个div来表示需要拉取谁的评论信息, 我这里使用的jekyll博客, 所以这里的配置其实是来自<code>_config.yml</code>:</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ...</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">disqus:</span></span><br><span class=\"line\">  <span class=\"attr\">shortname:</span> <span class=\"string\">aiziyuer</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ...</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"脚本修改\"><a href=\"#脚本修改\" class=\"headerlink\" title=\"脚本修改\"></a>脚本修改</h3><p>我这里使用的ajax的方式执行js, 详细如下:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> ds_loaded = <span class=\"literal\">false</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> top = $(<span class=\"string\">&#x27;#disqus_thread&#x27;</span>).<span class=\"title function_\">offset</span>().<span class=\"property\">top</span>;</span><br><span class=\"line\"><span class=\"variable language_\">window</span>.<span class=\"property\">disqus_shortname</span> = $(<span class=\"string\">&#x27;#disqus_thread&#x27;</span>).<span class=\"title function_\">attr</span>(<span class=\"string\">&#x27;name&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">check</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\"><span class=\"keyword\">if</span> ( !ds_loaded &amp;&amp; container.<span class=\"title function_\">scrollTop</span>() + container.<span class=\"title function_\">height</span>() &gt; top ) &#123;</span><br><span class=\"line\">  $.<span class=\"title function_\">ajax</span>(&#123;</span><br><span class=\"line\">    <span class=\"attr\">type</span>: <span class=\"string\">&#x27;GET&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">url</span>: <span class=\"string\">&#x27;//&#x27;</span> + disqus_shortname + <span class=\"string\">&#x27;.disqus.com/embed.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">dataType</span>: <span class=\"string\">&#x27;script&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">cache</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  ds_loaded = <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;<span class=\"title function_\">check</span>();</span><br><span class=\"line\">container.<span class=\"title function_\">scroll</span>(check);</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"2015阅读书单","keywords":["阅读","书单",2015],"_content":"\n\n## 学习正则表达式\n\n- status: 第一遍读完\n- author: 【美】Michael Fitzgerald (王热宇 译)\n- publisher: 人民邮电出版社\n- language: 中文\n- link: http://www.duokan.com/book/62686\n- cover: http://cover.read.duokan.com/mfsv2/download/s010/p01FsMcEwqgb/zlmp4cWu38g6tx.jpg!e\n- description: 整本书对正则的介绍还算详实,但是不能当做工具书,因为书中涉及了多门语言, perl, javascript, java, python等, 如果是想要当工具书, 推荐<<30分钟正则表达式入门>>\n\n## 30分钟入门正则表达式\n\n- status: 完成\n- author: 互联网\n- publisher: 互联网\n- language: 中文\n- link: http://hijiangtao.github.io/2014/06/29/StudyNodeofRE/\n- description: 非常棒的总结的书籍, 第一遍读一点都没有负担,在工作中边学边读,很多知识温故而知新,我已经通读了3遍了,但是每次用到的时候还会觉得有收获","source":"_posts/books/2015-03-30-book-list-of-2015.md","raw":"---\nlayout: post\ntitle: 2015阅读书单\ncategory: [读书]\nkeywords: [阅读,书单,2015]\n---\n\n\n## 学习正则表达式\n\n- status: 第一遍读完\n- author: 【美】Michael Fitzgerald (王热宇 译)\n- publisher: 人民邮电出版社\n- language: 中文\n- link: http://www.duokan.com/book/62686\n- cover: http://cover.read.duokan.com/mfsv2/download/s010/p01FsMcEwqgb/zlmp4cWu38g6tx.jpg!e\n- description: 整本书对正则的介绍还算详实,但是不能当做工具书,因为书中涉及了多门语言, perl, javascript, java, python等, 如果是想要当工具书, 推荐<<30分钟正则表达式入门>>\n\n## 30分钟入门正则表达式\n\n- status: 完成\n- author: 互联网\n- publisher: 互联网\n- language: 中文\n- link: http://hijiangtao.github.io/2014/06/29/StudyNodeofRE/\n- description: 非常棒的总结的书籍, 第一遍读一点都没有负担,在工作中边学边读,很多知识温故而知新,我已经通读了3遍了,但是每次用到的时候还会觉得有收获","slug":"books/2015-03-30-book-list-of-2015","published":1,"date":"2025-03-22T11:29:07.499Z","updated":"2025-03-22T11:29:07.499Z","comments":1,"photos":[],"_id":"cm8k4mbdt000bq69d2h13eyeh","content":"<h2 id=\"学习正则表达式\"><a href=\"#学习正则表达式\" class=\"headerlink\" title=\"学习正则表达式\"></a>学习正则表达式</h2><ul>\n<li>status: 第一遍读完</li>\n<li>author: 【美】Michael Fitzgerald (王热宇 译)</li>\n<li>publisher: 人民邮电出版社</li>\n<li>language: 中文</li>\n<li>link: <a href=\"http://www.duokan.com/book/62686\">http://www.duokan.com/book/62686</a></li>\n<li>cover: <a href=\"http://cover.read.duokan.com/mfsv2/download/s010/p01FsMcEwqgb/zlmp4cWu38g6tx.jpg!e\">http://cover.read.duokan.com/mfsv2/download/s010/p01FsMcEwqgb/zlmp4cWu38g6tx.jpg!e</a></li>\n<li>description: 整本书对正则的介绍还算详实,但是不能当做工具书,因为书中涉及了多门语言, perl, javascript, java, python等, 如果是想要当工具书, 推荐&lt;&lt;30分钟正则表达式入门&gt;&gt;</li>\n</ul>\n<h2 id=\"30分钟入门正则表达式\"><a href=\"#30分钟入门正则表达式\" class=\"headerlink\" title=\"30分钟入门正则表达式\"></a>30分钟入门正则表达式</h2><ul>\n<li>status: 完成</li>\n<li>author: 互联网</li>\n<li>publisher: 互联网</li>\n<li>language: 中文</li>\n<li>link: <a href=\"http://hijiangtao.github.io/2014/06/29/StudyNodeofRE/\">http://hijiangtao.github.io/2014/06/29/StudyNodeofRE/</a></li>\n<li>description: 非常棒的总结的书籍, 第一遍读一点都没有负担,在工作中边学边读,很多知识温故而知新,我已经通读了3遍了,但是每次用到的时候还会觉得有收获</li>\n</ul>\n","excerpt":"","more":"<h2 id=\"学习正则表达式\"><a href=\"#学习正则表达式\" class=\"headerlink\" title=\"学习正则表达式\"></a>学习正则表达式</h2><ul>\n<li>status: 第一遍读完</li>\n<li>author: 【美】Michael Fitzgerald (王热宇 译)</li>\n<li>publisher: 人民邮电出版社</li>\n<li>language: 中文</li>\n<li>link: <a href=\"http://www.duokan.com/book/62686\">http://www.duokan.com/book/62686</a></li>\n<li>cover: <a href=\"http://cover.read.duokan.com/mfsv2/download/s010/p01FsMcEwqgb/zlmp4cWu38g6tx.jpg!e\">http://cover.read.duokan.com/mfsv2/download/s010/p01FsMcEwqgb/zlmp4cWu38g6tx.jpg!e</a></li>\n<li>description: 整本书对正则的介绍还算详实,但是不能当做工具书,因为书中涉及了多门语言, perl, javascript, java, python等, 如果是想要当工具书, 推荐&lt;&lt;30分钟正则表达式入门&gt;&gt;</li>\n</ul>\n<h2 id=\"30分钟入门正则表达式\"><a href=\"#30分钟入门正则表达式\" class=\"headerlink\" title=\"30分钟入门正则表达式\"></a>30分钟入门正则表达式</h2><ul>\n<li>status: 完成</li>\n<li>author: 互联网</li>\n<li>publisher: 互联网</li>\n<li>language: 中文</li>\n<li>link: <a href=\"http://hijiangtao.github.io/2014/06/29/StudyNodeofRE/\">http://hijiangtao.github.io/2014/06/29/StudyNodeofRE/</a></li>\n<li>description: 非常棒的总结的书籍, 第一遍读一点都没有负担,在工作中边学边读,很多知识温故而知新,我已经通读了3遍了,但是每次用到的时候还会觉得有收获</li>\n</ul>\n"},{"layout":"post","title":"翻页效果模拟","published":1,"_content":"\n## 效果展示\n\n这是一个简单的翻页模拟，还是大学里面研究的，这里相当于是复习一下，所以准备重新梳理一下文章。\n\n![image](/image/翻页效果模拟/效果展示.png)\n\n\n## 绘制准备\n\n1. 这里为了简单体检，我使用的是`GeoGebra`进行模拟，在画布上绘制一个矩形ABCD, 然后新建一个点`P`, 相当于我们的手指触摸；\n2. 然后做点P和点B的中垂线与矩形的边AB和边BC分别相交与E2,E1点：\n\n![image](/image/翻页效果模拟/绘制准备.png)\n\n\n## 计算弯曲点\n\n假设我们对纸张没有任何的弯曲， 那么线段E1E2就是折痕，但是大自然是很神奇的，纸张反抗，会有一些弯曲，先不关注怎么弯曲的，\n纸张一定有一段是直的，没有弯曲，我们以线段PF2为例子，假设弯曲部分比例是 $f\\in (0,1]$. 所以我们可以在线段PE2上面作点F2使`|PF2|=f|PE2|`.\n所以这里的点命令为：`F2=(1-f)P+E2`，同理，做出线段PF1上的点F1. 这里我们可以认为点F1和点F2是纸张的完全开始点，那么物理上，\n肯定在线段AB和BC上面存在与之对应的点，并且弯曲部分的曲线也一定是对称的，一样，以F2为例子，那么点F2'的坐标可以表示为`((x(E2)-|F2E2|，0)`，\n曲线如下：\n\n![image](/image/翻页效果模拟/计算弯曲点.png)\n\n## 绘制弯曲部分曲线\n\n这里的曲线是贝塞尔曲线，并且它的三个控制点我们都已经找出来了，分辨是折点、弯曲点和对称的弯曲点，这里我们去除掉线段PE2和线段PE1，然后根据三个控制点绘制贝塞尔曲线。这里有一点需要注意，Geogebra并没有自带贝塞尔曲线的函数，所以我们需要借助`轨迹`功能，来绘制函数的轨迹，这就要求我们清楚贝塞尔的定义：\n\n### 线性贝塞尔曲线\n\n> 给定点P0、P1，线性贝塞尔曲线只是一条两点之间的直线。这条线由下式给出：\n> $$B(t) = { P }_{ 0 }+t({ P }_{ 1 }-{ P }_{ 0 })=(1-t){ P }_{ 0 }+t{ P }_{ 1 }\\quad ,t\\in [0,1]$$\n> 且其等同于线性插值。\n\n线性贝塞尔曲线函数中的t会经过由P0至P1的B（t）所描述的曲线。例如当t=0.25时，B（t）即一条由点P0至P1路径的四分之一处。就像由0至1的连续t，B（t）描述一条由P0至P1的直线。![image](/image/翻页效果模拟/Bézier_1_big.gif)\n\n### 二次方贝塞尔曲线\n\n二次相当于是对一次的扩充\n\n> 二次方贝塞尔曲线的路径由给定点P0、P1、P2的函数B（t）追踪：\n> $$B(t)={ (1-t) }^{ 2 }{ P }_{ 0 }+2t(1-t){ P }_{ 1 }+{ t }^{ 2 }{ P }_{ 2 }\\quad ,t\\in [0,1]$$\n> TrueType字型就运用了以贝塞尔样条组成的二次贝塞尔曲线。\n\n为建构二次贝塞尔曲线，可以中介点Q0和Q1作为由0至1的t：\n\n> 由P0至P1的连续点Q0，描述一条线性贝塞尔曲线。\n> 由P1至P2的连续点Q1，描述一条线性贝塞尔曲线。\n> 由Q0至Q1的连续点B（t），描述一条二次贝塞尔曲线。\n\n![image](/image/翻页效果模拟/Bézier_2_big.svg.png) ![image](/image/翻页效果模拟/Bézier_2_big.gif)\n\n所以我们的F2-E2-F2'上的贝塞尔轨迹可以表示为$B(t)=(1-t)((1-t)F2+tE2)+t((1-t)E2+tF2')\\quad ,t\\in[0,1]$,作图如下：\n\n![image](/image/翻页效果模拟/绘制弯曲部分曲线.png)\n\n\n## 绘制弯曲部分的切线\n\n到这里，应该是已经完成了纸张弯曲的模拟部分了，但是为了更加接近于纸张的效果，我们需要作弯曲部分的切线，这个我也是想了很长时间，可以这样简单理解，我弯曲纸张，那么弯曲上下两部分收到的作用应该是一样的，所以弯曲的曲线一定是对称的，那么我们的切点其实就是曲线的中点。而一次贝塞尔曲线的中点很简单，就是两个点相加除以2的问题，那么二次呢？我们知道二次是对一次的扩充，所以我们相当于先对两个一次贝塞尔曲线求中点，然后再对中点连成的曲线求中点, $B(t)=(1-t)((1-t)F2+tE2)+t((1-t)E2+tF2') ,t=\\frac { 1 }{ 2 } $, 最后的效果如下:\n\n![image](/image/翻页效果模拟/绘制弯曲部分的切线.png)\n\n## 工程化\n\n之前尝试过载Android和Qt两个平台上进行编码，Android基本实现了Demo，但是性能非常成问题，所以这里留个任务，之后改进一下计算方法，对理论的计算工程化，争取做一个有意思的Demo出来。\n","source":"_posts/graph/2015-05-28-翻页效果模拟.md","raw":"---\nlayout: post\ntitle: 翻页效果模拟\ncategories: [图形]\ntags: [数学，图形，Geogebra]\npublished: True\n\n---\n\n## 效果展示\n\n这是一个简单的翻页模拟，还是大学里面研究的，这里相当于是复习一下，所以准备重新梳理一下文章。\n\n![image](/image/翻页效果模拟/效果展示.png)\n\n\n## 绘制准备\n\n1. 这里为了简单体检，我使用的是`GeoGebra`进行模拟，在画布上绘制一个矩形ABCD, 然后新建一个点`P`, 相当于我们的手指触摸；\n2. 然后做点P和点B的中垂线与矩形的边AB和边BC分别相交与E2,E1点：\n\n![image](/image/翻页效果模拟/绘制准备.png)\n\n\n## 计算弯曲点\n\n假设我们对纸张没有任何的弯曲， 那么线段E1E2就是折痕，但是大自然是很神奇的，纸张反抗，会有一些弯曲，先不关注怎么弯曲的，\n纸张一定有一段是直的，没有弯曲，我们以线段PF2为例子，假设弯曲部分比例是 $f\\in (0,1]$. 所以我们可以在线段PE2上面作点F2使`|PF2|=f|PE2|`.\n所以这里的点命令为：`F2=(1-f)P+E2`，同理，做出线段PF1上的点F1. 这里我们可以认为点F1和点F2是纸张的完全开始点，那么物理上，\n肯定在线段AB和BC上面存在与之对应的点，并且弯曲部分的曲线也一定是对称的，一样，以F2为例子，那么点F2'的坐标可以表示为`((x(E2)-|F2E2|，0)`，\n曲线如下：\n\n![image](/image/翻页效果模拟/计算弯曲点.png)\n\n## 绘制弯曲部分曲线\n\n这里的曲线是贝塞尔曲线，并且它的三个控制点我们都已经找出来了，分辨是折点、弯曲点和对称的弯曲点，这里我们去除掉线段PE2和线段PE1，然后根据三个控制点绘制贝塞尔曲线。这里有一点需要注意，Geogebra并没有自带贝塞尔曲线的函数，所以我们需要借助`轨迹`功能，来绘制函数的轨迹，这就要求我们清楚贝塞尔的定义：\n\n### 线性贝塞尔曲线\n\n> 给定点P0、P1，线性贝塞尔曲线只是一条两点之间的直线。这条线由下式给出：\n> $$B(t) = { P }_{ 0 }+t({ P }_{ 1 }-{ P }_{ 0 })=(1-t){ P }_{ 0 }+t{ P }_{ 1 }\\quad ,t\\in [0,1]$$\n> 且其等同于线性插值。\n\n线性贝塞尔曲线函数中的t会经过由P0至P1的B（t）所描述的曲线。例如当t=0.25时，B（t）即一条由点P0至P1路径的四分之一处。就像由0至1的连续t，B（t）描述一条由P0至P1的直线。![image](/image/翻页效果模拟/Bézier_1_big.gif)\n\n### 二次方贝塞尔曲线\n\n二次相当于是对一次的扩充\n\n> 二次方贝塞尔曲线的路径由给定点P0、P1、P2的函数B（t）追踪：\n> $$B(t)={ (1-t) }^{ 2 }{ P }_{ 0 }+2t(1-t){ P }_{ 1 }+{ t }^{ 2 }{ P }_{ 2 }\\quad ,t\\in [0,1]$$\n> TrueType字型就运用了以贝塞尔样条组成的二次贝塞尔曲线。\n\n为建构二次贝塞尔曲线，可以中介点Q0和Q1作为由0至1的t：\n\n> 由P0至P1的连续点Q0，描述一条线性贝塞尔曲线。\n> 由P1至P2的连续点Q1，描述一条线性贝塞尔曲线。\n> 由Q0至Q1的连续点B（t），描述一条二次贝塞尔曲线。\n\n![image](/image/翻页效果模拟/Bézier_2_big.svg.png) ![image](/image/翻页效果模拟/Bézier_2_big.gif)\n\n所以我们的F2-E2-F2'上的贝塞尔轨迹可以表示为$B(t)=(1-t)((1-t)F2+tE2)+t((1-t)E2+tF2')\\quad ,t\\in[0,1]$,作图如下：\n\n![image](/image/翻页效果模拟/绘制弯曲部分曲线.png)\n\n\n## 绘制弯曲部分的切线\n\n到这里，应该是已经完成了纸张弯曲的模拟部分了，但是为了更加接近于纸张的效果，我们需要作弯曲部分的切线，这个我也是想了很长时间，可以这样简单理解，我弯曲纸张，那么弯曲上下两部分收到的作用应该是一样的，所以弯曲的曲线一定是对称的，那么我们的切点其实就是曲线的中点。而一次贝塞尔曲线的中点很简单，就是两个点相加除以2的问题，那么二次呢？我们知道二次是对一次的扩充，所以我们相当于先对两个一次贝塞尔曲线求中点，然后再对中点连成的曲线求中点, $B(t)=(1-t)((1-t)F2+tE2)+t((1-t)E2+tF2') ,t=\\frac { 1 }{ 2 } $, 最后的效果如下:\n\n![image](/image/翻页效果模拟/绘制弯曲部分的切线.png)\n\n## 工程化\n\n之前尝试过载Android和Qt两个平台上进行编码，Android基本实现了Demo，但是性能非常成问题，所以这里留个任务，之后改进一下计算方法，对理论的计算工程化，争取做一个有意思的Demo出来。\n","slug":"graph/2015-05-28-翻页效果模拟","date":"2025-03-22T11:29:07.575Z","updated":"2025-03-22T11:29:07.575Z","comments":1,"photos":[],"_id":"cm8k4mbdv000fq69d1771dq99","content":"<h2 id=\"效果展示\"><a href=\"#效果展示\" class=\"headerlink\" title=\"效果展示\"></a>效果展示</h2><p>这是一个简单的翻页模拟，还是大学里面研究的，这里相当于是复习一下，所以准备重新梳理一下文章。</p>\n<p><img src=\"/image/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F/%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA.png\" alt=\"image\"></p>\n<h2 id=\"绘制准备\"><a href=\"#绘制准备\" class=\"headerlink\" title=\"绘制准备\"></a>绘制准备</h2><ol>\n<li>这里为了简单体检，我使用的是<code>GeoGebra</code>进行模拟，在画布上绘制一个矩形ABCD, 然后新建一个点<code>P</code>, 相当于我们的手指触摸；</li>\n<li>然后做点P和点B的中垂线与矩形的边AB和边BC分别相交与E2,E1点：</li>\n</ol>\n<p><img src=\"/image/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F/%E7%BB%98%E5%88%B6%E5%87%86%E5%A4%87.png\" alt=\"image\"></p>\n<h2 id=\"计算弯曲点\"><a href=\"#计算弯曲点\" class=\"headerlink\" title=\"计算弯曲点\"></a>计算弯曲点</h2><p>假设我们对纸张没有任何的弯曲， 那么线段E1E2就是折痕，但是大自然是很神奇的，纸张反抗，会有一些弯曲，先不关注怎么弯曲的，<br>纸张一定有一段是直的，没有弯曲，我们以线段PF2为例子，假设弯曲部分比例是 $f\\in (0,1]$. 所以我们可以在线段PE2上面作点F2使<code>|PF2|=f|PE2|</code>.<br>所以这里的点命令为：<code>F2=(1-f)P+E2</code>，同理，做出线段PF1上的点F1. 这里我们可以认为点F1和点F2是纸张的完全开始点，那么物理上，<br>肯定在线段AB和BC上面存在与之对应的点，并且弯曲部分的曲线也一定是对称的，一样，以F2为例子，那么点F2’的坐标可以表示为<code>((x(E2)-|F2E2|，0)</code>，<br>曲线如下：</p>\n<p><img src=\"/image/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F/%E8%AE%A1%E7%AE%97%E5%BC%AF%E6%9B%B2%E7%82%B9.png\" alt=\"image\"></p>\n<h2 id=\"绘制弯曲部分曲线\"><a href=\"#绘制弯曲部分曲线\" class=\"headerlink\" title=\"绘制弯曲部分曲线\"></a>绘制弯曲部分曲线</h2><p>这里的曲线是贝塞尔曲线，并且它的三个控制点我们都已经找出来了，分辨是折点、弯曲点和对称的弯曲点，这里我们去除掉线段PE2和线段PE1，然后根据三个控制点绘制贝塞尔曲线。这里有一点需要注意，Geogebra并没有自带贝塞尔曲线的函数，所以我们需要借助<code>轨迹</code>功能，来绘制函数的轨迹，这就要求我们清楚贝塞尔的定义：</p>\n<h3 id=\"线性贝塞尔曲线\"><a href=\"#线性贝塞尔曲线\" class=\"headerlink\" title=\"线性贝塞尔曲线\"></a>线性贝塞尔曲线</h3><blockquote>\n<p>给定点P0、P1，线性贝塞尔曲线只是一条两点之间的直线。这条线由下式给出：<br>$$B(t) &#x3D; { P }<em>{ 0 }+t({ P }</em>{ 1 }-{ P }<em>{ 0 })&#x3D;(1-t){ P }</em>{ 0 }+t{ P }_{ 1 }\\quad ,t\\in [0,1]$$<br>且其等同于线性插值。</p>\n</blockquote>\n<p>线性贝塞尔曲线函数中的t会经过由P0至P1的B（t）所描述的曲线。例如当t&#x3D;0.25时，B（t）即一条由点P0至P1路径的四分之一处。就像由0至1的连续t，B（t）描述一条由P0至P1的直线。<img src=\"/image/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F/B%C3%A9zier_1_big.gif\" alt=\"image\"></p>\n<h3 id=\"二次方贝塞尔曲线\"><a href=\"#二次方贝塞尔曲线\" class=\"headerlink\" title=\"二次方贝塞尔曲线\"></a>二次方贝塞尔曲线</h3><p>二次相当于是对一次的扩充</p>\n<blockquote>\n<p>二次方贝塞尔曲线的路径由给定点P0、P1、P2的函数B（t）追踪：<br>$$B(t)&#x3D;{ (1-t) }^{ 2 }{ P }<em>{ 0 }+2t(1-t){ P }</em>{ 1 }+{ t }^{ 2 }{ P }_{ 2 }\\quad ,t\\in [0,1]$$<br>TrueType字型就运用了以贝塞尔样条组成的二次贝塞尔曲线。</p>\n</blockquote>\n<p>为建构二次贝塞尔曲线，可以中介点Q0和Q1作为由0至1的t：</p>\n<blockquote>\n<p>由P0至P1的连续点Q0，描述一条线性贝塞尔曲线。<br>由P1至P2的连续点Q1，描述一条线性贝塞尔曲线。<br>由Q0至Q1的连续点B（t），描述一条二次贝塞尔曲线。</p>\n</blockquote>\n<p><img src=\"/image/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F/B%C3%A9zier_2_big.svg.png\" alt=\"image\"> <img src=\"/image/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F/B%C3%A9zier_2_big.gif\" alt=\"image\"></p>\n<p>所以我们的F2-E2-F2’上的贝塞尔轨迹可以表示为$B(t)&#x3D;(1-t)((1-t)F2+tE2)+t((1-t)E2+tF2’)\\quad ,t\\in[0,1]$,作图如下：</p>\n<p><img src=\"/image/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F/%E7%BB%98%E5%88%B6%E5%BC%AF%E6%9B%B2%E9%83%A8%E5%88%86%E6%9B%B2%E7%BA%BF.png\" alt=\"image\"></p>\n<h2 id=\"绘制弯曲部分的切线\"><a href=\"#绘制弯曲部分的切线\" class=\"headerlink\" title=\"绘制弯曲部分的切线\"></a>绘制弯曲部分的切线</h2><p>到这里，应该是已经完成了纸张弯曲的模拟部分了，但是为了更加接近于纸张的效果，我们需要作弯曲部分的切线，这个我也是想了很长时间，可以这样简单理解，我弯曲纸张，那么弯曲上下两部分收到的作用应该是一样的，所以弯曲的曲线一定是对称的，那么我们的切点其实就是曲线的中点。而一次贝塞尔曲线的中点很简单，就是两个点相加除以2的问题，那么二次呢？我们知道二次是对一次的扩充，所以我们相当于先对两个一次贝塞尔曲线求中点，然后再对中点连成的曲线求中点, $B(t)&#x3D;(1-t)((1-t)F2+tE2)+t((1-t)E2+tF2’) ,t&#x3D;\\frac { 1 }{ 2 } $, 最后的效果如下:</p>\n<p><img src=\"/image/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F/%E7%BB%98%E5%88%B6%E5%BC%AF%E6%9B%B2%E9%83%A8%E5%88%86%E7%9A%84%E5%88%87%E7%BA%BF.png\" alt=\"image\"></p>\n<h2 id=\"工程化\"><a href=\"#工程化\" class=\"headerlink\" title=\"工程化\"></a>工程化</h2><p>之前尝试过载Android和Qt两个平台上进行编码，Android基本实现了Demo，但是性能非常成问题，所以这里留个任务，之后改进一下计算方法，对理论的计算工程化，争取做一个有意思的Demo出来。</p>\n","excerpt":"","more":"<h2 id=\"效果展示\"><a href=\"#效果展示\" class=\"headerlink\" title=\"效果展示\"></a>效果展示</h2><p>这是一个简单的翻页模拟，还是大学里面研究的，这里相当于是复习一下，所以准备重新梳理一下文章。</p>\n<p><img src=\"/image/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F/%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA.png\" alt=\"image\"></p>\n<h2 id=\"绘制准备\"><a href=\"#绘制准备\" class=\"headerlink\" title=\"绘制准备\"></a>绘制准备</h2><ol>\n<li>这里为了简单体检，我使用的是<code>GeoGebra</code>进行模拟，在画布上绘制一个矩形ABCD, 然后新建一个点<code>P</code>, 相当于我们的手指触摸；</li>\n<li>然后做点P和点B的中垂线与矩形的边AB和边BC分别相交与E2,E1点：</li>\n</ol>\n<p><img src=\"/image/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F/%E7%BB%98%E5%88%B6%E5%87%86%E5%A4%87.png\" alt=\"image\"></p>\n<h2 id=\"计算弯曲点\"><a href=\"#计算弯曲点\" class=\"headerlink\" title=\"计算弯曲点\"></a>计算弯曲点</h2><p>假设我们对纸张没有任何的弯曲， 那么线段E1E2就是折痕，但是大自然是很神奇的，纸张反抗，会有一些弯曲，先不关注怎么弯曲的，<br>纸张一定有一段是直的，没有弯曲，我们以线段PF2为例子，假设弯曲部分比例是 $f\\in (0,1]$. 所以我们可以在线段PE2上面作点F2使<code>|PF2|=f|PE2|</code>.<br>所以这里的点命令为：<code>F2=(1-f)P+E2</code>，同理，做出线段PF1上的点F1. 这里我们可以认为点F1和点F2是纸张的完全开始点，那么物理上，<br>肯定在线段AB和BC上面存在与之对应的点，并且弯曲部分的曲线也一定是对称的，一样，以F2为例子，那么点F2’的坐标可以表示为<code>((x(E2)-|F2E2|，0)</code>，<br>曲线如下：</p>\n<p><img src=\"/image/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F/%E8%AE%A1%E7%AE%97%E5%BC%AF%E6%9B%B2%E7%82%B9.png\" alt=\"image\"></p>\n<h2 id=\"绘制弯曲部分曲线\"><a href=\"#绘制弯曲部分曲线\" class=\"headerlink\" title=\"绘制弯曲部分曲线\"></a>绘制弯曲部分曲线</h2><p>这里的曲线是贝塞尔曲线，并且它的三个控制点我们都已经找出来了，分辨是折点、弯曲点和对称的弯曲点，这里我们去除掉线段PE2和线段PE1，然后根据三个控制点绘制贝塞尔曲线。这里有一点需要注意，Geogebra并没有自带贝塞尔曲线的函数，所以我们需要借助<code>轨迹</code>功能，来绘制函数的轨迹，这就要求我们清楚贝塞尔的定义：</p>\n<h3 id=\"线性贝塞尔曲线\"><a href=\"#线性贝塞尔曲线\" class=\"headerlink\" title=\"线性贝塞尔曲线\"></a>线性贝塞尔曲线</h3><blockquote>\n<p>给定点P0、P1，线性贝塞尔曲线只是一条两点之间的直线。这条线由下式给出：<br>$$B(t) &#x3D; { P }<em>{ 0 }+t({ P }</em>{ 1 }-{ P }<em>{ 0 })&#x3D;(1-t){ P }</em>{ 0 }+t{ P }_{ 1 }\\quad ,t\\in [0,1]$$<br>且其等同于线性插值。</p>\n</blockquote>\n<p>线性贝塞尔曲线函数中的t会经过由P0至P1的B（t）所描述的曲线。例如当t&#x3D;0.25时，B（t）即一条由点P0至P1路径的四分之一处。就像由0至1的连续t，B（t）描述一条由P0至P1的直线。<img src=\"/image/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F/B%C3%A9zier_1_big.gif\" alt=\"image\"></p>\n<h3 id=\"二次方贝塞尔曲线\"><a href=\"#二次方贝塞尔曲线\" class=\"headerlink\" title=\"二次方贝塞尔曲线\"></a>二次方贝塞尔曲线</h3><p>二次相当于是对一次的扩充</p>\n<blockquote>\n<p>二次方贝塞尔曲线的路径由给定点P0、P1、P2的函数B（t）追踪：<br>$$B(t)&#x3D;{ (1-t) }^{ 2 }{ P }<em>{ 0 }+2t(1-t){ P }</em>{ 1 }+{ t }^{ 2 }{ P }_{ 2 }\\quad ,t\\in [0,1]$$<br>TrueType字型就运用了以贝塞尔样条组成的二次贝塞尔曲线。</p>\n</blockquote>\n<p>为建构二次贝塞尔曲线，可以中介点Q0和Q1作为由0至1的t：</p>\n<blockquote>\n<p>由P0至P1的连续点Q0，描述一条线性贝塞尔曲线。<br>由P1至P2的连续点Q1，描述一条线性贝塞尔曲线。<br>由Q0至Q1的连续点B（t），描述一条二次贝塞尔曲线。</p>\n</blockquote>\n<p><img src=\"/image/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F/B%C3%A9zier_2_big.svg.png\" alt=\"image\"> <img src=\"/image/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F/B%C3%A9zier_2_big.gif\" alt=\"image\"></p>\n<p>所以我们的F2-E2-F2’上的贝塞尔轨迹可以表示为$B(t)&#x3D;(1-t)((1-t)F2+tE2)+t((1-t)E2+tF2’)\\quad ,t\\in[0,1]$,作图如下：</p>\n<p><img src=\"/image/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F/%E7%BB%98%E5%88%B6%E5%BC%AF%E6%9B%B2%E9%83%A8%E5%88%86%E6%9B%B2%E7%BA%BF.png\" alt=\"image\"></p>\n<h2 id=\"绘制弯曲部分的切线\"><a href=\"#绘制弯曲部分的切线\" class=\"headerlink\" title=\"绘制弯曲部分的切线\"></a>绘制弯曲部分的切线</h2><p>到这里，应该是已经完成了纸张弯曲的模拟部分了，但是为了更加接近于纸张的效果，我们需要作弯曲部分的切线，这个我也是想了很长时间，可以这样简单理解，我弯曲纸张，那么弯曲上下两部分收到的作用应该是一样的，所以弯曲的曲线一定是对称的，那么我们的切点其实就是曲线的中点。而一次贝塞尔曲线的中点很简单，就是两个点相加除以2的问题，那么二次呢？我们知道二次是对一次的扩充，所以我们相当于先对两个一次贝塞尔曲线求中点，然后再对中点连成的曲线求中点, $B(t)&#x3D;(1-t)((1-t)F2+tE2)+t((1-t)E2+tF2’) ,t&#x3D;\\frac { 1 }{ 2 } $, 最后的效果如下:</p>\n<p><img src=\"/image/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F/%E7%BB%98%E5%88%B6%E5%BC%AF%E6%9B%B2%E9%83%A8%E5%88%86%E7%9A%84%E5%88%87%E7%BA%BF.png\" alt=\"image\"></p>\n<h2 id=\"工程化\"><a href=\"#工程化\" class=\"headerlink\" title=\"工程化\"></a>工程化</h2><p>之前尝试过载Android和Qt两个平台上进行编码，Android基本实现了Demo，但是性能非常成问题，所以这里留个任务，之后改进一下计算方法，对理论的计算工程化，争取做一个有意思的Demo出来。</p>\n"},{"layout":"post","title":"个人简历","published":1,"_content":"\n> $${ (1+0.1)^{ 365 }=37.78343433288728 }$$\n> $${ (1-0.1)^{ 365 }=0.025517964452291 }$$\n\n通往荣誉的道路上并不是铺满鲜花的。 \n\n# 联系方式\n- 手机：`18629673183`/`15109237103`(家人)\n- Email：`spritemoss@gmail.com`\n- QQ/微信号：`910217951`/`moss815210`\n\n---\n\n# 个人信息\n\n - 李聪 / 男 / 1990\n - 本科/西安电子科技大学\n - 工作年限：3年~\n - 技术博客：http://blog.aiziyuer.com\n - Github: https://github.com/aiziyuer\n\n - 期望职位：C++/java高级程序员\n - 期望薪资：税前月薪13k~20k，特别喜欢的公司可例外\n - 期望城市：西安/杭州\n\n---\n\n# 工作经历\n\n## 西安华为技术公司 （ 2013年7月 ~ 当前 ）\n\n### Struts从1.0到2.0框架切换\n我在此项目中主导完成产品Web前台框架的切换。因为是第一次接触Web，克服了对Spring和Struts的不熟悉，积极研读Apache官方文档和指导，最终在3天内完成了框架的切换，大大超出最初2周工作量估计，并且可以做到Struts1和Struts2并存，让产品可以慢慢过渡，得到部门领导的一致好评，并获得部门“金网络”的殊荣。\n\n### CodeCT项目\n我在此项目中主要完成结果的图表展示功能开发。使用java自带的SAX来将java的对象转换成XML，在半天的时间内高效完成图表的展示功能开发，并且将代码形成模式，利于后续为维护和扩展。超出原始的一周工作量估计，并且实现的机制受到之后维护的兄弟一致好评。CodeCT工具最终也获得了“固网好工具”的称号。\n\n### VDF一期OTDR算法增强项目\n我在此项目中主要担任双端测试的结果合并算法逻辑实现，与另外两名同事配合。过程中我积极与算法SE沟通算法规格的细节，将算法实现的风险提前暴露，最终完成VDF一期的交付，得到一线客户的认同。\n\n### MatchOnu项目\n我在此项目中独立完成了MatchONU的算法编写。项目中我尝试了学习JDK的模板方法抽象了算法中使用到的排列组合逻辑，使得这部分复杂逻辑可以独立与业务逻辑得到测试用例的验证，最终在两周的时间内完成了算法的实现。\n\n### Vectoring运维保障工具项目 \n我在此项目中使用SWT独立完成用户界面的开发，项目中我克服了对SWT框架不熟、java多线程、SQLite读写性能瓶颈等诸多困难，最终在与项目组SE和其余同事讨论以及在自己的研究下，在3周内完成界面开发，并获得了产品一线运维人员的好评。过程中在数据库的处理上使用了java中的反射高效完成了数据库表到对象的转换，兼顾读写速度的同时还减少了开发的工作量，获得同事的认可。\n\n---\n\n# 开源项目和作品\n初出茅庐，学艺尚浅，所以工作之余将工作中或者学习中的一些心得和笔记用一些小的项目记录下来。\n\n## 开源项目\n\n - [CurveLibrary](https://github.com/aiziyuer/CurveLibrary):用于学习Maven做项目管理的web项目\n - [Signorina](https://github.com/aiziyuer/Signorina):学习SWT和Spring的AOP而做的客户端项目\n\n## 技术文章\n\n - [翻页效果模拟](http://blog.aiziyuer.com/2015/05/28/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F.html)\n - [Tomcat支持双向认证](http://blog.aiziyuer.com/2015/06/18/Tomcat%E6%94%AF%E6%8C%81%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81.html)\n\n# 技能清单\n\n以下均为我熟练使用的技能\n\n- Web开发：JavaScript\n- Web框架：Struts/Spring\n- 前端工具：Grunt/SaSS/\n- 数据库相关：MySQL/SQLite/Oracle\n- 版本管理、文档和自动化部署工具：Svn/Git/Maven\n- 语言工具类：正则表达式\n\n一下是我熟悉的技能\n\n- 语言类：C++/Ruby/Qt/Shell\n\n---\n\n# 致谢\n感谢您花时间阅读我的简历，期待能有机会和您共事。\n","source":"_posts/life/2015-09-20-about-me.md","raw":"---\nlayout: post\ntitle: 个人简历\ncategories: [生活]\ntags: [about, me]\npublished: True\n\n---\n\n> $${ (1+0.1)^{ 365 }=37.78343433288728 }$$\n> $${ (1-0.1)^{ 365 }=0.025517964452291 }$$\n\n通往荣誉的道路上并不是铺满鲜花的。 \n\n# 联系方式\n- 手机：`18629673183`/`15109237103`(家人)\n- Email：`spritemoss@gmail.com`\n- QQ/微信号：`910217951`/`moss815210`\n\n---\n\n# 个人信息\n\n - 李聪 / 男 / 1990\n - 本科/西安电子科技大学\n - 工作年限：3年~\n - 技术博客：http://blog.aiziyuer.com\n - Github: https://github.com/aiziyuer\n\n - 期望职位：C++/java高级程序员\n - 期望薪资：税前月薪13k~20k，特别喜欢的公司可例外\n - 期望城市：西安/杭州\n\n---\n\n# 工作经历\n\n## 西安华为技术公司 （ 2013年7月 ~ 当前 ）\n\n### Struts从1.0到2.0框架切换\n我在此项目中主导完成产品Web前台框架的切换。因为是第一次接触Web，克服了对Spring和Struts的不熟悉，积极研读Apache官方文档和指导，最终在3天内完成了框架的切换，大大超出最初2周工作量估计，并且可以做到Struts1和Struts2并存，让产品可以慢慢过渡，得到部门领导的一致好评，并获得部门“金网络”的殊荣。\n\n### CodeCT项目\n我在此项目中主要完成结果的图表展示功能开发。使用java自带的SAX来将java的对象转换成XML，在半天的时间内高效完成图表的展示功能开发，并且将代码形成模式，利于后续为维护和扩展。超出原始的一周工作量估计，并且实现的机制受到之后维护的兄弟一致好评。CodeCT工具最终也获得了“固网好工具”的称号。\n\n### VDF一期OTDR算法增强项目\n我在此项目中主要担任双端测试的结果合并算法逻辑实现，与另外两名同事配合。过程中我积极与算法SE沟通算法规格的细节，将算法实现的风险提前暴露，最终完成VDF一期的交付，得到一线客户的认同。\n\n### MatchOnu项目\n我在此项目中独立完成了MatchONU的算法编写。项目中我尝试了学习JDK的模板方法抽象了算法中使用到的排列组合逻辑，使得这部分复杂逻辑可以独立与业务逻辑得到测试用例的验证，最终在两周的时间内完成了算法的实现。\n\n### Vectoring运维保障工具项目 \n我在此项目中使用SWT独立完成用户界面的开发，项目中我克服了对SWT框架不熟、java多线程、SQLite读写性能瓶颈等诸多困难，最终在与项目组SE和其余同事讨论以及在自己的研究下，在3周内完成界面开发，并获得了产品一线运维人员的好评。过程中在数据库的处理上使用了java中的反射高效完成了数据库表到对象的转换，兼顾读写速度的同时还减少了开发的工作量，获得同事的认可。\n\n---\n\n# 开源项目和作品\n初出茅庐，学艺尚浅，所以工作之余将工作中或者学习中的一些心得和笔记用一些小的项目记录下来。\n\n## 开源项目\n\n - [CurveLibrary](https://github.com/aiziyuer/CurveLibrary):用于学习Maven做项目管理的web项目\n - [Signorina](https://github.com/aiziyuer/Signorina):学习SWT和Spring的AOP而做的客户端项目\n\n## 技术文章\n\n - [翻页效果模拟](http://blog.aiziyuer.com/2015/05/28/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F.html)\n - [Tomcat支持双向认证](http://blog.aiziyuer.com/2015/06/18/Tomcat%E6%94%AF%E6%8C%81%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81.html)\n\n# 技能清单\n\n以下均为我熟练使用的技能\n\n- Web开发：JavaScript\n- Web框架：Struts/Spring\n- 前端工具：Grunt/SaSS/\n- 数据库相关：MySQL/SQLite/Oracle\n- 版本管理、文档和自动化部署工具：Svn/Git/Maven\n- 语言工具类：正则表达式\n\n一下是我熟悉的技能\n\n- 语言类：C++/Ruby/Qt/Shell\n\n---\n\n# 致谢\n感谢您花时间阅读我的简历，期待能有机会和您共事。\n","slug":"life/2015-09-20-about-me","date":"2025-03-22T11:29:07.652Z","updated":"2025-03-22T11:29:07.652Z","comments":1,"photos":[],"_id":"cm8k4mbdx000iq69d5p742wsj","content":"<blockquote>\n<p>$${ (1+0.1)^{ 365 }&#x3D;37.78343433288728 }$$<br>$${ (1-0.1)^{ 365 }&#x3D;0.025517964452291 }$$</p>\n</blockquote>\n<p>通往荣誉的道路上并不是铺满鲜花的。 </p>\n<h1 id=\"联系方式\"><a href=\"#联系方式\" class=\"headerlink\" title=\"联系方式\"></a>联系方式</h1><ul>\n<li>手机：<code>18629673183</code>&#x2F;<code>15109237103</code>(家人)</li>\n<li>Email：<code>spritemoss@gmail.com</code></li>\n<li>QQ&#x2F;微信号：<code>910217951</code>&#x2F;<code>moss815210</code></li>\n</ul>\n<hr>\n<h1 id=\"个人信息\"><a href=\"#个人信息\" class=\"headerlink\" title=\"个人信息\"></a>个人信息</h1><ul>\n<li><p>李聪 &#x2F; 男 &#x2F; 1990</p>\n</li>\n<li><p>本科&#x2F;西安电子科技大学</p>\n</li>\n<li><p>工作年限：3年~</p>\n</li>\n<li><p>技术博客：<a href=\"http://blog.aiziyuer.com/\">http://blog.aiziyuer.com</a></p>\n</li>\n<li><p>Github: <a href=\"https://github.com/aiziyuer\">https://github.com/aiziyuer</a></p>\n</li>\n<li><p>期望职位：C++&#x2F;java高级程序员</p>\n</li>\n<li><p>期望薪资：税前月薪13k~20k，特别喜欢的公司可例外</p>\n</li>\n<li><p>期望城市：西安&#x2F;杭州</p>\n</li>\n</ul>\n<hr>\n<h1 id=\"工作经历\"><a href=\"#工作经历\" class=\"headerlink\" title=\"工作经历\"></a>工作经历</h1><h2 id=\"西安华为技术公司-（-2013年7月-当前-）\"><a href=\"#西安华为技术公司-（-2013年7月-当前-）\" class=\"headerlink\" title=\"西安华为技术公司 （ 2013年7月 ~ 当前 ）\"></a>西安华为技术公司 （ 2013年7月 ~ 当前 ）</h2><h3 id=\"Struts从1-0到2-0框架切换\"><a href=\"#Struts从1-0到2-0框架切换\" class=\"headerlink\" title=\"Struts从1.0到2.0框架切换\"></a>Struts从1.0到2.0框架切换</h3><p>我在此项目中主导完成产品Web前台框架的切换。因为是第一次接触Web，克服了对Spring和Struts的不熟悉，积极研读Apache官方文档和指导，最终在3天内完成了框架的切换，大大超出最初2周工作量估计，并且可以做到Struts1和Struts2并存，让产品可以慢慢过渡，得到部门领导的一致好评，并获得部门“金网络”的殊荣。</p>\n<h3 id=\"CodeCT项目\"><a href=\"#CodeCT项目\" class=\"headerlink\" title=\"CodeCT项目\"></a>CodeCT项目</h3><p>我在此项目中主要完成结果的图表展示功能开发。使用java自带的SAX来将java的对象转换成XML，在半天的时间内高效完成图表的展示功能开发，并且将代码形成模式，利于后续为维护和扩展。超出原始的一周工作量估计，并且实现的机制受到之后维护的兄弟一致好评。CodeCT工具最终也获得了“固网好工具”的称号。</p>\n<h3 id=\"VDF一期OTDR算法增强项目\"><a href=\"#VDF一期OTDR算法增强项目\" class=\"headerlink\" title=\"VDF一期OTDR算法增强项目\"></a>VDF一期OTDR算法增强项目</h3><p>我在此项目中主要担任双端测试的结果合并算法逻辑实现，与另外两名同事配合。过程中我积极与算法SE沟通算法规格的细节，将算法实现的风险提前暴露，最终完成VDF一期的交付，得到一线客户的认同。</p>\n<h3 id=\"MatchOnu项目\"><a href=\"#MatchOnu项目\" class=\"headerlink\" title=\"MatchOnu项目\"></a>MatchOnu项目</h3><p>我在此项目中独立完成了MatchONU的算法编写。项目中我尝试了学习JDK的模板方法抽象了算法中使用到的排列组合逻辑，使得这部分复杂逻辑可以独立与业务逻辑得到测试用例的验证，最终在两周的时间内完成了算法的实现。</p>\n<h3 id=\"Vectoring运维保障工具项目\"><a href=\"#Vectoring运维保障工具项目\" class=\"headerlink\" title=\"Vectoring运维保障工具项目\"></a>Vectoring运维保障工具项目</h3><p>我在此项目中使用SWT独立完成用户界面的开发，项目中我克服了对SWT框架不熟、java多线程、SQLite读写性能瓶颈等诸多困难，最终在与项目组SE和其余同事讨论以及在自己的研究下，在3周内完成界面开发，并获得了产品一线运维人员的好评。过程中在数据库的处理上使用了java中的反射高效完成了数据库表到对象的转换，兼顾读写速度的同时还减少了开发的工作量，获得同事的认可。</p>\n<hr>\n<h1 id=\"开源项目和作品\"><a href=\"#开源项目和作品\" class=\"headerlink\" title=\"开源项目和作品\"></a>开源项目和作品</h1><p>初出茅庐，学艺尚浅，所以工作之余将工作中或者学习中的一些心得和笔记用一些小的项目记录下来。</p>\n<h2 id=\"开源项目\"><a href=\"#开源项目\" class=\"headerlink\" title=\"开源项目\"></a>开源项目</h2><ul>\n<li><a href=\"https://github.com/aiziyuer/CurveLibrary\">CurveLibrary</a>:用于学习Maven做项目管理的web项目</li>\n<li><a href=\"https://github.com/aiziyuer/Signorina\">Signorina</a>:学习SWT和Spring的AOP而做的客户端项目</li>\n</ul>\n<h2 id=\"技术文章\"><a href=\"#技术文章\" class=\"headerlink\" title=\"技术文章\"></a>技术文章</h2><ul>\n<li><a href=\"http://blog.aiziyuer.com/2015/05/28/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F.html\">翻页效果模拟</a></li>\n<li><a href=\"http://blog.aiziyuer.com/2015/06/18/Tomcat%E6%94%AF%E6%8C%81%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81.html\">Tomcat支持双向认证</a></li>\n</ul>\n<h1 id=\"技能清单\"><a href=\"#技能清单\" class=\"headerlink\" title=\"技能清单\"></a>技能清单</h1><p>以下均为我熟练使用的技能</p>\n<ul>\n<li>Web开发：JavaScript</li>\n<li>Web框架：Struts&#x2F;Spring</li>\n<li>前端工具：Grunt&#x2F;SaSS&#x2F;</li>\n<li>数据库相关：MySQL&#x2F;SQLite&#x2F;Oracle</li>\n<li>版本管理、文档和自动化部署工具：Svn&#x2F;Git&#x2F;Maven</li>\n<li>语言工具类：正则表达式</li>\n</ul>\n<p>一下是我熟悉的技能</p>\n<ul>\n<li>语言类：C++&#x2F;Ruby&#x2F;Qt&#x2F;Shell</li>\n</ul>\n<hr>\n<h1 id=\"致谢\"><a href=\"#致谢\" class=\"headerlink\" title=\"致谢\"></a>致谢</h1><p>感谢您花时间阅读我的简历，期待能有机会和您共事。</p>\n","excerpt":"","more":"<blockquote>\n<p>$${ (1+0.1)^{ 365 }&#x3D;37.78343433288728 }$$<br>$${ (1-0.1)^{ 365 }&#x3D;0.025517964452291 }$$</p>\n</blockquote>\n<p>通往荣誉的道路上并不是铺满鲜花的。 </p>\n<h1 id=\"联系方式\"><a href=\"#联系方式\" class=\"headerlink\" title=\"联系方式\"></a>联系方式</h1><ul>\n<li>手机：<code>18629673183</code>&#x2F;<code>15109237103</code>(家人)</li>\n<li>Email：<code>spritemoss@gmail.com</code></li>\n<li>QQ&#x2F;微信号：<code>910217951</code>&#x2F;<code>moss815210</code></li>\n</ul>\n<hr>\n<h1 id=\"个人信息\"><a href=\"#个人信息\" class=\"headerlink\" title=\"个人信息\"></a>个人信息</h1><ul>\n<li><p>李聪 &#x2F; 男 &#x2F; 1990</p>\n</li>\n<li><p>本科&#x2F;西安电子科技大学</p>\n</li>\n<li><p>工作年限：3年~</p>\n</li>\n<li><p>技术博客：<a href=\"http://blog.aiziyuer.com/\">http://blog.aiziyuer.com</a></p>\n</li>\n<li><p>Github: <a href=\"https://github.com/aiziyuer\">https://github.com/aiziyuer</a></p>\n</li>\n<li><p>期望职位：C++&#x2F;java高级程序员</p>\n</li>\n<li><p>期望薪资：税前月薪13k~20k，特别喜欢的公司可例外</p>\n</li>\n<li><p>期望城市：西安&#x2F;杭州</p>\n</li>\n</ul>\n<hr>\n<h1 id=\"工作经历\"><a href=\"#工作经历\" class=\"headerlink\" title=\"工作经历\"></a>工作经历</h1><h2 id=\"西安华为技术公司-（-2013年7月-当前-）\"><a href=\"#西安华为技术公司-（-2013年7月-当前-）\" class=\"headerlink\" title=\"西安华为技术公司 （ 2013年7月 ~ 当前 ）\"></a>西安华为技术公司 （ 2013年7月 ~ 当前 ）</h2><h3 id=\"Struts从1-0到2-0框架切换\"><a href=\"#Struts从1-0到2-0框架切换\" class=\"headerlink\" title=\"Struts从1.0到2.0框架切换\"></a>Struts从1.0到2.0框架切换</h3><p>我在此项目中主导完成产品Web前台框架的切换。因为是第一次接触Web，克服了对Spring和Struts的不熟悉，积极研读Apache官方文档和指导，最终在3天内完成了框架的切换，大大超出最初2周工作量估计，并且可以做到Struts1和Struts2并存，让产品可以慢慢过渡，得到部门领导的一致好评，并获得部门“金网络”的殊荣。</p>\n<h3 id=\"CodeCT项目\"><a href=\"#CodeCT项目\" class=\"headerlink\" title=\"CodeCT项目\"></a>CodeCT项目</h3><p>我在此项目中主要完成结果的图表展示功能开发。使用java自带的SAX来将java的对象转换成XML，在半天的时间内高效完成图表的展示功能开发，并且将代码形成模式，利于后续为维护和扩展。超出原始的一周工作量估计，并且实现的机制受到之后维护的兄弟一致好评。CodeCT工具最终也获得了“固网好工具”的称号。</p>\n<h3 id=\"VDF一期OTDR算法增强项目\"><a href=\"#VDF一期OTDR算法增强项目\" class=\"headerlink\" title=\"VDF一期OTDR算法增强项目\"></a>VDF一期OTDR算法增强项目</h3><p>我在此项目中主要担任双端测试的结果合并算法逻辑实现，与另外两名同事配合。过程中我积极与算法SE沟通算法规格的细节，将算法实现的风险提前暴露，最终完成VDF一期的交付，得到一线客户的认同。</p>\n<h3 id=\"MatchOnu项目\"><a href=\"#MatchOnu项目\" class=\"headerlink\" title=\"MatchOnu项目\"></a>MatchOnu项目</h3><p>我在此项目中独立完成了MatchONU的算法编写。项目中我尝试了学习JDK的模板方法抽象了算法中使用到的排列组合逻辑，使得这部分复杂逻辑可以独立与业务逻辑得到测试用例的验证，最终在两周的时间内完成了算法的实现。</p>\n<h3 id=\"Vectoring运维保障工具项目\"><a href=\"#Vectoring运维保障工具项目\" class=\"headerlink\" title=\"Vectoring运维保障工具项目\"></a>Vectoring运维保障工具项目</h3><p>我在此项目中使用SWT独立完成用户界面的开发，项目中我克服了对SWT框架不熟、java多线程、SQLite读写性能瓶颈等诸多困难，最终在与项目组SE和其余同事讨论以及在自己的研究下，在3周内完成界面开发，并获得了产品一线运维人员的好评。过程中在数据库的处理上使用了java中的反射高效完成了数据库表到对象的转换，兼顾读写速度的同时还减少了开发的工作量，获得同事的认可。</p>\n<hr>\n<h1 id=\"开源项目和作品\"><a href=\"#开源项目和作品\" class=\"headerlink\" title=\"开源项目和作品\"></a>开源项目和作品</h1><p>初出茅庐，学艺尚浅，所以工作之余将工作中或者学习中的一些心得和笔记用一些小的项目记录下来。</p>\n<h2 id=\"开源项目\"><a href=\"#开源项目\" class=\"headerlink\" title=\"开源项目\"></a>开源项目</h2><ul>\n<li><a href=\"https://github.com/aiziyuer/CurveLibrary\">CurveLibrary</a>:用于学习Maven做项目管理的web项目</li>\n<li><a href=\"https://github.com/aiziyuer/Signorina\">Signorina</a>:学习SWT和Spring的AOP而做的客户端项目</li>\n</ul>\n<h2 id=\"技术文章\"><a href=\"#技术文章\" class=\"headerlink\" title=\"技术文章\"></a>技术文章</h2><ul>\n<li><a href=\"http://blog.aiziyuer.com/2015/05/28/%E7%BF%BB%E9%A1%B5%E6%95%88%E6%9E%9C%E6%A8%A1%E6%8B%9F.html\">翻页效果模拟</a></li>\n<li><a href=\"http://blog.aiziyuer.com/2015/06/18/Tomcat%E6%94%AF%E6%8C%81%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81.html\">Tomcat支持双向认证</a></li>\n</ul>\n<h1 id=\"技能清单\"><a href=\"#技能清单\" class=\"headerlink\" title=\"技能清单\"></a>技能清单</h1><p>以下均为我熟练使用的技能</p>\n<ul>\n<li>Web开发：JavaScript</li>\n<li>Web框架：Struts&#x2F;Spring</li>\n<li>前端工具：Grunt&#x2F;SaSS&#x2F;</li>\n<li>数据库相关：MySQL&#x2F;SQLite&#x2F;Oracle</li>\n<li>版本管理、文档和自动化部署工具：Svn&#x2F;Git&#x2F;Maven</li>\n<li>语言工具类：正则表达式</li>\n</ul>\n<p>一下是我熟悉的技能</p>\n<ul>\n<li>语言类：C++&#x2F;Ruby&#x2F;Qt&#x2F;Shell</li>\n</ul>\n<hr>\n<h1 id=\"致谢\"><a href=\"#致谢\" class=\"headerlink\" title=\"致谢\"></a>致谢</h1><p>感谢您花时间阅读我的简历，期待能有机会和您共事。</p>\n"},{"layout":"post","title":"Superuser编译","published":0,"_content":"\n### 生成密钥\n\n`keytool -genkey -keystore ~/android.keystore -dname \"CN=Moss, OU=Moss, O=Moss, L=Xi'an, ST=Shanxi, C=CN\" -validity 36500 -storetype jks -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass android -storepass android -alias android`","source":"_posts/life/2015-09-25-superuser编译.md","raw":"---\nlayout: post\ntitle: Superuser编译\ncategories: [生活]\ntags: [技术, android]\npublished: False\n\n---\n\n### 生成密钥\n\n`keytool -genkey -keystore ~/android.keystore -dname \"CN=Moss, OU=Moss, O=Moss, L=Xi'an, ST=Shanxi, C=CN\" -validity 36500 -storetype jks -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass android -storepass android -alias android`","slug":"life/2015-09-25-superuser编译","date":"2025-03-22T11:29:07.653Z","updated":"2025-03-22T11:29:07.653Z","comments":1,"photos":[],"_id":"cm8k4mbdz000nq69dhn262u8v","content":"<h3 id=\"生成密钥\"><a href=\"#生成密钥\" class=\"headerlink\" title=\"生成密钥\"></a>生成密钥</h3><p><code>keytool -genkey -keystore ~/android.keystore -dname &quot;CN=Moss, OU=Moss, O=Moss, L=Xi&#39;an, ST=Shanxi, C=CN&quot; -validity 36500 -storetype jks -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass android -storepass android -alias android</code></p>\n","excerpt":"","more":"<h3 id=\"生成密钥\"><a href=\"#生成密钥\" class=\"headerlink\" title=\"生成密钥\"></a>生成密钥</h3><p><code>keytool -genkey -keystore ~/android.keystore -dname &quot;CN=Moss, OU=Moss, O=Moss, L=Xi&#39;an, ST=Shanxi, C=CN&quot; -validity 36500 -storetype jks -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass android -storepass android -alias android</code></p>\n"},{"layout":"post","title":"gulp学习笔记","published":1,"_content":"\n## 背景说明\n\n我的博客自14年以来更新非常缓慢,想了一下原因,主要前端这块的接触实在太少,所以每次想美化一下博客,\n或者给博客增加一些小功能的时候非常痛苦,所以准备用工程化的理念来对博客进行管理.\n\n\n## Gulp介绍\n\ngulp我的理解是, 使用npm作为类库管理, 但是使用js这种灵活的脚本来完成任务的编写,而且最吸引我的是,\n她是基于流的, 所以给我的最大感受就是, 刚开始学习有些困难, 但是弄明白一个之后就一通百通了.\n\n### 使用插件介绍\n\n``` yaml\ngulp-load-plugins: 以驼峰访问的方式访问以gulp开头的插件\ngulp-util: 日志啊什么的\ngulp-sass: 用来编译sass为css\ngulp-filter: 过滤器\ngulp-print: 用于输入管道的中间文件\ngulp-concat: 用于拼接文件\n\n```\n\n\n### gulp脚本重构\n\n- [x] 第一次重构, 将`config.json`改写成`config.js`, 是的配置的编写更加自由\n- [x] 第二次重构, 将gulp的task根据功能分成不同的文件, 便于管理和区分","source":"_posts/life/2016-07-10-gulp-work-study.markdown","raw":"---\nlayout: post\ntitle: gulp学习笔记\ncategories: [生活]\ntags: [nodejs,自动化]\npublished: True\n---\n\n## 背景说明\n\n我的博客自14年以来更新非常缓慢,想了一下原因,主要前端这块的接触实在太少,所以每次想美化一下博客,\n或者给博客增加一些小功能的时候非常痛苦,所以准备用工程化的理念来对博客进行管理.\n\n\n## Gulp介绍\n\ngulp我的理解是, 使用npm作为类库管理, 但是使用js这种灵活的脚本来完成任务的编写,而且最吸引我的是,\n她是基于流的, 所以给我的最大感受就是, 刚开始学习有些困难, 但是弄明白一个之后就一通百通了.\n\n### 使用插件介绍\n\n``` yaml\ngulp-load-plugins: 以驼峰访问的方式访问以gulp开头的插件\ngulp-util: 日志啊什么的\ngulp-sass: 用来编译sass为css\ngulp-filter: 过滤器\ngulp-print: 用于输入管道的中间文件\ngulp-concat: 用于拼接文件\n\n```\n\n\n### gulp脚本重构\n\n- [x] 第一次重构, 将`config.json`改写成`config.js`, 是的配置的编写更加自由\n- [x] 第二次重构, 将gulp的task根据功能分成不同的文件, 便于管理和区分","slug":"life/2016-07-10-gulp-work-study","date":"2025-03-22T11:29:07.653Z","updated":"2025-03-22T11:29:07.653Z","comments":1,"photos":[],"_id":"cm8k4mbe0000qq69dhmck4qqc","content":"<h2 id=\"背景说明\"><a href=\"#背景说明\" class=\"headerlink\" title=\"背景说明\"></a>背景说明</h2><p>我的博客自14年以来更新非常缓慢,想了一下原因,主要前端这块的接触实在太少,所以每次想美化一下博客,<br>或者给博客增加一些小功能的时候非常痛苦,所以准备用工程化的理念来对博客进行管理.</p>\n<h2 id=\"Gulp介绍\"><a href=\"#Gulp介绍\" class=\"headerlink\" title=\"Gulp介绍\"></a>Gulp介绍</h2><p>gulp我的理解是, 使用npm作为类库管理, 但是使用js这种灵活的脚本来完成任务的编写,而且最吸引我的是,<br>她是基于流的, 所以给我的最大感受就是, 刚开始学习有些困难, 但是弄明白一个之后就一通百通了.</p>\n<h3 id=\"使用插件介绍\"><a href=\"#使用插件介绍\" class=\"headerlink\" title=\"使用插件介绍\"></a>使用插件介绍</h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">gulp-load-plugins:</span> <span class=\"string\">以驼峰访问的方式访问以gulp开头的插件</span></span><br><span class=\"line\"><span class=\"attr\">gulp-util:</span> <span class=\"string\">日志啊什么的</span></span><br><span class=\"line\"><span class=\"attr\">gulp-sass:</span> <span class=\"string\">用来编译sass为css</span></span><br><span class=\"line\"><span class=\"attr\">gulp-filter:</span> <span class=\"string\">过滤器</span></span><br><span class=\"line\"><span class=\"attr\">gulp-print:</span> <span class=\"string\">用于输入管道的中间文件</span></span><br><span class=\"line\"><span class=\"attr\">gulp-concat:</span> <span class=\"string\">用于拼接文件</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"gulp脚本重构\"><a href=\"#gulp脚本重构\" class=\"headerlink\" title=\"gulp脚本重构\"></a>gulp脚本重构</h3><ul>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 第一次重构, 将<code>config.json</code>改写成<code>config.js</code>, 是的配置的编写更加自由</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 第二次重构, 将gulp的task根据功能分成不同的文件, 便于管理和区分</li>\n</ul>\n","excerpt":"","more":"<h2 id=\"背景说明\"><a href=\"#背景说明\" class=\"headerlink\" title=\"背景说明\"></a>背景说明</h2><p>我的博客自14年以来更新非常缓慢,想了一下原因,主要前端这块的接触实在太少,所以每次想美化一下博客,<br>或者给博客增加一些小功能的时候非常痛苦,所以准备用工程化的理念来对博客进行管理.</p>\n<h2 id=\"Gulp介绍\"><a href=\"#Gulp介绍\" class=\"headerlink\" title=\"Gulp介绍\"></a>Gulp介绍</h2><p>gulp我的理解是, 使用npm作为类库管理, 但是使用js这种灵活的脚本来完成任务的编写,而且最吸引我的是,<br>她是基于流的, 所以给我的最大感受就是, 刚开始学习有些困难, 但是弄明白一个之后就一通百通了.</p>\n<h3 id=\"使用插件介绍\"><a href=\"#使用插件介绍\" class=\"headerlink\" title=\"使用插件介绍\"></a>使用插件介绍</h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">gulp-load-plugins:</span> <span class=\"string\">以驼峰访问的方式访问以gulp开头的插件</span></span><br><span class=\"line\"><span class=\"attr\">gulp-util:</span> <span class=\"string\">日志啊什么的</span></span><br><span class=\"line\"><span class=\"attr\">gulp-sass:</span> <span class=\"string\">用来编译sass为css</span></span><br><span class=\"line\"><span class=\"attr\">gulp-filter:</span> <span class=\"string\">过滤器</span></span><br><span class=\"line\"><span class=\"attr\">gulp-print:</span> <span class=\"string\">用于输入管道的中间文件</span></span><br><span class=\"line\"><span class=\"attr\">gulp-concat:</span> <span class=\"string\">用于拼接文件</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"gulp脚本重构\"><a href=\"#gulp脚本重构\" class=\"headerlink\" title=\"gulp脚本重构\"></a>gulp脚本重构</h3><ul>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 第一次重构, 将<code>config.json</code>改写成<code>config.js</code>, 是的配置的编写更加自由</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 第二次重构, 将gulp的task根据功能分成不同的文件, 便于管理和区分</li>\n</ul>\n"},{"title":"如何不换PC使用多个github账号","layout":"post","published":1,"_content":"\n\n最近博客上的几个类库的cdn服务都在国外,速度很慢,想来想去,最好自己弄个cdn的仓库做服务,所以就需要有两个\n`github`的账号. 本来用起来没有问题, 但是在`git push`的时候发现没法`push`,\n`ssh key`在github上不能重复. 么有办法了, 不可能\n\n\n## 原理\n\n相当于ssh的时候, 让ssh根据hosts的url来选择不同的密钥文件(当然你也可以设置不同仓库使用不同邮箱提交),\n懒人配置如下:\n\n``` bash\ncd ~/.ssh/\ntouch config\n```\n\n```bash\n# 默认就是不配置, 走默认的密钥文件\nHost github.com\nHostName github.com\nUser git\nIdentityFile ~/.ssh/id_rsa\n\n# 第二个选择, 如果你的仓库url是形如git@two.github.com:hello/hello.git就会默认走这个配置\nHost two.github.com  # 前缀名可以任意设置\nHostName github.com\nUser git\nIdentityFile ~/.ssh/id_rsa1\n\n```\n\n## 测试一下\n\n每个密钥文件都是`ssh-keygen -t rsa -b 4096 -C \"ziyu0123456789@gmail.com\"`这样生成的, \n而生成的公钥又会配置到`github`上面, 所以我们如果使用了不同的密钥文件, github应该可以通过密钥的不同\n区分出我们来.以下是我的测试及回显:\n\n``` bash\nssh -T git@github.com\n#Hi aiziyuer! You've successfully authenticated, but GitHub does not provide shell access.\n# 上面可以看出, github已经认出我是aiziyuer, 说明我使用的是默认密钥\n\nssh -T git@two.github.com\n#Hi aiziyuer-cdn! You've successfully authenticated, but GitHub does not provide shell access.\n# 上面识别出我是aiziyuer-cdn, 说明我使用的第二密钥\n```\n\n## 设置仓库使用第二密钥\n\n因为我的默认的仓库地址是`git@github.com:aiziyuer-cdn/aiziyuer-cdn.github.io.git`, 所以修改如下:\n\n``` bash\ngit remote rm origin\ngit remote add origin git@two.github.com::aiziyuer-cdn/aiziyuer-cdn.github.io.git\n```","source":"_posts/life/2016-07-13-git-study.markdown","raw":"---\ntitle: 如何不换PC使用多个github账号\nlayout: post\ncategories: [生活]\ntags: [git, ssh]\npublished: True\n---\n\n\n最近博客上的几个类库的cdn服务都在国外,速度很慢,想来想去,最好自己弄个cdn的仓库做服务,所以就需要有两个\n`github`的账号. 本来用起来没有问题, 但是在`git push`的时候发现没法`push`,\n`ssh key`在github上不能重复. 么有办法了, 不可能\n\n\n## 原理\n\n相当于ssh的时候, 让ssh根据hosts的url来选择不同的密钥文件(当然你也可以设置不同仓库使用不同邮箱提交),\n懒人配置如下:\n\n``` bash\ncd ~/.ssh/\ntouch config\n```\n\n```bash\n# 默认就是不配置, 走默认的密钥文件\nHost github.com\nHostName github.com\nUser git\nIdentityFile ~/.ssh/id_rsa\n\n# 第二个选择, 如果你的仓库url是形如git@two.github.com:hello/hello.git就会默认走这个配置\nHost two.github.com  # 前缀名可以任意设置\nHostName github.com\nUser git\nIdentityFile ~/.ssh/id_rsa1\n\n```\n\n## 测试一下\n\n每个密钥文件都是`ssh-keygen -t rsa -b 4096 -C \"ziyu0123456789@gmail.com\"`这样生成的, \n而生成的公钥又会配置到`github`上面, 所以我们如果使用了不同的密钥文件, github应该可以通过密钥的不同\n区分出我们来.以下是我的测试及回显:\n\n``` bash\nssh -T git@github.com\n#Hi aiziyuer! You've successfully authenticated, but GitHub does not provide shell access.\n# 上面可以看出, github已经认出我是aiziyuer, 说明我使用的是默认密钥\n\nssh -T git@two.github.com\n#Hi aiziyuer-cdn! You've successfully authenticated, but GitHub does not provide shell access.\n# 上面识别出我是aiziyuer-cdn, 说明我使用的第二密钥\n```\n\n## 设置仓库使用第二密钥\n\n因为我的默认的仓库地址是`git@github.com:aiziyuer-cdn/aiziyuer-cdn.github.io.git`, 所以修改如下:\n\n``` bash\ngit remote rm origin\ngit remote add origin git@two.github.com::aiziyuer-cdn/aiziyuer-cdn.github.io.git\n```","slug":"life/2016-07-13-git-study","date":"2025-03-22T11:29:07.653Z","updated":"2025-03-22T11:29:07.654Z","comments":1,"photos":[],"_id":"cm8k4mbe1000uq69dbvks2h3z","content":"<p>最近博客上的几个类库的cdn服务都在国外,速度很慢,想来想去,最好自己弄个cdn的仓库做服务,所以就需要有两个<br><code>github</code>的账号. 本来用起来没有问题, 但是在<code>git push</code>的时候发现没法<code>push</code>,<br><code>ssh key</code>在github上不能重复. 么有办法了, 不可能</p>\n<h2 id=\"原理\"><a href=\"#原理\" class=\"headerlink\" title=\"原理\"></a>原理</h2><p>相当于ssh的时候, 让ssh根据hosts的url来选择不同的密钥文件(当然你也可以设置不同仓库使用不同邮箱提交),<br>懒人配置如下:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/.ssh/</span><br><span class=\"line\"><span class=\"built_in\">touch</span> config</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 默认就是不配置, 走默认的密钥文件</span></span><br><span class=\"line\">Host github.com</span><br><span class=\"line\">HostName github.com</span><br><span class=\"line\">User git</span><br><span class=\"line\">IdentityFile ~/.ssh/id_rsa</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 第二个选择, 如果你的仓库url是形如git@two.github.com:hello/hello.git就会默认走这个配置</span></span><br><span class=\"line\">Host two.github.com  <span class=\"comment\"># 前缀名可以任意设置</span></span><br><span class=\"line\">HostName github.com</span><br><span class=\"line\">User git</span><br><span class=\"line\">IdentityFile ~/.ssh/id_rsa1</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"测试一下\"><a href=\"#测试一下\" class=\"headerlink\" title=\"测试一下\"></a>测试一下</h2><p>每个密钥文件都是<code>ssh-keygen -t rsa -b 4096 -C &quot;ziyu0123456789@gmail.com&quot;</code>这样生成的,<br>而生成的公钥又会配置到<code>github</code>上面, 所以我们如果使用了不同的密钥文件, github应该可以通过密钥的不同<br>区分出我们来.以下是我的测试及回显:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh -T git@github.com</span><br><span class=\"line\"><span class=\"comment\">#Hi aiziyuer! You&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span></span><br><span class=\"line\"><span class=\"comment\"># 上面可以看出, github已经认出我是aiziyuer, 说明我使用的是默认密钥</span></span><br><span class=\"line\"></span><br><span class=\"line\">ssh -T git@two.github.com</span><br><span class=\"line\"><span class=\"comment\">#Hi aiziyuer-cdn! You&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span></span><br><span class=\"line\"><span class=\"comment\"># 上面识别出我是aiziyuer-cdn, 说明我使用的第二密钥</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"设置仓库使用第二密钥\"><a href=\"#设置仓库使用第二密钥\" class=\"headerlink\" title=\"设置仓库使用第二密钥\"></a>设置仓库使用第二密钥</h2><p>因为我的默认的仓库地址是<code>git@github.com:aiziyuer-cdn/aiziyuer-cdn.github.io.git</code>, 所以修改如下:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote <span class=\"built_in\">rm</span> origin</span><br><span class=\"line\">git remote add origin git@two.github.com::aiziyuer-cdn/aiziyuer-cdn.github.io.git</span><br></pre></td></tr></table></figure>","excerpt":"","more":"<p>最近博客上的几个类库的cdn服务都在国外,速度很慢,想来想去,最好自己弄个cdn的仓库做服务,所以就需要有两个<br><code>github</code>的账号. 本来用起来没有问题, 但是在<code>git push</code>的时候发现没法<code>push</code>,<br><code>ssh key</code>在github上不能重复. 么有办法了, 不可能</p>\n<h2 id=\"原理\"><a href=\"#原理\" class=\"headerlink\" title=\"原理\"></a>原理</h2><p>相当于ssh的时候, 让ssh根据hosts的url来选择不同的密钥文件(当然你也可以设置不同仓库使用不同邮箱提交),<br>懒人配置如下:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/.ssh/</span><br><span class=\"line\"><span class=\"built_in\">touch</span> config</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 默认就是不配置, 走默认的密钥文件</span></span><br><span class=\"line\">Host github.com</span><br><span class=\"line\">HostName github.com</span><br><span class=\"line\">User git</span><br><span class=\"line\">IdentityFile ~/.ssh/id_rsa</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 第二个选择, 如果你的仓库url是形如git@two.github.com:hello/hello.git就会默认走这个配置</span></span><br><span class=\"line\">Host two.github.com  <span class=\"comment\"># 前缀名可以任意设置</span></span><br><span class=\"line\">HostName github.com</span><br><span class=\"line\">User git</span><br><span class=\"line\">IdentityFile ~/.ssh/id_rsa1</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"测试一下\"><a href=\"#测试一下\" class=\"headerlink\" title=\"测试一下\"></a>测试一下</h2><p>每个密钥文件都是<code>ssh-keygen -t rsa -b 4096 -C &quot;ziyu0123456789@gmail.com&quot;</code>这样生成的,<br>而生成的公钥又会配置到<code>github</code>上面, 所以我们如果使用了不同的密钥文件, github应该可以通过密钥的不同<br>区分出我们来.以下是我的测试及回显:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh -T git@github.com</span><br><span class=\"line\"><span class=\"comment\">#Hi aiziyuer! You&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span></span><br><span class=\"line\"><span class=\"comment\"># 上面可以看出, github已经认出我是aiziyuer, 说明我使用的是默认密钥</span></span><br><span class=\"line\"></span><br><span class=\"line\">ssh -T git@two.github.com</span><br><span class=\"line\"><span class=\"comment\">#Hi aiziyuer-cdn! You&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span></span><br><span class=\"line\"><span class=\"comment\"># 上面识别出我是aiziyuer-cdn, 说明我使用的第二密钥</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"设置仓库使用第二密钥\"><a href=\"#设置仓库使用第二密钥\" class=\"headerlink\" title=\"设置仓库使用第二密钥\"></a>设置仓库使用第二密钥</h2><p>因为我的默认的仓库地址是<code>git@github.com:aiziyuer-cdn/aiziyuer-cdn.github.io.git</code>, 所以修改如下:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote <span class=\"built_in\">rm</span> origin</span><br><span class=\"line\">git remote add origin git@two.github.com::aiziyuer-cdn/aiziyuer-cdn.github.io.git</span><br></pre></td></tr></table></figure>"},{"title":"好用的Xposed模块推荐","layout":"post","published":1,"_content":"\n这里介绍几款我日常中使用频率最高的几个模块, 我是个宁缺毋滥的人, 相信我的选择多少也能帮到写你.\n\n## 应用罗列\n\n### 居家必备的\n\n- `绿色守护` -- 绿色化应用, 阻止一些应用后台偷偷吃内存, 这个东西我觉得是非常有用, 特别是开了捐赠版之后更是无敌\n-  X 状态栏农历日期(`X statusbar Lunar Date`) -- 中国人基本上都需要, 它可以让你在下拉系统顶栏时看到日期中的农历\n-  GravityBox -- 这是个很多小工具的集合体, 类似Tweak, 很多实用的功能: 一键清历史任务(我有强迫真), 任务列表顶栏显示可用内存等\n\n### 杀手级的\n\n-  阻止运行(`Prevent Running`) -- 进制程序后台运行, 只要程序不再最近任务列表里就无法后台运行, 非常好奇它怎么实现的\n-  `BootManager` -- 什么, 你的应用随开机启动, 我好久没有听说过了\n-  `RootCloak` -- 有些时候你虽然root了, 但就是不想让app知道,譬如:打卡机, 网银什么的\n-  模拟位置(`fakegps`) -- 模拟GPS的位置,这个应用我真的尝试过, 确实是有效的, 谷歌地图和微信都是支持的(就是百度有些问题)\n\n### 非常实用的\n\n- `Screenshot Delay Remover` -- 截屏的时候让我等几秒是几个意思, 效率去哪里了\n- `WiFi Password` -- 我家的`wifi`是`MAC`地址白名单的, 所以密码什么的不要搞得那么神秘, 我就想看连接密码的明文\n- `Burnt Toast` -- 你有没有莫名其妙在手机底部看到一个小的弹框提示, 然后过几秒消失了,你虽然知道有问题却不知道是哪个应用的\n\n\n## 遗留的问题\n\n现在经过调校, 手机基本上按照我的思路在工作, 所有的app基本我不关心就没法向我推送通知(真的很爽, 每次看到还有1G内存就无比开心).\n但是, 新浪和网银的Light等应用有个周期启动的功能不知道是怎么实现的, 貌似每天晚上11点左右(时间点很固定)会成功向我推送消息,\n令人发指, 继续折腾中~ing.","source":"_posts/mobile/2016-07-15-android-xposed-module-introduce.markdown","raw":"---\ntitle: 好用的Xposed模块推荐\nlayout: post\ncategories: [移动]\ntags: [android,生活,效率]\npublished: True\n---\n\n这里介绍几款我日常中使用频率最高的几个模块, 我是个宁缺毋滥的人, 相信我的选择多少也能帮到写你.\n\n## 应用罗列\n\n### 居家必备的\n\n- `绿色守护` -- 绿色化应用, 阻止一些应用后台偷偷吃内存, 这个东西我觉得是非常有用, 特别是开了捐赠版之后更是无敌\n-  X 状态栏农历日期(`X statusbar Lunar Date`) -- 中国人基本上都需要, 它可以让你在下拉系统顶栏时看到日期中的农历\n-  GravityBox -- 这是个很多小工具的集合体, 类似Tweak, 很多实用的功能: 一键清历史任务(我有强迫真), 任务列表顶栏显示可用内存等\n\n### 杀手级的\n\n-  阻止运行(`Prevent Running`) -- 进制程序后台运行, 只要程序不再最近任务列表里就无法后台运行, 非常好奇它怎么实现的\n-  `BootManager` -- 什么, 你的应用随开机启动, 我好久没有听说过了\n-  `RootCloak` -- 有些时候你虽然root了, 但就是不想让app知道,譬如:打卡机, 网银什么的\n-  模拟位置(`fakegps`) -- 模拟GPS的位置,这个应用我真的尝试过, 确实是有效的, 谷歌地图和微信都是支持的(就是百度有些问题)\n\n### 非常实用的\n\n- `Screenshot Delay Remover` -- 截屏的时候让我等几秒是几个意思, 效率去哪里了\n- `WiFi Password` -- 我家的`wifi`是`MAC`地址白名单的, 所以密码什么的不要搞得那么神秘, 我就想看连接密码的明文\n- `Burnt Toast` -- 你有没有莫名其妙在手机底部看到一个小的弹框提示, 然后过几秒消失了,你虽然知道有问题却不知道是哪个应用的\n\n\n## 遗留的问题\n\n现在经过调校, 手机基本上按照我的思路在工作, 所有的app基本我不关心就没法向我推送通知(真的很爽, 每次看到还有1G内存就无比开心).\n但是, 新浪和网银的Light等应用有个周期启动的功能不知道是怎么实现的, 貌似每天晚上11点左右(时间点很固定)会成功向我推送消息,\n令人发指, 继续折腾中~ing.","slug":"mobile/2016-07-15-android-xposed-module-introduce","date":"2025-03-22T11:29:07.734Z","updated":"2025-03-22T11:29:07.734Z","comments":1,"photos":[],"_id":"cm8k4mbe3000xq69d1lygdvfr","content":"<p>这里介绍几款我日常中使用频率最高的几个模块, 我是个宁缺毋滥的人, 相信我的选择多少也能帮到写你.</p>\n<h2 id=\"应用罗列\"><a href=\"#应用罗列\" class=\"headerlink\" title=\"应用罗列\"></a>应用罗列</h2><h3 id=\"居家必备的\"><a href=\"#居家必备的\" class=\"headerlink\" title=\"居家必备的\"></a>居家必备的</h3><ul>\n<li><code>绿色守护</code> – 绿色化应用, 阻止一些应用后台偷偷吃内存, 这个东西我觉得是非常有用, 特别是开了捐赠版之后更是无敌</li>\n<li>X 状态栏农历日期(<code>X statusbar Lunar Date</code>) – 中国人基本上都需要, 它可以让你在下拉系统顶栏时看到日期中的农历</li>\n<li>GravityBox – 这是个很多小工具的集合体, 类似Tweak, 很多实用的功能: 一键清历史任务(我有强迫真), 任务列表顶栏显示可用内存等</li>\n</ul>\n<h3 id=\"杀手级的\"><a href=\"#杀手级的\" class=\"headerlink\" title=\"杀手级的\"></a>杀手级的</h3><ul>\n<li>阻止运行(<code>Prevent Running</code>) – 进制程序后台运行, 只要程序不再最近任务列表里就无法后台运行, 非常好奇它怎么实现的</li>\n<li><code>BootManager</code> – 什么, 你的应用随开机启动, 我好久没有听说过了</li>\n<li><code>RootCloak</code> – 有些时候你虽然root了, 但就是不想让app知道,譬如:打卡机, 网银什么的</li>\n<li>模拟位置(<code>fakegps</code>) – 模拟GPS的位置,这个应用我真的尝试过, 确实是有效的, 谷歌地图和微信都是支持的(就是百度有些问题)</li>\n</ul>\n<h3 id=\"非常实用的\"><a href=\"#非常实用的\" class=\"headerlink\" title=\"非常实用的\"></a>非常实用的</h3><ul>\n<li><code>Screenshot Delay Remover</code> – 截屏的时候让我等几秒是几个意思, 效率去哪里了</li>\n<li><code>WiFi Password</code> – 我家的<code>wifi</code>是<code>MAC</code>地址白名单的, 所以密码什么的不要搞得那么神秘, 我就想看连接密码的明文</li>\n<li><code>Burnt Toast</code> – 你有没有莫名其妙在手机底部看到一个小的弹框提示, 然后过几秒消失了,你虽然知道有问题却不知道是哪个应用的</li>\n</ul>\n<h2 id=\"遗留的问题\"><a href=\"#遗留的问题\" class=\"headerlink\" title=\"遗留的问题\"></a>遗留的问题</h2><p>现在经过调校, 手机基本上按照我的思路在工作, 所有的app基本我不关心就没法向我推送通知(真的很爽, 每次看到还有1G内存就无比开心).<br>但是, 新浪和网银的Light等应用有个周期启动的功能不知道是怎么实现的, 貌似每天晚上11点左右(时间点很固定)会成功向我推送消息,<br>令人发指, 继续折腾中~ing.</p>\n","excerpt":"","more":"<p>这里介绍几款我日常中使用频率最高的几个模块, 我是个宁缺毋滥的人, 相信我的选择多少也能帮到写你.</p>\n<h2 id=\"应用罗列\"><a href=\"#应用罗列\" class=\"headerlink\" title=\"应用罗列\"></a>应用罗列</h2><h3 id=\"居家必备的\"><a href=\"#居家必备的\" class=\"headerlink\" title=\"居家必备的\"></a>居家必备的</h3><ul>\n<li><code>绿色守护</code> – 绿色化应用, 阻止一些应用后台偷偷吃内存, 这个东西我觉得是非常有用, 特别是开了捐赠版之后更是无敌</li>\n<li>X 状态栏农历日期(<code>X statusbar Lunar Date</code>) – 中国人基本上都需要, 它可以让你在下拉系统顶栏时看到日期中的农历</li>\n<li>GravityBox – 这是个很多小工具的集合体, 类似Tweak, 很多实用的功能: 一键清历史任务(我有强迫真), 任务列表顶栏显示可用内存等</li>\n</ul>\n<h3 id=\"杀手级的\"><a href=\"#杀手级的\" class=\"headerlink\" title=\"杀手级的\"></a>杀手级的</h3><ul>\n<li>阻止运行(<code>Prevent Running</code>) – 进制程序后台运行, 只要程序不再最近任务列表里就无法后台运行, 非常好奇它怎么实现的</li>\n<li><code>BootManager</code> – 什么, 你的应用随开机启动, 我好久没有听说过了</li>\n<li><code>RootCloak</code> – 有些时候你虽然root了, 但就是不想让app知道,譬如:打卡机, 网银什么的</li>\n<li>模拟位置(<code>fakegps</code>) – 模拟GPS的位置,这个应用我真的尝试过, 确实是有效的, 谷歌地图和微信都是支持的(就是百度有些问题)</li>\n</ul>\n<h3 id=\"非常实用的\"><a href=\"#非常实用的\" class=\"headerlink\" title=\"非常实用的\"></a>非常实用的</h3><ul>\n<li><code>Screenshot Delay Remover</code> – 截屏的时候让我等几秒是几个意思, 效率去哪里了</li>\n<li><code>WiFi Password</code> – 我家的<code>wifi</code>是<code>MAC</code>地址白名单的, 所以密码什么的不要搞得那么神秘, 我就想看连接密码的明文</li>\n<li><code>Burnt Toast</code> – 你有没有莫名其妙在手机底部看到一个小的弹框提示, 然后过几秒消失了,你虽然知道有问题却不知道是哪个应用的</li>\n</ul>\n<h2 id=\"遗留的问题\"><a href=\"#遗留的问题\" class=\"headerlink\" title=\"遗留的问题\"></a>遗留的问题</h2><p>现在经过调校, 手机基本上按照我的思路在工作, 所有的app基本我不关心就没法向我推送通知(真的很爽, 每次看到还有1G内存就无比开心).<br>但是, 新浪和网银的Light等应用有个周期启动的功能不知道是怎么实现的, 貌似每天晚上11点左右(时间点很固定)会成功向我推送消息,<br>令人发指, 继续折腾中~ing.</p>\n"},{"title":"Xposed框架安装","layout":"post","published":1,"_content":"\n今天早晨醒来, 手机显示有了新的操作系统更新, 所以晚上照旧 下载`Factory`固件 ->\n线刷 -> 检查`recovery`包 -> 恢复`root` -> 恢复`xposed`框架\n\n以上的过程对于我现在来说比较熟悉的情况下大概需要花费我1-2小时的时间\n\n## 为什么选择全部手工?\n\n其实我也是一个懒人, 所以我肯定写过一些脚本来自动做, 目前这个脚本已经可以自动去官网上自动下载最新的fatory固件、\n去除`flash-all.sh`中的`-w`选项、并且通知我的手机进入`bootloader`刷机模式,但是现在有些比较蛋疼的是, 刷完后系统会自动\n重启，然后应用的优化会非常耗时(不算xposed都有77个), 所以后面的`recovery`和`xposed`就比较难弄了, 所以只能先\"手动\"了\n\n## Plan\n\n作为21世纪有思想的新青年, 自动化是必然的事情, 所以在我没有想到解决上面的问题前, 先把刷机固定的步骤记录下来,\n方便后面自动脚本的编写.\n\n- [x] 固化刷机步骤\n- [ ] 脚本自动刷机\n\n## 固定刷机步骤\n\n### 前提\n\n- 你需要一台原生android系统的手机(Nexus)\n- 解锁OEM锁(开发者模式里面有)\n- 解锁bootloader(开机会比较可怕,无所谓)`fastboot flashing unlock`\n\n### 准备\n\n这里考虑的是万能方法, 所以必然是线刷Factory固件了, 你需要有以下几样东西, 每次都需要检查是否是最新版本:\n\n- [Nexus Factory Images](https://developers.google.com/android/nexus/images)不仅可以刷机用还能救转(unlock bootloader, oem unlock)\n- [TWRP](https://twrp.me/)第三方的恢复镜像,因为谷歌官方不支持恢复第三方的东西(`supersu`, `xposed`)\n- [supersu](http://download.chainfire.eu/supersu)root专用,最后`recover`刷进去\n- [Xposed](http://dl-xda.xposed.info/framework/)杀手级应用\n\n### 放入第三方的定制包\n\n`suspersu`和`xposed`两个包基本上都是zip格式的, 因为需要在recovery页面手动刷入, 所以为了避免麻烦, 在刷机前先通过USB拷入手机, 放到一个熟悉的目录,\n后面需要手动进入该目录,所以不要太复杂,放根目录进行了.\n\n\n### 恢复官方工厂镜像\n\n手机开debug模式usb连电脑, 然后解压工厂固件的压缩包, 然后进入解压缩后的目录\n\n```bash\n# 替换掉flash-all中危险的清空数据选项-w\ngsed -i 's/fastboot -w/fastboot/g' flash-all.sh\n\n# 进入bootloader状态\nadb reboot bootloader\n\n# 刷入固件\nsh ./flash-all.sh\n\n# 下面手机会重启, 真的很久, 下次研究研究有没有替换的方法\n\n```\n\n### 刷入`recovery`固件\n\n命令行进入twrp镜像所在目录, 然后命令行运行如下:\n\n```bash\n# 进入bootloader状态\nadb reboot bootloader\n\n# 刷入固件\nfastboot flash recovery twrp-3.0.2-0-angler.img\n\n# 刷入后不会要求重启, 马上进入下面的刷入supersu和exposed\n\n# 进入恢复模式（建议还是硬件操作比较好）\nadb reboot recovery\n```\n\n### 刷入定制的第三方定制包\n\n这一步基本都是手动, 手动就手动吧, 手动安装两个zip的包然后重启.\n\n\n**DONE**","source":"_posts/mobile/2016-07-15-how-to-root-your-android-mobile.markdown","raw":"---\ntitle: Xposed框架安装\nlayout: post\ncategories: [移动]\ntags: [android,生活,效率]\npublished: True\n---\n\n今天早晨醒来, 手机显示有了新的操作系统更新, 所以晚上照旧 下载`Factory`固件 ->\n线刷 -> 检查`recovery`包 -> 恢复`root` -> 恢复`xposed`框架\n\n以上的过程对于我现在来说比较熟悉的情况下大概需要花费我1-2小时的时间\n\n## 为什么选择全部手工?\n\n其实我也是一个懒人, 所以我肯定写过一些脚本来自动做, 目前这个脚本已经可以自动去官网上自动下载最新的fatory固件、\n去除`flash-all.sh`中的`-w`选项、并且通知我的手机进入`bootloader`刷机模式,但是现在有些比较蛋疼的是, 刷完后系统会自动\n重启，然后应用的优化会非常耗时(不算xposed都有77个), 所以后面的`recovery`和`xposed`就比较难弄了, 所以只能先\"手动\"了\n\n## Plan\n\n作为21世纪有思想的新青年, 自动化是必然的事情, 所以在我没有想到解决上面的问题前, 先把刷机固定的步骤记录下来,\n方便后面自动脚本的编写.\n\n- [x] 固化刷机步骤\n- [ ] 脚本自动刷机\n\n## 固定刷机步骤\n\n### 前提\n\n- 你需要一台原生android系统的手机(Nexus)\n- 解锁OEM锁(开发者模式里面有)\n- 解锁bootloader(开机会比较可怕,无所谓)`fastboot flashing unlock`\n\n### 准备\n\n这里考虑的是万能方法, 所以必然是线刷Factory固件了, 你需要有以下几样东西, 每次都需要检查是否是最新版本:\n\n- [Nexus Factory Images](https://developers.google.com/android/nexus/images)不仅可以刷机用还能救转(unlock bootloader, oem unlock)\n- [TWRP](https://twrp.me/)第三方的恢复镜像,因为谷歌官方不支持恢复第三方的东西(`supersu`, `xposed`)\n- [supersu](http://download.chainfire.eu/supersu)root专用,最后`recover`刷进去\n- [Xposed](http://dl-xda.xposed.info/framework/)杀手级应用\n\n### 放入第三方的定制包\n\n`suspersu`和`xposed`两个包基本上都是zip格式的, 因为需要在recovery页面手动刷入, 所以为了避免麻烦, 在刷机前先通过USB拷入手机, 放到一个熟悉的目录,\n后面需要手动进入该目录,所以不要太复杂,放根目录进行了.\n\n\n### 恢复官方工厂镜像\n\n手机开debug模式usb连电脑, 然后解压工厂固件的压缩包, 然后进入解压缩后的目录\n\n```bash\n# 替换掉flash-all中危险的清空数据选项-w\ngsed -i 's/fastboot -w/fastboot/g' flash-all.sh\n\n# 进入bootloader状态\nadb reboot bootloader\n\n# 刷入固件\nsh ./flash-all.sh\n\n# 下面手机会重启, 真的很久, 下次研究研究有没有替换的方法\n\n```\n\n### 刷入`recovery`固件\n\n命令行进入twrp镜像所在目录, 然后命令行运行如下:\n\n```bash\n# 进入bootloader状态\nadb reboot bootloader\n\n# 刷入固件\nfastboot flash recovery twrp-3.0.2-0-angler.img\n\n# 刷入后不会要求重启, 马上进入下面的刷入supersu和exposed\n\n# 进入恢复模式（建议还是硬件操作比较好）\nadb reboot recovery\n```\n\n### 刷入定制的第三方定制包\n\n这一步基本都是手动, 手动就手动吧, 手动安装两个zip的包然后重启.\n\n\n**DONE**","slug":"mobile/2016-07-15-how-to-root-your-android-mobile","date":"2025-03-22T11:29:07.734Z","updated":"2025-03-22T11:29:07.734Z","comments":1,"photos":[],"_id":"cm8k4mbe40010q69d8fox4ijb","content":"<p>今天早晨醒来, 手机显示有了新的操作系统更新, 所以晚上照旧 下载<code>Factory</code>固件 -&gt;<br>线刷 -&gt; 检查<code>recovery</code>包 -&gt; 恢复<code>root</code> -&gt; 恢复<code>xposed</code>框架</p>\n<p>以上的过程对于我现在来说比较熟悉的情况下大概需要花费我1-2小时的时间</p>\n<h2 id=\"为什么选择全部手工\"><a href=\"#为什么选择全部手工\" class=\"headerlink\" title=\"为什么选择全部手工?\"></a>为什么选择全部手工?</h2><p>其实我也是一个懒人, 所以我肯定写过一些脚本来自动做, 目前这个脚本已经可以自动去官网上自动下载最新的fatory固件、<br>去除<code>flash-all.sh</code>中的<code>-w</code>选项、并且通知我的手机进入<code>bootloader</code>刷机模式,但是现在有些比较蛋疼的是, 刷完后系统会自动<br>重启，然后应用的优化会非常耗时(不算xposed都有77个), 所以后面的<code>recovery</code>和<code>xposed</code>就比较难弄了, 所以只能先”手动”了</p>\n<h2 id=\"Plan\"><a href=\"#Plan\" class=\"headerlink\" title=\"Plan\"></a>Plan</h2><p>作为21世纪有思想的新青年, 自动化是必然的事情, 所以在我没有想到解决上面的问题前, 先把刷机固定的步骤记录下来,<br>方便后面自动脚本的编写.</p>\n<ul>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 固化刷机步骤</li>\n<li><input disabled=\"\" type=\"checkbox\"> 脚本自动刷机</li>\n</ul>\n<h2 id=\"固定刷机步骤\"><a href=\"#固定刷机步骤\" class=\"headerlink\" title=\"固定刷机步骤\"></a>固定刷机步骤</h2><h3 id=\"前提\"><a href=\"#前提\" class=\"headerlink\" title=\"前提\"></a>前提</h3><ul>\n<li>你需要一台原生android系统的手机(Nexus)</li>\n<li>解锁OEM锁(开发者模式里面有)</li>\n<li>解锁bootloader(开机会比较可怕,无所谓)<code>fastboot flashing unlock</code></li>\n</ul>\n<h3 id=\"准备\"><a href=\"#准备\" class=\"headerlink\" title=\"准备\"></a>准备</h3><p>这里考虑的是万能方法, 所以必然是线刷Factory固件了, 你需要有以下几样东西, 每次都需要检查是否是最新版本:</p>\n<ul>\n<li><a href=\"https://developers.google.com/android/nexus/images\">Nexus Factory Images</a>不仅可以刷机用还能救转(unlock bootloader, oem unlock)</li>\n<li><a href=\"https://twrp.me/\">TWRP</a>第三方的恢复镜像,因为谷歌官方不支持恢复第三方的东西(<code>supersu</code>, <code>xposed</code>)</li>\n<li><a href=\"http://download.chainfire.eu/supersu\">supersu</a>root专用,最后<code>recover</code>刷进去</li>\n<li><a href=\"http://dl-xda.xposed.info/framework/\">Xposed</a>杀手级应用</li>\n</ul>\n<h3 id=\"放入第三方的定制包\"><a href=\"#放入第三方的定制包\" class=\"headerlink\" title=\"放入第三方的定制包\"></a>放入第三方的定制包</h3><p><code>suspersu</code>和<code>xposed</code>两个包基本上都是zip格式的, 因为需要在recovery页面手动刷入, 所以为了避免麻烦, 在刷机前先通过USB拷入手机, 放到一个熟悉的目录,<br>后面需要手动进入该目录,所以不要太复杂,放根目录进行了.</p>\n<h3 id=\"恢复官方工厂镜像\"><a href=\"#恢复官方工厂镜像\" class=\"headerlink\" title=\"恢复官方工厂镜像\"></a>恢复官方工厂镜像</h3><p>手机开debug模式usb连电脑, 然后解压工厂固件的压缩包, 然后进入解压缩后的目录</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 替换掉flash-all中危险的清空数据选项-w</span></span><br><span class=\"line\">gsed -i <span class=\"string\">&#x27;s/fastboot -w/fastboot/g&#x27;</span> flash-all.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 进入bootloader状态</span></span><br><span class=\"line\">adb reboot bootloader</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 刷入固件</span></span><br><span class=\"line\">sh ./flash-all.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 下面手机会重启, 真的很久, 下次研究研究有没有替换的方法</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"刷入recovery固件\"><a href=\"#刷入recovery固件\" class=\"headerlink\" title=\"刷入recovery固件\"></a>刷入<code>recovery</code>固件</h3><p>命令行进入twrp镜像所在目录, 然后命令行运行如下:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 进入bootloader状态</span></span><br><span class=\"line\">adb reboot bootloader</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 刷入固件</span></span><br><span class=\"line\">fastboot flash recovery twrp-3.0.2-0-angler.img</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 刷入后不会要求重启, 马上进入下面的刷入supersu和exposed</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 进入恢复模式（建议还是硬件操作比较好）</span></span><br><span class=\"line\">adb reboot recovery</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"刷入定制的第三方定制包\"><a href=\"#刷入定制的第三方定制包\" class=\"headerlink\" title=\"刷入定制的第三方定制包\"></a>刷入定制的第三方定制包</h3><p>这一步基本都是手动, 手动就手动吧, 手动安装两个zip的包然后重启.</p>\n<p><strong>DONE</strong></p>\n","excerpt":"","more":"<p>今天早晨醒来, 手机显示有了新的操作系统更新, 所以晚上照旧 下载<code>Factory</code>固件 -&gt;<br>线刷 -&gt; 检查<code>recovery</code>包 -&gt; 恢复<code>root</code> -&gt; 恢复<code>xposed</code>框架</p>\n<p>以上的过程对于我现在来说比较熟悉的情况下大概需要花费我1-2小时的时间</p>\n<h2 id=\"为什么选择全部手工\"><a href=\"#为什么选择全部手工\" class=\"headerlink\" title=\"为什么选择全部手工?\"></a>为什么选择全部手工?</h2><p>其实我也是一个懒人, 所以我肯定写过一些脚本来自动做, 目前这个脚本已经可以自动去官网上自动下载最新的fatory固件、<br>去除<code>flash-all.sh</code>中的<code>-w</code>选项、并且通知我的手机进入<code>bootloader</code>刷机模式,但是现在有些比较蛋疼的是, 刷完后系统会自动<br>重启，然后应用的优化会非常耗时(不算xposed都有77个), 所以后面的<code>recovery</code>和<code>xposed</code>就比较难弄了, 所以只能先”手动”了</p>\n<h2 id=\"Plan\"><a href=\"#Plan\" class=\"headerlink\" title=\"Plan\"></a>Plan</h2><p>作为21世纪有思想的新青年, 自动化是必然的事情, 所以在我没有想到解决上面的问题前, 先把刷机固定的步骤记录下来,<br>方便后面自动脚本的编写.</p>\n<ul>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 固化刷机步骤</li>\n<li><input disabled=\"\" type=\"checkbox\"> 脚本自动刷机</li>\n</ul>\n<h2 id=\"固定刷机步骤\"><a href=\"#固定刷机步骤\" class=\"headerlink\" title=\"固定刷机步骤\"></a>固定刷机步骤</h2><h3 id=\"前提\"><a href=\"#前提\" class=\"headerlink\" title=\"前提\"></a>前提</h3><ul>\n<li>你需要一台原生android系统的手机(Nexus)</li>\n<li>解锁OEM锁(开发者模式里面有)</li>\n<li>解锁bootloader(开机会比较可怕,无所谓)<code>fastboot flashing unlock</code></li>\n</ul>\n<h3 id=\"准备\"><a href=\"#准备\" class=\"headerlink\" title=\"准备\"></a>准备</h3><p>这里考虑的是万能方法, 所以必然是线刷Factory固件了, 你需要有以下几样东西, 每次都需要检查是否是最新版本:</p>\n<ul>\n<li><a href=\"https://developers.google.com/android/nexus/images\">Nexus Factory Images</a>不仅可以刷机用还能救转(unlock bootloader, oem unlock)</li>\n<li><a href=\"https://twrp.me/\">TWRP</a>第三方的恢复镜像,因为谷歌官方不支持恢复第三方的东西(<code>supersu</code>, <code>xposed</code>)</li>\n<li><a href=\"http://download.chainfire.eu/supersu\">supersu</a>root专用,最后<code>recover</code>刷进去</li>\n<li><a href=\"http://dl-xda.xposed.info/framework/\">Xposed</a>杀手级应用</li>\n</ul>\n<h3 id=\"放入第三方的定制包\"><a href=\"#放入第三方的定制包\" class=\"headerlink\" title=\"放入第三方的定制包\"></a>放入第三方的定制包</h3><p><code>suspersu</code>和<code>xposed</code>两个包基本上都是zip格式的, 因为需要在recovery页面手动刷入, 所以为了避免麻烦, 在刷机前先通过USB拷入手机, 放到一个熟悉的目录,<br>后面需要手动进入该目录,所以不要太复杂,放根目录进行了.</p>\n<h3 id=\"恢复官方工厂镜像\"><a href=\"#恢复官方工厂镜像\" class=\"headerlink\" title=\"恢复官方工厂镜像\"></a>恢复官方工厂镜像</h3><p>手机开debug模式usb连电脑, 然后解压工厂固件的压缩包, 然后进入解压缩后的目录</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 替换掉flash-all中危险的清空数据选项-w</span></span><br><span class=\"line\">gsed -i <span class=\"string\">&#x27;s/fastboot -w/fastboot/g&#x27;</span> flash-all.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 进入bootloader状态</span></span><br><span class=\"line\">adb reboot bootloader</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 刷入固件</span></span><br><span class=\"line\">sh ./flash-all.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 下面手机会重启, 真的很久, 下次研究研究有没有替换的方法</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"刷入recovery固件\"><a href=\"#刷入recovery固件\" class=\"headerlink\" title=\"刷入recovery固件\"></a>刷入<code>recovery</code>固件</h3><p>命令行进入twrp镜像所在目录, 然后命令行运行如下:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 进入bootloader状态</span></span><br><span class=\"line\">adb reboot bootloader</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 刷入固件</span></span><br><span class=\"line\">fastboot flash recovery twrp-3.0.2-0-angler.img</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 刷入后不会要求重启, 马上进入下面的刷入supersu和exposed</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 进入恢复模式（建议还是硬件操作比较好）</span></span><br><span class=\"line\">adb reboot recovery</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"刷入定制的第三方定制包\"><a href=\"#刷入定制的第三方定制包\" class=\"headerlink\" title=\"刷入定制的第三方定制包\"></a>刷入定制的第三方定制包</h3><p>这一步基本都是手动, 手动就手动吧, 手动安装两个zip的包然后重启.</p>\n<p><strong>DONE</strong></p>\n"},{"layout":"post","title":"Add Two Numbers","keywords":[2015,"leetCode","学习"],"_content":"\n> You are given two linked lists representing two non-negative numbers. The digits are stored in reverse > order and each of their nodes contain a single digit. Add the two numbers and return it as a linked > > list.\n> \n> Input: (2 -> 4 -> 3) + (5 -> 6 -> 4)\n> Output: 7 -> 0 -> 8\n\n\n## My Attempt Solution1:\n拿到题目, 开始写了才发现对题目理解不到位, 暂时如下:\n\n```javascript\nfunction ListNode(val) {\n    this.val = val;\n    this.next = null;\n}\n\n/**\n * @param {ListNode} l1\n * @param {ListNode} l2\n * @return {ListNode}\n */\nvar addTwoNumbers = function (l1, l2) {\n\n    // 原地逆序\n    var swap = function (l) {\n        while (l != null && l.next != null) {\n\n            // 交换顺序\n            var tmpVar = l.val;\n            l.val = l.next.val;\n            l.next.val = tmpVar;\n\n            l = l.next;\n        }\n    }\n\n    swap(l1);\n    swap(l2);\n\n\n    return l2;\n}\n\n\nvar input1 = '2 -> 4 -> 3';\nvar input2 = '5 ->6 -> 4';\n\nvar inputStr1 = input1.split(/[^\\d]+/);\nvar inputStr2 = input2.split(/[^\\d]+/);\n\nvar tmpL, l1, l2;\ntmpL = l1 = new ListNode(parseInt(inputStr1[0]));\nif (inputStr1.length > 1) {\n    for (var i = 1; i < inputStr1.length; i++) {\n        tmpL.next = new ListNode(parseInt(inputStr1[i]));\n        tmpL = tmpL.next;\n    }\n}\n\ntmpL = l2 = new ListNode(parseInt(inputStr2[0]))\nif (inputStr2.length > 1) {\n    for (var i = 1; i < inputStr2.length; i++) {\n        tmpL.next = new ListNode(parseInt(inputStr2[i]));\n        tmpL = tmpL.next;\n    }\n}\n\nvar l3 = addTwoNumbers(l1, l2);\n\nvar ret = ''\nif (l3 != null) {\n    ret += l3.val;\n\n    tmpL = l3.next;\n    while (tmpL != null) {\n        ret += ' -> ' + tmpL.val;\n        tmpL = tmpL.next;\n    }\n\n}\n\nconsole.log(ret);\n\nconsole.log('finished');\n```\n\n## AC Solution:\n这个题目题意有点混乱, `stored in reverse order`说是给定的input是逆序的,最坏的是前几个测试用例还很难猜出题意.本题的意思是给定两个非负数的链表,并且每个节点的数字都是一位数字,完成两个'链表'的相加(需要考虑进位的问题).我的做法是将链表形式的数据转换成实际意义的数字,然后再转换回去,还没有尝试其他的方式;\n\n``` javascript\nfunction ListNode(val) {\n    this.val = val;\n    this.next = null;\n}\n\n/**\n * @param {ListNode} l1\n * @param {ListNode} l2\n * @return {ListNode}\n */\nvar addTwoNumbers = function (l1, l2) {\n\n    var node2value = function (node) {\n\n        if (node === null) {\n            return 0;\n        }\n\n        return arguments.callee(node.next) * 10 + node.val;\n    }\n\n    var value2node = function (value) {\n\n        var l = new ListNode(value % 10);\n        value = Math.floor(value / 10);\n        var tmp = l;\n\n        while (value !== 0) {\n            tmp.next = new ListNode(value % 10);\n            value = Math.floor(value / 10);\n            tmp = tmp.next;\n        }\n\n        return l;\n    }\n\n\n    var num1 = node2value(l1);\n    var num2 = node2value(l2);\n    var num3 = num1 + num2;\n\n    var ret = value2node(num3);\n\n\n    return ret;\n}\n\n\nfunction createNodes(array) {\n\n    var ret = null;\n\n    if (array != null && array.length > 0) {\n\n        var tmpL = ret = new ListNode(parseInt(array[0]));\n        if (array.length > 1) {\n\n            for (var i = 1; i < array.length; i++) {\n                tmpL.next = new ListNode(parseInt(array[i]));\n                tmpL = tmpL.next;\n            }\n\n        }\n    }\n\n    return ret;\n}\n\nvar input1 = '2 -> 4 -> 3';\nvar input2 = '5 -> 6 -> 4';\n\nvar inputStr1 = input1.split(/[^\\d]+/);\nvar inputStr2 = input2.split(/[^\\d]+/);\n\nvar l1 = createNodes(inputStr1);\nvar l2 = createNodes(inputStr2);\n\nvar l3 = addTwoNumbers(l1, l2);\n\nvar ret = '', tmpL;\nif (l3 != null) {\n    ret += l3.val;\n\n    tmpL = l3.next;\n    while (tmpL != null) {\n        ret += ' -> ' + tmpL.val;\n        tmpL = tmpL.next;\n    }\n\n}\n\nconsole.log(ret);\n\nconsole.log('finished');\n```\n","source":"_posts/study/2015-03-30-leetCode-TwoNumbers .md","raw":"---\nlayout: post\ntitle: Add Two Numbers\ncategory: [学习]\nkeywords: [2015,leetCode,学习]\n---\n\n> You are given two linked lists representing two non-negative numbers. The digits are stored in reverse > order and each of their nodes contain a single digit. Add the two numbers and return it as a linked > > list.\n> \n> Input: (2 -> 4 -> 3) + (5 -> 6 -> 4)\n> Output: 7 -> 0 -> 8\n\n\n## My Attempt Solution1:\n拿到题目, 开始写了才发现对题目理解不到位, 暂时如下:\n\n```javascript\nfunction ListNode(val) {\n    this.val = val;\n    this.next = null;\n}\n\n/**\n * @param {ListNode} l1\n * @param {ListNode} l2\n * @return {ListNode}\n */\nvar addTwoNumbers = function (l1, l2) {\n\n    // 原地逆序\n    var swap = function (l) {\n        while (l != null && l.next != null) {\n\n            // 交换顺序\n            var tmpVar = l.val;\n            l.val = l.next.val;\n            l.next.val = tmpVar;\n\n            l = l.next;\n        }\n    }\n\n    swap(l1);\n    swap(l2);\n\n\n    return l2;\n}\n\n\nvar input1 = '2 -> 4 -> 3';\nvar input2 = '5 ->6 -> 4';\n\nvar inputStr1 = input1.split(/[^\\d]+/);\nvar inputStr2 = input2.split(/[^\\d]+/);\n\nvar tmpL, l1, l2;\ntmpL = l1 = new ListNode(parseInt(inputStr1[0]));\nif (inputStr1.length > 1) {\n    for (var i = 1; i < inputStr1.length; i++) {\n        tmpL.next = new ListNode(parseInt(inputStr1[i]));\n        tmpL = tmpL.next;\n    }\n}\n\ntmpL = l2 = new ListNode(parseInt(inputStr2[0]))\nif (inputStr2.length > 1) {\n    for (var i = 1; i < inputStr2.length; i++) {\n        tmpL.next = new ListNode(parseInt(inputStr2[i]));\n        tmpL = tmpL.next;\n    }\n}\n\nvar l3 = addTwoNumbers(l1, l2);\n\nvar ret = ''\nif (l3 != null) {\n    ret += l3.val;\n\n    tmpL = l3.next;\n    while (tmpL != null) {\n        ret += ' -> ' + tmpL.val;\n        tmpL = tmpL.next;\n    }\n\n}\n\nconsole.log(ret);\n\nconsole.log('finished');\n```\n\n## AC Solution:\n这个题目题意有点混乱, `stored in reverse order`说是给定的input是逆序的,最坏的是前几个测试用例还很难猜出题意.本题的意思是给定两个非负数的链表,并且每个节点的数字都是一位数字,完成两个'链表'的相加(需要考虑进位的问题).我的做法是将链表形式的数据转换成实际意义的数字,然后再转换回去,还没有尝试其他的方式;\n\n``` javascript\nfunction ListNode(val) {\n    this.val = val;\n    this.next = null;\n}\n\n/**\n * @param {ListNode} l1\n * @param {ListNode} l2\n * @return {ListNode}\n */\nvar addTwoNumbers = function (l1, l2) {\n\n    var node2value = function (node) {\n\n        if (node === null) {\n            return 0;\n        }\n\n        return arguments.callee(node.next) * 10 + node.val;\n    }\n\n    var value2node = function (value) {\n\n        var l = new ListNode(value % 10);\n        value = Math.floor(value / 10);\n        var tmp = l;\n\n        while (value !== 0) {\n            tmp.next = new ListNode(value % 10);\n            value = Math.floor(value / 10);\n            tmp = tmp.next;\n        }\n\n        return l;\n    }\n\n\n    var num1 = node2value(l1);\n    var num2 = node2value(l2);\n    var num3 = num1 + num2;\n\n    var ret = value2node(num3);\n\n\n    return ret;\n}\n\n\nfunction createNodes(array) {\n\n    var ret = null;\n\n    if (array != null && array.length > 0) {\n\n        var tmpL = ret = new ListNode(parseInt(array[0]));\n        if (array.length > 1) {\n\n            for (var i = 1; i < array.length; i++) {\n                tmpL.next = new ListNode(parseInt(array[i]));\n                tmpL = tmpL.next;\n            }\n\n        }\n    }\n\n    return ret;\n}\n\nvar input1 = '2 -> 4 -> 3';\nvar input2 = '5 -> 6 -> 4';\n\nvar inputStr1 = input1.split(/[^\\d]+/);\nvar inputStr2 = input2.split(/[^\\d]+/);\n\nvar l1 = createNodes(inputStr1);\nvar l2 = createNodes(inputStr2);\n\nvar l3 = addTwoNumbers(l1, l2);\n\nvar ret = '', tmpL;\nif (l3 != null) {\n    ret += l3.val;\n\n    tmpL = l3.next;\n    while (tmpL != null) {\n        ret += ' -> ' + tmpL.val;\n        tmpL = tmpL.next;\n    }\n\n}\n\nconsole.log(ret);\n\nconsole.log('finished');\n```\n","slug":"study/2015-03-30-leetCode-TwoNumbers ","published":1,"date":"2025-03-22T11:29:07.815Z","updated":"2025-03-22T11:29:07.815Z","comments":1,"photos":[],"_id":"cm8k4mbe50013q69dbob2dm0r","content":"<blockquote>\n<p>You are given two linked lists representing two non-negative numbers. The digits are stored in reverse &gt; order and each of their nodes contain a single digit. Add the two numbers and return it as a linked &gt; &gt; list.</p>\n<p>Input: (2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)<br>Output: 7 -&gt; 0 -&gt; 8</p>\n</blockquote>\n<h2 id=\"My-Attempt-Solution1\"><a href=\"#My-Attempt-Solution1\" class=\"headerlink\" title=\"My Attempt Solution1:\"></a>My Attempt Solution1:</h2><p>拿到题目, 开始写了才发现对题目理解不到位, 暂时如下:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">ListNode</span>(<span class=\"params\">val</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">val</span> = val;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">next</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">ListNode</span>&#125; <span class=\"variable\">l1</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">ListNode</span>&#125; <span class=\"variable\">l2</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> &#123;<span class=\"type\">ListNode</span>&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> addTwoNumbers = <span class=\"keyword\">function</span> (<span class=\"params\">l1, l2</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 原地逆序</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> swap = <span class=\"keyword\">function</span> (<span class=\"params\">l</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (l != <span class=\"literal\">null</span> &amp;&amp; l.<span class=\"property\">next</span> != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 交换顺序</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> tmpVar = l.<span class=\"property\">val</span>;</span><br><span class=\"line\">            l.<span class=\"property\">val</span> = l.<span class=\"property\">next</span>.<span class=\"property\">val</span>;</span><br><span class=\"line\">            l.<span class=\"property\">next</span>.<span class=\"property\">val</span> = tmpVar;</span><br><span class=\"line\"></span><br><span class=\"line\">            l = l.<span class=\"property\">next</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title function_\">swap</span>(l1);</span><br><span class=\"line\">    <span class=\"title function_\">swap</span>(l2);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> l2;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> input1 = <span class=\"string\">&#x27;2 -&gt; 4 -&gt; 3&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> input2 = <span class=\"string\">&#x27;5 -&gt;6 -&gt; 4&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> inputStr1 = input1.<span class=\"title function_\">split</span>(<span class=\"regexp\">/[^\\d]+/</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> inputStr2 = input2.<span class=\"title function_\">split</span>(<span class=\"regexp\">/[^\\d]+/</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> tmpL, l1, l2;</span><br><span class=\"line\">tmpL = l1 = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(<span class=\"built_in\">parseInt</span>(inputStr1[<span class=\"number\">0</span>]));</span><br><span class=\"line\"><span class=\"keyword\">if</span> (inputStr1.<span class=\"property\">length</span> &gt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">1</span>; i &lt; inputStr1.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">        tmpL.<span class=\"property\">next</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(<span class=\"built_in\">parseInt</span>(inputStr1[i]));</span><br><span class=\"line\">        tmpL = tmpL.<span class=\"property\">next</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">tmpL = l2 = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(<span class=\"built_in\">parseInt</span>(inputStr2[<span class=\"number\">0</span>]))</span><br><span class=\"line\"><span class=\"keyword\">if</span> (inputStr2.<span class=\"property\">length</span> &gt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">1</span>; i &lt; inputStr2.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">        tmpL.<span class=\"property\">next</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(<span class=\"built_in\">parseInt</span>(inputStr2[i]));</span><br><span class=\"line\">        tmpL = tmpL.<span class=\"property\">next</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> l3 = <span class=\"title function_\">addTwoNumbers</span>(l1, l2);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> ret = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (l3 != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    ret += l3.<span class=\"property\">val</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    tmpL = l3.<span class=\"property\">next</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (tmpL != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        ret += <span class=\"string\">&#x27; -&gt; &#x27;</span> + tmpL.<span class=\"property\">val</span>;</span><br><span class=\"line\">        tmpL = tmpL.<span class=\"property\">next</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(ret);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;finished&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"AC-Solution\"><a href=\"#AC-Solution\" class=\"headerlink\" title=\"AC Solution:\"></a>AC Solution:</h2><p>这个题目题意有点混乱, <code>stored in reverse order</code>说是给定的input是逆序的,最坏的是前几个测试用例还很难猜出题意.本题的意思是给定两个非负数的链表,并且每个节点的数字都是一位数字,完成两个’链表’的相加(需要考虑进位的问题).我的做法是将链表形式的数据转换成实际意义的数字,然后再转换回去,还没有尝试其他的方式;</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">ListNode</span>(<span class=\"params\">val</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">val</span> = val;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">next</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">ListNode</span>&#125; <span class=\"variable\">l1</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">ListNode</span>&#125; <span class=\"variable\">l2</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> &#123;<span class=\"type\">ListNode</span>&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> addTwoNumbers = <span class=\"keyword\">function</span> (<span class=\"params\">l1, l2</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> node2value = <span class=\"keyword\">function</span> (<span class=\"params\">node</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (node === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">arguments</span>.<span class=\"title function_\">callee</span>(node.<span class=\"property\">next</span>) * <span class=\"number\">10</span> + node.<span class=\"property\">val</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> value2node = <span class=\"keyword\">function</span> (<span class=\"params\">value</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> l = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(value % <span class=\"number\">10</span>);</span><br><span class=\"line\">        value = <span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(value / <span class=\"number\">10</span>);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> tmp = l;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (value !== <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            tmp.<span class=\"property\">next</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(value % <span class=\"number\">10</span>);</span><br><span class=\"line\">            value = <span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(value / <span class=\"number\">10</span>);</span><br><span class=\"line\">            tmp = tmp.<span class=\"property\">next</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> l;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> num1 = <span class=\"title function_\">node2value</span>(l1);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> num2 = <span class=\"title function_\">node2value</span>(l2);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> num3 = num1 + num2;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> ret = <span class=\"title function_\">value2node</span>(num3);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> ret;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createNodes</span>(<span class=\"params\">array</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> ret = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (array != <span class=\"literal\">null</span> &amp;&amp; array.<span class=\"property\">length</span> &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> tmpL = ret = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(<span class=\"built_in\">parseInt</span>(array[<span class=\"number\">0</span>]));</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (array.<span class=\"property\">length</span> &gt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">1</span>; i &lt; array.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">                tmpL.<span class=\"property\">next</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(<span class=\"built_in\">parseInt</span>(array[i]));</span><br><span class=\"line\">                tmpL = tmpL.<span class=\"property\">next</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> ret;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> input1 = <span class=\"string\">&#x27;2 -&gt; 4 -&gt; 3&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> input2 = <span class=\"string\">&#x27;5 -&gt; 6 -&gt; 4&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> inputStr1 = input1.<span class=\"title function_\">split</span>(<span class=\"regexp\">/[^\\d]+/</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> inputStr2 = input2.<span class=\"title function_\">split</span>(<span class=\"regexp\">/[^\\d]+/</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> l1 = <span class=\"title function_\">createNodes</span>(inputStr1);</span><br><span class=\"line\"><span class=\"keyword\">var</span> l2 = <span class=\"title function_\">createNodes</span>(inputStr2);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> l3 = <span class=\"title function_\">addTwoNumbers</span>(l1, l2);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> ret = <span class=\"string\">&#x27;&#x27;</span>, tmpL;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (l3 != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    ret += l3.<span class=\"property\">val</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    tmpL = l3.<span class=\"property\">next</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (tmpL != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        ret += <span class=\"string\">&#x27; -&gt; &#x27;</span> + tmpL.<span class=\"property\">val</span>;</span><br><span class=\"line\">        tmpL = tmpL.<span class=\"property\">next</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(ret);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;finished&#x27;</span>);</span><br></pre></td></tr></table></figure>\n","excerpt":"","more":"<blockquote>\n<p>You are given two linked lists representing two non-negative numbers. The digits are stored in reverse &gt; order and each of their nodes contain a single digit. Add the two numbers and return it as a linked &gt; &gt; list.</p>\n<p>Input: (2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)<br>Output: 7 -&gt; 0 -&gt; 8</p>\n</blockquote>\n<h2 id=\"My-Attempt-Solution1\"><a href=\"#My-Attempt-Solution1\" class=\"headerlink\" title=\"My Attempt Solution1:\"></a>My Attempt Solution1:</h2><p>拿到题目, 开始写了才发现对题目理解不到位, 暂时如下:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">ListNode</span>(<span class=\"params\">val</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">val</span> = val;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">next</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">ListNode</span>&#125; <span class=\"variable\">l1</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">ListNode</span>&#125; <span class=\"variable\">l2</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> &#123;<span class=\"type\">ListNode</span>&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> addTwoNumbers = <span class=\"keyword\">function</span> (<span class=\"params\">l1, l2</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 原地逆序</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> swap = <span class=\"keyword\">function</span> (<span class=\"params\">l</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (l != <span class=\"literal\">null</span> &amp;&amp; l.<span class=\"property\">next</span> != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 交换顺序</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> tmpVar = l.<span class=\"property\">val</span>;</span><br><span class=\"line\">            l.<span class=\"property\">val</span> = l.<span class=\"property\">next</span>.<span class=\"property\">val</span>;</span><br><span class=\"line\">            l.<span class=\"property\">next</span>.<span class=\"property\">val</span> = tmpVar;</span><br><span class=\"line\"></span><br><span class=\"line\">            l = l.<span class=\"property\">next</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title function_\">swap</span>(l1);</span><br><span class=\"line\">    <span class=\"title function_\">swap</span>(l2);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> l2;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> input1 = <span class=\"string\">&#x27;2 -&gt; 4 -&gt; 3&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> input2 = <span class=\"string\">&#x27;5 -&gt;6 -&gt; 4&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> inputStr1 = input1.<span class=\"title function_\">split</span>(<span class=\"regexp\">/[^\\d]+/</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> inputStr2 = input2.<span class=\"title function_\">split</span>(<span class=\"regexp\">/[^\\d]+/</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> tmpL, l1, l2;</span><br><span class=\"line\">tmpL = l1 = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(<span class=\"built_in\">parseInt</span>(inputStr1[<span class=\"number\">0</span>]));</span><br><span class=\"line\"><span class=\"keyword\">if</span> (inputStr1.<span class=\"property\">length</span> &gt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">1</span>; i &lt; inputStr1.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">        tmpL.<span class=\"property\">next</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(<span class=\"built_in\">parseInt</span>(inputStr1[i]));</span><br><span class=\"line\">        tmpL = tmpL.<span class=\"property\">next</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">tmpL = l2 = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(<span class=\"built_in\">parseInt</span>(inputStr2[<span class=\"number\">0</span>]))</span><br><span class=\"line\"><span class=\"keyword\">if</span> (inputStr2.<span class=\"property\">length</span> &gt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">1</span>; i &lt; inputStr2.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">        tmpL.<span class=\"property\">next</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(<span class=\"built_in\">parseInt</span>(inputStr2[i]));</span><br><span class=\"line\">        tmpL = tmpL.<span class=\"property\">next</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> l3 = <span class=\"title function_\">addTwoNumbers</span>(l1, l2);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> ret = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (l3 != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    ret += l3.<span class=\"property\">val</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    tmpL = l3.<span class=\"property\">next</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (tmpL != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        ret += <span class=\"string\">&#x27; -&gt; &#x27;</span> + tmpL.<span class=\"property\">val</span>;</span><br><span class=\"line\">        tmpL = tmpL.<span class=\"property\">next</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(ret);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;finished&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"AC-Solution\"><a href=\"#AC-Solution\" class=\"headerlink\" title=\"AC Solution:\"></a>AC Solution:</h2><p>这个题目题意有点混乱, <code>stored in reverse order</code>说是给定的input是逆序的,最坏的是前几个测试用例还很难猜出题意.本题的意思是给定两个非负数的链表,并且每个节点的数字都是一位数字,完成两个’链表’的相加(需要考虑进位的问题).我的做法是将链表形式的数据转换成实际意义的数字,然后再转换回去,还没有尝试其他的方式;</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">ListNode</span>(<span class=\"params\">val</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">val</span> = val;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">next</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">ListNode</span>&#125; <span class=\"variable\">l1</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> &#123;<span class=\"type\">ListNode</span>&#125; <span class=\"variable\">l2</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> &#123;<span class=\"type\">ListNode</span>&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> addTwoNumbers = <span class=\"keyword\">function</span> (<span class=\"params\">l1, l2</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> node2value = <span class=\"keyword\">function</span> (<span class=\"params\">node</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (node === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">arguments</span>.<span class=\"title function_\">callee</span>(node.<span class=\"property\">next</span>) * <span class=\"number\">10</span> + node.<span class=\"property\">val</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> value2node = <span class=\"keyword\">function</span> (<span class=\"params\">value</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> l = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(value % <span class=\"number\">10</span>);</span><br><span class=\"line\">        value = <span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(value / <span class=\"number\">10</span>);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> tmp = l;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (value !== <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            tmp.<span class=\"property\">next</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(value % <span class=\"number\">10</span>);</span><br><span class=\"line\">            value = <span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(value / <span class=\"number\">10</span>);</span><br><span class=\"line\">            tmp = tmp.<span class=\"property\">next</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> l;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> num1 = <span class=\"title function_\">node2value</span>(l1);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> num2 = <span class=\"title function_\">node2value</span>(l2);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> num3 = num1 + num2;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> ret = <span class=\"title function_\">value2node</span>(num3);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> ret;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createNodes</span>(<span class=\"params\">array</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> ret = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (array != <span class=\"literal\">null</span> &amp;&amp; array.<span class=\"property\">length</span> &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> tmpL = ret = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(<span class=\"built_in\">parseInt</span>(array[<span class=\"number\">0</span>]));</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (array.<span class=\"property\">length</span> &gt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">1</span>; i &lt; array.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">                tmpL.<span class=\"property\">next</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(<span class=\"built_in\">parseInt</span>(array[i]));</span><br><span class=\"line\">                tmpL = tmpL.<span class=\"property\">next</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> ret;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> input1 = <span class=\"string\">&#x27;2 -&gt; 4 -&gt; 3&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> input2 = <span class=\"string\">&#x27;5 -&gt; 6 -&gt; 4&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> inputStr1 = input1.<span class=\"title function_\">split</span>(<span class=\"regexp\">/[^\\d]+/</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> inputStr2 = input2.<span class=\"title function_\">split</span>(<span class=\"regexp\">/[^\\d]+/</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> l1 = <span class=\"title function_\">createNodes</span>(inputStr1);</span><br><span class=\"line\"><span class=\"keyword\">var</span> l2 = <span class=\"title function_\">createNodes</span>(inputStr2);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> l3 = <span class=\"title function_\">addTwoNumbers</span>(l1, l2);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> ret = <span class=\"string\">&#x27;&#x27;</span>, tmpL;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (l3 != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    ret += l3.<span class=\"property\">val</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    tmpL = l3.<span class=\"property\">next</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (tmpL != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        ret += <span class=\"string\">&#x27; -&gt; &#x27;</span> + tmpL.<span class=\"property\">val</span>;</span><br><span class=\"line\">        tmpL = tmpL.<span class=\"property\">next</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(ret);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;finished&#x27;</span>);</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"Two Sum","keywords":[2015,"leetCode","学习"],"_content":"\n> Given an array of integers, find two numbers such that they add up to a specific target number.\n>\n> The function twoSum should return indices of the two numbers such that they add up to the target, where index1 must be less than index2. Please note that your returned answers (both index1 and index2) are not zero-based.\n>\n> You may assume that each input would have exactly one solution.\n>\n> Input: numbers={2, 7, 11, 15}, target=9\n> Output: index1=1, index2=2\n\n\n## My Attempt Solution1:\n拿到题目, 我以为很简单, 所以在手机上直接敲代码, 第一次的程序如下, 结果`Time Limit Exceeded`:\n\n```javascript\nvar twoSum = function (numbers, target) {\n    var i = 0, j = i + 1\n\n    while (1) {\n        var temp = numbers[i] + numbers[j]\n\n        if (temp < target) {\n            j = j + 1\n            continue\n        }\n        if (temp > target) {\n            i = i + 1\n            j = i + 1\n            continue;\n        }\n\n        return [i + 1, j + 1]\n    }\n};\n\nvar target = 16021;\n\nconsole.log(twoSum(numbers, target));\n```\n\n接下来需要深入理解题意, 感觉连答案都错了.\n\n## My Attempt Solution2:\n为了提高速度, 在进入逻辑前进行数组的排序, 结果` Wrong Answer`:\n\n```javascript\nvar twoSum = function (numbers, target) {\n\n    var i = 0, j = i + 1;\n\n    numbers.sort();\n\n    while (1) {\n        var temp = numbers[i] + numbers[j];\n\n        if (temp < target) {\n            j = j + 1;\n            continue;\n        }\n        if (temp > target) {\n            i = i + 1;\n            j = i + 1;\n            continue;\n        }\n\n        return [i + 1, j + 1];\n    }\n};\n\nvar numbers = [3,2,4]\nvar target = 6;\n\nvar start = new Date().getTime();\nvar result = twoSum(numbers, target);\nvar cost = new Date().getTime() - start;\nconsole.log(cost);\n\nconsole.log(result);\n```\n\n## My Final Solution:\n中间还错了好几次, 还要考虑数据是负数的情况:\n\n```javascript\nvar twoSum = function (numbers, target) {\n\n    var i = 0, j = numbers.length - 1;\n\n    var newNumbers = [];\n\n    for (var k = 0; k < numbers.length; k++) {\n        newNumbers.push([numbers[k], k]);\n    }\n\n    newNumbers.sort(function (a, b) {\n                return a[0] - b[0];\n            }\n    );\n\n    while (1) {\n        var temp = newNumbers[i][0] + newNumbers[j][0];\n\n        if (temp < target) {\n            i++;\n            continue;\n        }\n\n        if (temp > target) {\n            j--;\n            continue;\n        }\n\n        return [newNumbers[i][1] + 1, newNumbers[j][1] + 1].sort(function (a, b) {\n            return a - b;\n        });\n    }\n};\n\nvar numbers = [572, 815, 387, 418, 434, 530, 376, 190, 196, 74, 830, 561, 973, 771, 640, 37, 539, 369, 327, 51, 623, 575, 988, 44, 659, 48, 22, 776, 487, 873, 486, 169, 499, 82, 128, 31, 386, 691, 553, 848, 968, 874, 692, 404, 463, 285, 745, 631, 304, 271, 40, 921, 733, 56, 883, 517, 99, 580, 55, 81, 232, 971, 561, 683, 806, 994, 823, 219, 315, 564, 997, 976, 158, 208, 851, 206, 101, 989, 542, 985, 940, 116, 153, 47, 806, 944, 337, 903, 712, 138, 236, 777, 630, 912, 22, 140, 525, 270, 997, 763, 812, 597, 806, 423, 869, 926, 344, 494, 858, 519, 389, 627, 517, 964, 74, 432, 730, 843, 673, 985, 819, 397, 607, 34, 948, 648, 43, 212, 950, 235, 995, 76, 439, 614, 203, 313, 180, 760, 210, 813, 920, 229, 615, 730, 359, 863, 678, 43, 293, 978, 305, 106, 797, 769, 3, 700, 945, 135, 430, 965, 762, 479, 152, 121, 935, 809, 101, 271, 428, 608, 8, 983, 758, 662, 755, 190, 632, 792, 789, 174, 869, 622, 885, 626, 310, 128, 233, 82, 223, 339, 771, 741, 227, 131, 85, 51, 361, 343, 641, 568, 922, 145, 256, 177, 329, 959, 991, 293, 850, 858, 76, 291, 134, 254, 956, 971, 718, 391, 336, 899, 206, 642, 254, 851, 274, 239, 538, 418, 21, 232, 706, 275, 615, 568, 714, 234, 567, 994, 368, 54, 744, 498, 380, 594, 415, 286, 260, 582, 522, 795, 261, 437, 292, 887, 405, 293, 946, 678, 686, 682, 501, 238, 245, 380, 218, 591, 722, 519, 770, 359, 340, 215, 151, 368, 356, 795, 91, 250, 413, 970, 37, 941, 356, 648, 594, 513, 484, 364, 484, 909, 292, 501, 59, 982, 686, 827, 461, 60, 557, 178, 952, 218, 634, 785, 251, 290, 156, 300, 711, 322, 570, 820, 191, 755, 429, 950, 18, 917, 905, 905, 126, 790, 638, 94, 857, 235, 889, 611, 605, 203, 859, 749, 874, 530, 727, 764, 197, 537, 951, 919, 24, 341, 334, 505, 796, 619, 492, 295, 380, 128, 533, 600, 160, 51, 249, 5, 837, 905, 747, 505, 82, 158, 687, 507, 339, 575, 206, 28, 29, 91, 459, 118, 284, 995, 544, 3, 154, 89, 840, 364, 682, 700, 143, 173, 216, 290, 733, 525, 399, 574, 693, 500, 189, 590, 529, 972, 378, 299, 461, 866, 326, 43, 711, 460, 426, 947, 391, 536, 26, 579, 304, 852, 158, 621, 683, 901, 237, 22, 225, 59, 52, 798, 262, 754, 649, 504, 861, 472, 480, 570, 347, 891, 956, 347, 31, 784, 581, 668, 127, 628, 962, 698, 191, 313, 714, 893];\nvar target = 101;\n\nvar start = new Date().getTime();\nvar result = twoSum(numbers, target);\nvar cost = new Date().getTime() - start;\n\nconsole.log(cost);\n\nconsole.log(result);\n```","source":"_posts/study/2015-03-30-leetCode-TwoSum.md","raw":"---\nlayout: post\ntitle: Two Sum\ncategory: [学习]\nkeywords: [2015,leetCode,学习]\n---\n\n> Given an array of integers, find two numbers such that they add up to a specific target number.\n>\n> The function twoSum should return indices of the two numbers such that they add up to the target, where index1 must be less than index2. Please note that your returned answers (both index1 and index2) are not zero-based.\n>\n> You may assume that each input would have exactly one solution.\n>\n> Input: numbers={2, 7, 11, 15}, target=9\n> Output: index1=1, index2=2\n\n\n## My Attempt Solution1:\n拿到题目, 我以为很简单, 所以在手机上直接敲代码, 第一次的程序如下, 结果`Time Limit Exceeded`:\n\n```javascript\nvar twoSum = function (numbers, target) {\n    var i = 0, j = i + 1\n\n    while (1) {\n        var temp = numbers[i] + numbers[j]\n\n        if (temp < target) {\n            j = j + 1\n            continue\n        }\n        if (temp > target) {\n            i = i + 1\n            j = i + 1\n            continue;\n        }\n\n        return [i + 1, j + 1]\n    }\n};\n\nvar target = 16021;\n\nconsole.log(twoSum(numbers, target));\n```\n\n接下来需要深入理解题意, 感觉连答案都错了.\n\n## My Attempt Solution2:\n为了提高速度, 在进入逻辑前进行数组的排序, 结果` Wrong Answer`:\n\n```javascript\nvar twoSum = function (numbers, target) {\n\n    var i = 0, j = i + 1;\n\n    numbers.sort();\n\n    while (1) {\n        var temp = numbers[i] + numbers[j];\n\n        if (temp < target) {\n            j = j + 1;\n            continue;\n        }\n        if (temp > target) {\n            i = i + 1;\n            j = i + 1;\n            continue;\n        }\n\n        return [i + 1, j + 1];\n    }\n};\n\nvar numbers = [3,2,4]\nvar target = 6;\n\nvar start = new Date().getTime();\nvar result = twoSum(numbers, target);\nvar cost = new Date().getTime() - start;\nconsole.log(cost);\n\nconsole.log(result);\n```\n\n## My Final Solution:\n中间还错了好几次, 还要考虑数据是负数的情况:\n\n```javascript\nvar twoSum = function (numbers, target) {\n\n    var i = 0, j = numbers.length - 1;\n\n    var newNumbers = [];\n\n    for (var k = 0; k < numbers.length; k++) {\n        newNumbers.push([numbers[k], k]);\n    }\n\n    newNumbers.sort(function (a, b) {\n                return a[0] - b[0];\n            }\n    );\n\n    while (1) {\n        var temp = newNumbers[i][0] + newNumbers[j][0];\n\n        if (temp < target) {\n            i++;\n            continue;\n        }\n\n        if (temp > target) {\n            j--;\n            continue;\n        }\n\n        return [newNumbers[i][1] + 1, newNumbers[j][1] + 1].sort(function (a, b) {\n            return a - b;\n        });\n    }\n};\n\nvar numbers = [572, 815, 387, 418, 434, 530, 376, 190, 196, 74, 830, 561, 973, 771, 640, 37, 539, 369, 327, 51, 623, 575, 988, 44, 659, 48, 22, 776, 487, 873, 486, 169, 499, 82, 128, 31, 386, 691, 553, 848, 968, 874, 692, 404, 463, 285, 745, 631, 304, 271, 40, 921, 733, 56, 883, 517, 99, 580, 55, 81, 232, 971, 561, 683, 806, 994, 823, 219, 315, 564, 997, 976, 158, 208, 851, 206, 101, 989, 542, 985, 940, 116, 153, 47, 806, 944, 337, 903, 712, 138, 236, 777, 630, 912, 22, 140, 525, 270, 997, 763, 812, 597, 806, 423, 869, 926, 344, 494, 858, 519, 389, 627, 517, 964, 74, 432, 730, 843, 673, 985, 819, 397, 607, 34, 948, 648, 43, 212, 950, 235, 995, 76, 439, 614, 203, 313, 180, 760, 210, 813, 920, 229, 615, 730, 359, 863, 678, 43, 293, 978, 305, 106, 797, 769, 3, 700, 945, 135, 430, 965, 762, 479, 152, 121, 935, 809, 101, 271, 428, 608, 8, 983, 758, 662, 755, 190, 632, 792, 789, 174, 869, 622, 885, 626, 310, 128, 233, 82, 223, 339, 771, 741, 227, 131, 85, 51, 361, 343, 641, 568, 922, 145, 256, 177, 329, 959, 991, 293, 850, 858, 76, 291, 134, 254, 956, 971, 718, 391, 336, 899, 206, 642, 254, 851, 274, 239, 538, 418, 21, 232, 706, 275, 615, 568, 714, 234, 567, 994, 368, 54, 744, 498, 380, 594, 415, 286, 260, 582, 522, 795, 261, 437, 292, 887, 405, 293, 946, 678, 686, 682, 501, 238, 245, 380, 218, 591, 722, 519, 770, 359, 340, 215, 151, 368, 356, 795, 91, 250, 413, 970, 37, 941, 356, 648, 594, 513, 484, 364, 484, 909, 292, 501, 59, 982, 686, 827, 461, 60, 557, 178, 952, 218, 634, 785, 251, 290, 156, 300, 711, 322, 570, 820, 191, 755, 429, 950, 18, 917, 905, 905, 126, 790, 638, 94, 857, 235, 889, 611, 605, 203, 859, 749, 874, 530, 727, 764, 197, 537, 951, 919, 24, 341, 334, 505, 796, 619, 492, 295, 380, 128, 533, 600, 160, 51, 249, 5, 837, 905, 747, 505, 82, 158, 687, 507, 339, 575, 206, 28, 29, 91, 459, 118, 284, 995, 544, 3, 154, 89, 840, 364, 682, 700, 143, 173, 216, 290, 733, 525, 399, 574, 693, 500, 189, 590, 529, 972, 378, 299, 461, 866, 326, 43, 711, 460, 426, 947, 391, 536, 26, 579, 304, 852, 158, 621, 683, 901, 237, 22, 225, 59, 52, 798, 262, 754, 649, 504, 861, 472, 480, 570, 347, 891, 956, 347, 31, 784, 581, 668, 127, 628, 962, 698, 191, 313, 714, 893];\nvar target = 101;\n\nvar start = new Date().getTime();\nvar result = twoSum(numbers, target);\nvar cost = new Date().getTime() - start;\n\nconsole.log(cost);\n\nconsole.log(result);\n```","slug":"study/2015-03-30-leetCode-TwoSum","published":1,"date":"2025-03-22T11:29:07.815Z","updated":"2025-03-22T11:29:07.815Z","comments":1,"photos":[],"_id":"cm8k4mbe60016q69d655946qy","content":"<blockquote>\n<p>Given an array of integers, find two numbers such that they add up to a specific target number.</p>\n<p>The function twoSum should return indices of the two numbers such that they add up to the target, where index1 must be less than index2. Please note that your returned answers (both index1 and index2) are not zero-based.</p>\n<p>You may assume that each input would have exactly one solution.</p>\n<p>Input: numbers&#x3D;{2, 7, 11, 15}, target&#x3D;9<br>Output: index1&#x3D;1, index2&#x3D;2</p>\n</blockquote>\n<h2 id=\"My-Attempt-Solution1\"><a href=\"#My-Attempt-Solution1\" class=\"headerlink\" title=\"My Attempt Solution1:\"></a>My Attempt Solution1:</h2><p>拿到题目, 我以为很简单, 所以在手机上直接敲代码, 第一次的程序如下, 结果<code>Time Limit Exceeded</code>:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> twoSum = <span class=\"keyword\">function</span> (<span class=\"params\">numbers, target</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, j = i + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> temp = numbers[i] + numbers[j]</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (temp &lt; target) &#123;</span><br><span class=\"line\">            j = j + <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (temp &gt; target) &#123;</span><br><span class=\"line\">            i = i + <span class=\"number\">1</span></span><br><span class=\"line\">            j = i + <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> [i + <span class=\"number\">1</span>, j + <span class=\"number\">1</span>]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> target = <span class=\"number\">16021</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">twoSum</span>(numbers, target));</span><br></pre></td></tr></table></figure>\n\n<p>接下来需要深入理解题意, 感觉连答案都错了.</p>\n<h2 id=\"My-Attempt-Solution2\"><a href=\"#My-Attempt-Solution2\" class=\"headerlink\" title=\"My Attempt Solution2:\"></a>My Attempt Solution2:</h2><p>为了提高速度, 在进入逻辑前进行数组的排序, 结果<code> Wrong Answer</code>:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> twoSum = <span class=\"keyword\">function</span> (<span class=\"params\">numbers, target</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, j = i + <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    numbers.<span class=\"title function_\">sort</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> temp = numbers[i] + numbers[j];</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (temp &lt; target) &#123;</span><br><span class=\"line\">            j = j + <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (temp &gt; target) &#123;</span><br><span class=\"line\">            i = i + <span class=\"number\">1</span>;</span><br><span class=\"line\">            j = i + <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> [i + <span class=\"number\">1</span>, j + <span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> numbers = [<span class=\"number\">3</span>,<span class=\"number\">2</span>,<span class=\"number\">4</span>]</span><br><span class=\"line\"><span class=\"keyword\">var</span> target = <span class=\"number\">6</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> start = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getTime</span>();</span><br><span class=\"line\"><span class=\"keyword\">var</span> result = <span class=\"title function_\">twoSum</span>(numbers, target);</span><br><span class=\"line\"><span class=\"keyword\">var</span> cost = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getTime</span>() - start;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(cost);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(result);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"My-Final-Solution\"><a href=\"#My-Final-Solution\" class=\"headerlink\" title=\"My Final Solution:\"></a>My Final Solution:</h2><p>中间还错了好几次, 还要考虑数据是负数的情况:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> twoSum = <span class=\"keyword\">function</span> (<span class=\"params\">numbers, target</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, j = numbers.<span class=\"property\">length</span> - <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> newNumbers = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> k = <span class=\"number\">0</span>; k &lt; numbers.<span class=\"property\">length</span>; k++) &#123;</span><br><span class=\"line\">        newNumbers.<span class=\"title function_\">push</span>([numbers[k], k]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    newNumbers.<span class=\"title function_\">sort</span>(<span class=\"keyword\">function</span> (<span class=\"params\">a, b</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> a[<span class=\"number\">0</span>] - b[<span class=\"number\">0</span>];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">    );</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> temp = newNumbers[i][<span class=\"number\">0</span>] + newNumbers[j][<span class=\"number\">0</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (temp &lt; target) &#123;</span><br><span class=\"line\">            i++;</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (temp &gt; target) &#123;</span><br><span class=\"line\">            j--;</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> [newNumbers[i][<span class=\"number\">1</span>] + <span class=\"number\">1</span>, newNumbers[j][<span class=\"number\">1</span>] + <span class=\"number\">1</span>].<span class=\"title function_\">sort</span>(<span class=\"keyword\">function</span> (<span class=\"params\">a, b</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> a - b;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> numbers = [<span class=\"number\">572</span>, <span class=\"number\">815</span>, <span class=\"number\">387</span>, <span class=\"number\">418</span>, <span class=\"number\">434</span>, <span class=\"number\">530</span>, <span class=\"number\">376</span>, <span class=\"number\">190</span>, <span class=\"number\">196</span>, <span class=\"number\">74</span>, <span class=\"number\">830</span>, <span class=\"number\">561</span>, <span class=\"number\">973</span>, <span class=\"number\">771</span>, <span class=\"number\">640</span>, <span class=\"number\">37</span>, <span class=\"number\">539</span>, <span class=\"number\">369</span>, <span class=\"number\">327</span>, <span class=\"number\">51</span>, <span class=\"number\">623</span>, <span class=\"number\">575</span>, <span class=\"number\">988</span>, <span class=\"number\">44</span>, <span class=\"number\">659</span>, <span class=\"number\">48</span>, <span class=\"number\">22</span>, <span class=\"number\">776</span>, <span class=\"number\">487</span>, <span class=\"number\">873</span>, <span class=\"number\">486</span>, <span class=\"number\">169</span>, <span class=\"number\">499</span>, <span class=\"number\">82</span>, <span class=\"number\">128</span>, <span class=\"number\">31</span>, <span class=\"number\">386</span>, <span class=\"number\">691</span>, <span class=\"number\">553</span>, <span class=\"number\">848</span>, <span class=\"number\">968</span>, <span class=\"number\">874</span>, <span class=\"number\">692</span>, <span class=\"number\">404</span>, <span class=\"number\">463</span>, <span class=\"number\">285</span>, <span class=\"number\">745</span>, <span class=\"number\">631</span>, <span class=\"number\">304</span>, <span class=\"number\">271</span>, <span class=\"number\">40</span>, <span class=\"number\">921</span>, <span class=\"number\">733</span>, <span class=\"number\">56</span>, <span class=\"number\">883</span>, <span class=\"number\">517</span>, <span class=\"number\">99</span>, <span class=\"number\">580</span>, <span class=\"number\">55</span>, <span class=\"number\">81</span>, <span class=\"number\">232</span>, <span class=\"number\">971</span>, <span class=\"number\">561</span>, <span class=\"number\">683</span>, <span class=\"number\">806</span>, <span class=\"number\">994</span>, <span class=\"number\">823</span>, <span class=\"number\">219</span>, <span class=\"number\">315</span>, <span class=\"number\">564</span>, <span class=\"number\">997</span>, <span class=\"number\">976</span>, <span class=\"number\">158</span>, <span class=\"number\">208</span>, <span class=\"number\">851</span>, <span class=\"number\">206</span>, <span class=\"number\">101</span>, <span class=\"number\">989</span>, <span class=\"number\">542</span>, <span class=\"number\">985</span>, <span class=\"number\">940</span>, <span class=\"number\">116</span>, <span class=\"number\">153</span>, <span class=\"number\">47</span>, <span class=\"number\">806</span>, <span class=\"number\">944</span>, <span class=\"number\">337</span>, <span class=\"number\">903</span>, <span class=\"number\">712</span>, <span class=\"number\">138</span>, <span class=\"number\">236</span>, <span class=\"number\">777</span>, <span class=\"number\">630</span>, <span class=\"number\">912</span>, <span class=\"number\">22</span>, <span class=\"number\">140</span>, <span class=\"number\">525</span>, <span class=\"number\">270</span>, <span class=\"number\">997</span>, <span class=\"number\">763</span>, <span class=\"number\">812</span>, <span class=\"number\">597</span>, <span class=\"number\">806</span>, <span class=\"number\">423</span>, <span class=\"number\">869</span>, <span class=\"number\">926</span>, <span class=\"number\">344</span>, <span class=\"number\">494</span>, <span class=\"number\">858</span>, <span class=\"number\">519</span>, <span class=\"number\">389</span>, <span class=\"number\">627</span>, <span class=\"number\">517</span>, <span class=\"number\">964</span>, <span class=\"number\">74</span>, <span class=\"number\">432</span>, <span class=\"number\">730</span>, <span class=\"number\">843</span>, <span class=\"number\">673</span>, <span class=\"number\">985</span>, <span class=\"number\">819</span>, <span class=\"number\">397</span>, <span class=\"number\">607</span>, <span class=\"number\">34</span>, <span class=\"number\">948</span>, <span class=\"number\">648</span>, <span class=\"number\">43</span>, <span class=\"number\">212</span>, <span class=\"number\">950</span>, <span class=\"number\">235</span>, <span class=\"number\">995</span>, <span class=\"number\">76</span>, <span class=\"number\">439</span>, <span class=\"number\">614</span>, <span class=\"number\">203</span>, <span class=\"number\">313</span>, <span class=\"number\">180</span>, <span class=\"number\">760</span>, <span class=\"number\">210</span>, <span class=\"number\">813</span>, <span class=\"number\">920</span>, <span class=\"number\">229</span>, <span class=\"number\">615</span>, <span class=\"number\">730</span>, <span class=\"number\">359</span>, <span class=\"number\">863</span>, <span class=\"number\">678</span>, <span class=\"number\">43</span>, <span class=\"number\">293</span>, <span class=\"number\">978</span>, <span class=\"number\">305</span>, <span class=\"number\">106</span>, <span class=\"number\">797</span>, <span class=\"number\">769</span>, <span class=\"number\">3</span>, <span class=\"number\">700</span>, <span class=\"number\">945</span>, <span class=\"number\">135</span>, <span class=\"number\">430</span>, <span class=\"number\">965</span>, <span class=\"number\">762</span>, <span class=\"number\">479</span>, <span class=\"number\">152</span>, <span class=\"number\">121</span>, <span class=\"number\">935</span>, <span class=\"number\">809</span>, <span class=\"number\">101</span>, <span class=\"number\">271</span>, <span class=\"number\">428</span>, <span class=\"number\">608</span>, <span class=\"number\">8</span>, <span class=\"number\">983</span>, <span class=\"number\">758</span>, <span class=\"number\">662</span>, <span class=\"number\">755</span>, <span class=\"number\">190</span>, <span class=\"number\">632</span>, <span class=\"number\">792</span>, <span class=\"number\">789</span>, <span class=\"number\">174</span>, <span class=\"number\">869</span>, <span class=\"number\">622</span>, <span class=\"number\">885</span>, <span class=\"number\">626</span>, <span class=\"number\">310</span>, <span class=\"number\">128</span>, <span class=\"number\">233</span>, <span class=\"number\">82</span>, <span class=\"number\">223</span>, <span class=\"number\">339</span>, <span class=\"number\">771</span>, <span class=\"number\">741</span>, <span class=\"number\">227</span>, <span class=\"number\">131</span>, <span class=\"number\">85</span>, <span class=\"number\">51</span>, <span class=\"number\">361</span>, <span class=\"number\">343</span>, <span class=\"number\">641</span>, <span class=\"number\">568</span>, <span class=\"number\">922</span>, <span class=\"number\">145</span>, <span class=\"number\">256</span>, <span class=\"number\">177</span>, <span class=\"number\">329</span>, <span class=\"number\">959</span>, <span class=\"number\">991</span>, <span class=\"number\">293</span>, <span class=\"number\">850</span>, <span class=\"number\">858</span>, <span class=\"number\">76</span>, <span class=\"number\">291</span>, <span class=\"number\">134</span>, <span class=\"number\">254</span>, <span class=\"number\">956</span>, <span class=\"number\">971</span>, <span class=\"number\">718</span>, <span class=\"number\">391</span>, <span class=\"number\">336</span>, <span class=\"number\">899</span>, <span class=\"number\">206</span>, <span class=\"number\">642</span>, <span class=\"number\">254</span>, <span class=\"number\">851</span>, <span class=\"number\">274</span>, <span class=\"number\">239</span>, <span class=\"number\">538</span>, <span class=\"number\">418</span>, <span class=\"number\">21</span>, <span class=\"number\">232</span>, <span class=\"number\">706</span>, <span class=\"number\">275</span>, <span class=\"number\">615</span>, <span class=\"number\">568</span>, <span class=\"number\">714</span>, <span class=\"number\">234</span>, <span class=\"number\">567</span>, <span class=\"number\">994</span>, <span class=\"number\">368</span>, <span class=\"number\">54</span>, <span class=\"number\">744</span>, <span class=\"number\">498</span>, <span class=\"number\">380</span>, <span class=\"number\">594</span>, <span class=\"number\">415</span>, <span class=\"number\">286</span>, <span class=\"number\">260</span>, <span class=\"number\">582</span>, <span class=\"number\">522</span>, <span class=\"number\">795</span>, <span class=\"number\">261</span>, <span class=\"number\">437</span>, <span class=\"number\">292</span>, <span class=\"number\">887</span>, <span class=\"number\">405</span>, <span class=\"number\">293</span>, <span class=\"number\">946</span>, <span class=\"number\">678</span>, <span class=\"number\">686</span>, <span class=\"number\">682</span>, <span class=\"number\">501</span>, <span class=\"number\">238</span>, <span class=\"number\">245</span>, <span class=\"number\">380</span>, <span class=\"number\">218</span>, <span class=\"number\">591</span>, <span class=\"number\">722</span>, <span class=\"number\">519</span>, <span class=\"number\">770</span>, <span class=\"number\">359</span>, <span class=\"number\">340</span>, <span class=\"number\">215</span>, <span class=\"number\">151</span>, <span class=\"number\">368</span>, <span class=\"number\">356</span>, <span class=\"number\">795</span>, <span class=\"number\">91</span>, <span class=\"number\">250</span>, <span class=\"number\">413</span>, <span class=\"number\">970</span>, <span class=\"number\">37</span>, <span class=\"number\">941</span>, <span class=\"number\">356</span>, <span class=\"number\">648</span>, <span class=\"number\">594</span>, <span class=\"number\">513</span>, <span class=\"number\">484</span>, <span class=\"number\">364</span>, <span class=\"number\">484</span>, <span class=\"number\">909</span>, <span class=\"number\">292</span>, <span class=\"number\">501</span>, <span class=\"number\">59</span>, <span class=\"number\">982</span>, <span class=\"number\">686</span>, <span class=\"number\">827</span>, <span class=\"number\">461</span>, <span class=\"number\">60</span>, <span class=\"number\">557</span>, <span class=\"number\">178</span>, <span class=\"number\">952</span>, <span class=\"number\">218</span>, <span class=\"number\">634</span>, <span class=\"number\">785</span>, <span class=\"number\">251</span>, <span class=\"number\">290</span>, <span class=\"number\">156</span>, <span class=\"number\">300</span>, <span class=\"number\">711</span>, <span class=\"number\">322</span>, <span class=\"number\">570</span>, <span class=\"number\">820</span>, <span class=\"number\">191</span>, <span class=\"number\">755</span>, <span class=\"number\">429</span>, <span class=\"number\">950</span>, <span class=\"number\">18</span>, <span class=\"number\">917</span>, <span class=\"number\">905</span>, <span class=\"number\">905</span>, <span class=\"number\">126</span>, <span class=\"number\">790</span>, <span class=\"number\">638</span>, <span class=\"number\">94</span>, <span class=\"number\">857</span>, <span class=\"number\">235</span>, <span class=\"number\">889</span>, <span class=\"number\">611</span>, <span class=\"number\">605</span>, <span class=\"number\">203</span>, <span class=\"number\">859</span>, <span class=\"number\">749</span>, <span class=\"number\">874</span>, <span class=\"number\">530</span>, <span class=\"number\">727</span>, <span class=\"number\">764</span>, <span class=\"number\">197</span>, <span class=\"number\">537</span>, <span class=\"number\">951</span>, <span class=\"number\">919</span>, <span class=\"number\">24</span>, <span class=\"number\">341</span>, <span class=\"number\">334</span>, <span class=\"number\">505</span>, <span class=\"number\">796</span>, <span class=\"number\">619</span>, <span class=\"number\">492</span>, <span class=\"number\">295</span>, <span class=\"number\">380</span>, <span class=\"number\">128</span>, <span class=\"number\">533</span>, <span class=\"number\">600</span>, <span class=\"number\">160</span>, <span class=\"number\">51</span>, <span class=\"number\">249</span>, <span class=\"number\">5</span>, <span class=\"number\">837</span>, <span class=\"number\">905</span>, <span class=\"number\">747</span>, <span class=\"number\">505</span>, <span class=\"number\">82</span>, <span class=\"number\">158</span>, <span class=\"number\">687</span>, <span class=\"number\">507</span>, <span class=\"number\">339</span>, <span class=\"number\">575</span>, <span class=\"number\">206</span>, <span class=\"number\">28</span>, <span class=\"number\">29</span>, <span class=\"number\">91</span>, <span class=\"number\">459</span>, <span class=\"number\">118</span>, <span class=\"number\">284</span>, <span class=\"number\">995</span>, <span class=\"number\">544</span>, <span class=\"number\">3</span>, <span class=\"number\">154</span>, <span class=\"number\">89</span>, <span class=\"number\">840</span>, <span class=\"number\">364</span>, <span class=\"number\">682</span>, <span class=\"number\">700</span>, <span class=\"number\">143</span>, <span class=\"number\">173</span>, <span class=\"number\">216</span>, <span class=\"number\">290</span>, <span class=\"number\">733</span>, <span class=\"number\">525</span>, <span class=\"number\">399</span>, <span class=\"number\">574</span>, <span class=\"number\">693</span>, <span class=\"number\">500</span>, <span class=\"number\">189</span>, <span class=\"number\">590</span>, <span class=\"number\">529</span>, <span class=\"number\">972</span>, <span class=\"number\">378</span>, <span class=\"number\">299</span>, <span class=\"number\">461</span>, <span class=\"number\">866</span>, <span class=\"number\">326</span>, <span class=\"number\">43</span>, <span class=\"number\">711</span>, <span class=\"number\">460</span>, <span class=\"number\">426</span>, <span class=\"number\">947</span>, <span class=\"number\">391</span>, <span class=\"number\">536</span>, <span class=\"number\">26</span>, <span class=\"number\">579</span>, <span class=\"number\">304</span>, <span class=\"number\">852</span>, <span class=\"number\">158</span>, <span class=\"number\">621</span>, <span class=\"number\">683</span>, <span class=\"number\">901</span>, <span class=\"number\">237</span>, <span class=\"number\">22</span>, <span class=\"number\">225</span>, <span class=\"number\">59</span>, <span class=\"number\">52</span>, <span class=\"number\">798</span>, <span class=\"number\">262</span>, <span class=\"number\">754</span>, <span class=\"number\">649</span>, <span class=\"number\">504</span>, <span class=\"number\">861</span>, <span class=\"number\">472</span>, <span class=\"number\">480</span>, <span class=\"number\">570</span>, <span class=\"number\">347</span>, <span class=\"number\">891</span>, <span class=\"number\">956</span>, <span class=\"number\">347</span>, <span class=\"number\">31</span>, <span class=\"number\">784</span>, <span class=\"number\">581</span>, <span class=\"number\">668</span>, <span class=\"number\">127</span>, <span class=\"number\">628</span>, <span class=\"number\">962</span>, <span class=\"number\">698</span>, <span class=\"number\">191</span>, <span class=\"number\">313</span>, <span class=\"number\">714</span>, <span class=\"number\">893</span>];</span><br><span class=\"line\"><span class=\"keyword\">var</span> target = <span class=\"number\">101</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> start = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getTime</span>();</span><br><span class=\"line\"><span class=\"keyword\">var</span> result = <span class=\"title function_\">twoSum</span>(numbers, target);</span><br><span class=\"line\"><span class=\"keyword\">var</span> cost = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getTime</span>() - start;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(cost);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(result);</span><br></pre></td></tr></table></figure>","excerpt":"","more":"<blockquote>\n<p>Given an array of integers, find two numbers such that they add up to a specific target number.</p>\n<p>The function twoSum should return indices of the two numbers such that they add up to the target, where index1 must be less than index2. Please note that your returned answers (both index1 and index2) are not zero-based.</p>\n<p>You may assume that each input would have exactly one solution.</p>\n<p>Input: numbers&#x3D;{2, 7, 11, 15}, target&#x3D;9<br>Output: index1&#x3D;1, index2&#x3D;2</p>\n</blockquote>\n<h2 id=\"My-Attempt-Solution1\"><a href=\"#My-Attempt-Solution1\" class=\"headerlink\" title=\"My Attempt Solution1:\"></a>My Attempt Solution1:</h2><p>拿到题目, 我以为很简单, 所以在手机上直接敲代码, 第一次的程序如下, 结果<code>Time Limit Exceeded</code>:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> twoSum = <span class=\"keyword\">function</span> (<span class=\"params\">numbers, target</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, j = i + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> temp = numbers[i] + numbers[j]</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (temp &lt; target) &#123;</span><br><span class=\"line\">            j = j + <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (temp &gt; target) &#123;</span><br><span class=\"line\">            i = i + <span class=\"number\">1</span></span><br><span class=\"line\">            j = i + <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> [i + <span class=\"number\">1</span>, j + <span class=\"number\">1</span>]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> target = <span class=\"number\">16021</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">twoSum</span>(numbers, target));</span><br></pre></td></tr></table></figure>\n\n<p>接下来需要深入理解题意, 感觉连答案都错了.</p>\n<h2 id=\"My-Attempt-Solution2\"><a href=\"#My-Attempt-Solution2\" class=\"headerlink\" title=\"My Attempt Solution2:\"></a>My Attempt Solution2:</h2><p>为了提高速度, 在进入逻辑前进行数组的排序, 结果<code> Wrong Answer</code>:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> twoSum = <span class=\"keyword\">function</span> (<span class=\"params\">numbers, target</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, j = i + <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    numbers.<span class=\"title function_\">sort</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> temp = numbers[i] + numbers[j];</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (temp &lt; target) &#123;</span><br><span class=\"line\">            j = j + <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (temp &gt; target) &#123;</span><br><span class=\"line\">            i = i + <span class=\"number\">1</span>;</span><br><span class=\"line\">            j = i + <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> [i + <span class=\"number\">1</span>, j + <span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> numbers = [<span class=\"number\">3</span>,<span class=\"number\">2</span>,<span class=\"number\">4</span>]</span><br><span class=\"line\"><span class=\"keyword\">var</span> target = <span class=\"number\">6</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> start = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getTime</span>();</span><br><span class=\"line\"><span class=\"keyword\">var</span> result = <span class=\"title function_\">twoSum</span>(numbers, target);</span><br><span class=\"line\"><span class=\"keyword\">var</span> cost = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getTime</span>() - start;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(cost);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(result);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"My-Final-Solution\"><a href=\"#My-Final-Solution\" class=\"headerlink\" title=\"My Final Solution:\"></a>My Final Solution:</h2><p>中间还错了好几次, 还要考虑数据是负数的情况:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> twoSum = <span class=\"keyword\">function</span> (<span class=\"params\">numbers, target</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, j = numbers.<span class=\"property\">length</span> - <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> newNumbers = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> k = <span class=\"number\">0</span>; k &lt; numbers.<span class=\"property\">length</span>; k++) &#123;</span><br><span class=\"line\">        newNumbers.<span class=\"title function_\">push</span>([numbers[k], k]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    newNumbers.<span class=\"title function_\">sort</span>(<span class=\"keyword\">function</span> (<span class=\"params\">a, b</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> a[<span class=\"number\">0</span>] - b[<span class=\"number\">0</span>];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">    );</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> temp = newNumbers[i][<span class=\"number\">0</span>] + newNumbers[j][<span class=\"number\">0</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (temp &lt; target) &#123;</span><br><span class=\"line\">            i++;</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (temp &gt; target) &#123;</span><br><span class=\"line\">            j--;</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> [newNumbers[i][<span class=\"number\">1</span>] + <span class=\"number\">1</span>, newNumbers[j][<span class=\"number\">1</span>] + <span class=\"number\">1</span>].<span class=\"title function_\">sort</span>(<span class=\"keyword\">function</span> (<span class=\"params\">a, b</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> a - b;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> numbers = [<span class=\"number\">572</span>, <span class=\"number\">815</span>, <span class=\"number\">387</span>, <span class=\"number\">418</span>, <span class=\"number\">434</span>, <span class=\"number\">530</span>, <span class=\"number\">376</span>, <span class=\"number\">190</span>, <span class=\"number\">196</span>, <span class=\"number\">74</span>, <span class=\"number\">830</span>, <span class=\"number\">561</span>, <span class=\"number\">973</span>, <span class=\"number\">771</span>, <span class=\"number\">640</span>, <span class=\"number\">37</span>, <span class=\"number\">539</span>, <span class=\"number\">369</span>, <span class=\"number\">327</span>, <span class=\"number\">51</span>, <span class=\"number\">623</span>, <span class=\"number\">575</span>, <span class=\"number\">988</span>, <span class=\"number\">44</span>, <span class=\"number\">659</span>, <span class=\"number\">48</span>, <span class=\"number\">22</span>, <span class=\"number\">776</span>, <span class=\"number\">487</span>, <span class=\"number\">873</span>, <span class=\"number\">486</span>, <span class=\"number\">169</span>, <span class=\"number\">499</span>, <span class=\"number\">82</span>, <span class=\"number\">128</span>, <span class=\"number\">31</span>, <span class=\"number\">386</span>, <span class=\"number\">691</span>, <span class=\"number\">553</span>, <span class=\"number\">848</span>, <span class=\"number\">968</span>, <span class=\"number\">874</span>, <span class=\"number\">692</span>, <span class=\"number\">404</span>, <span class=\"number\">463</span>, <span class=\"number\">285</span>, <span class=\"number\">745</span>, <span class=\"number\">631</span>, <span class=\"number\">304</span>, <span class=\"number\">271</span>, <span class=\"number\">40</span>, <span class=\"number\">921</span>, <span class=\"number\">733</span>, <span class=\"number\">56</span>, <span class=\"number\">883</span>, <span class=\"number\">517</span>, <span class=\"number\">99</span>, <span class=\"number\">580</span>, <span class=\"number\">55</span>, <span class=\"number\">81</span>, <span class=\"number\">232</span>, <span class=\"number\">971</span>, <span class=\"number\">561</span>, <span class=\"number\">683</span>, <span class=\"number\">806</span>, <span class=\"number\">994</span>, <span class=\"number\">823</span>, <span class=\"number\">219</span>, <span class=\"number\">315</span>, <span class=\"number\">564</span>, <span class=\"number\">997</span>, <span class=\"number\">976</span>, <span class=\"number\">158</span>, <span class=\"number\">208</span>, <span class=\"number\">851</span>, <span class=\"number\">206</span>, <span class=\"number\">101</span>, <span class=\"number\">989</span>, <span class=\"number\">542</span>, <span class=\"number\">985</span>, <span class=\"number\">940</span>, <span class=\"number\">116</span>, <span class=\"number\">153</span>, <span class=\"number\">47</span>, <span class=\"number\">806</span>, <span class=\"number\">944</span>, <span class=\"number\">337</span>, <span class=\"number\">903</span>, <span class=\"number\">712</span>, <span class=\"number\">138</span>, <span class=\"number\">236</span>, <span class=\"number\">777</span>, <span class=\"number\">630</span>, <span class=\"number\">912</span>, <span class=\"number\">22</span>, <span class=\"number\">140</span>, <span class=\"number\">525</span>, <span class=\"number\">270</span>, <span class=\"number\">997</span>, <span class=\"number\">763</span>, <span class=\"number\">812</span>, <span class=\"number\">597</span>, <span class=\"number\">806</span>, <span class=\"number\">423</span>, <span class=\"number\">869</span>, <span class=\"number\">926</span>, <span class=\"number\">344</span>, <span class=\"number\">494</span>, <span class=\"number\">858</span>, <span class=\"number\">519</span>, <span class=\"number\">389</span>, <span class=\"number\">627</span>, <span class=\"number\">517</span>, <span class=\"number\">964</span>, <span class=\"number\">74</span>, <span class=\"number\">432</span>, <span class=\"number\">730</span>, <span class=\"number\">843</span>, <span class=\"number\">673</span>, <span class=\"number\">985</span>, <span class=\"number\">819</span>, <span class=\"number\">397</span>, <span class=\"number\">607</span>, <span class=\"number\">34</span>, <span class=\"number\">948</span>, <span class=\"number\">648</span>, <span class=\"number\">43</span>, <span class=\"number\">212</span>, <span class=\"number\">950</span>, <span class=\"number\">235</span>, <span class=\"number\">995</span>, <span class=\"number\">76</span>, <span class=\"number\">439</span>, <span class=\"number\">614</span>, <span class=\"number\">203</span>, <span class=\"number\">313</span>, <span class=\"number\">180</span>, <span class=\"number\">760</span>, <span class=\"number\">210</span>, <span class=\"number\">813</span>, <span class=\"number\">920</span>, <span class=\"number\">229</span>, <span class=\"number\">615</span>, <span class=\"number\">730</span>, <span class=\"number\">359</span>, <span class=\"number\">863</span>, <span class=\"number\">678</span>, <span class=\"number\">43</span>, <span class=\"number\">293</span>, <span class=\"number\">978</span>, <span class=\"number\">305</span>, <span class=\"number\">106</span>, <span class=\"number\">797</span>, <span class=\"number\">769</span>, <span class=\"number\">3</span>, <span class=\"number\">700</span>, <span class=\"number\">945</span>, <span class=\"number\">135</span>, <span class=\"number\">430</span>, <span class=\"number\">965</span>, <span class=\"number\">762</span>, <span class=\"number\">479</span>, <span class=\"number\">152</span>, <span class=\"number\">121</span>, <span class=\"number\">935</span>, <span class=\"number\">809</span>, <span class=\"number\">101</span>, <span class=\"number\">271</span>, <span class=\"number\">428</span>, <span class=\"number\">608</span>, <span class=\"number\">8</span>, <span class=\"number\">983</span>, <span class=\"number\">758</span>, <span class=\"number\">662</span>, <span class=\"number\">755</span>, <span class=\"number\">190</span>, <span class=\"number\">632</span>, <span class=\"number\">792</span>, <span class=\"number\">789</span>, <span class=\"number\">174</span>, <span class=\"number\">869</span>, <span class=\"number\">622</span>, <span class=\"number\">885</span>, <span class=\"number\">626</span>, <span class=\"number\">310</span>, <span class=\"number\">128</span>, <span class=\"number\">233</span>, <span class=\"number\">82</span>, <span class=\"number\">223</span>, <span class=\"number\">339</span>, <span class=\"number\">771</span>, <span class=\"number\">741</span>, <span class=\"number\">227</span>, <span class=\"number\">131</span>, <span class=\"number\">85</span>, <span class=\"number\">51</span>, <span class=\"number\">361</span>, <span class=\"number\">343</span>, <span class=\"number\">641</span>, <span class=\"number\">568</span>, <span class=\"number\">922</span>, <span class=\"number\">145</span>, <span class=\"number\">256</span>, <span class=\"number\">177</span>, <span class=\"number\">329</span>, <span class=\"number\">959</span>, <span class=\"number\">991</span>, <span class=\"number\">293</span>, <span class=\"number\">850</span>, <span class=\"number\">858</span>, <span class=\"number\">76</span>, <span class=\"number\">291</span>, <span class=\"number\">134</span>, <span class=\"number\">254</span>, <span class=\"number\">956</span>, <span class=\"number\">971</span>, <span class=\"number\">718</span>, <span class=\"number\">391</span>, <span class=\"number\">336</span>, <span class=\"number\">899</span>, <span class=\"number\">206</span>, <span class=\"number\">642</span>, <span class=\"number\">254</span>, <span class=\"number\">851</span>, <span class=\"number\">274</span>, <span class=\"number\">239</span>, <span class=\"number\">538</span>, <span class=\"number\">418</span>, <span class=\"number\">21</span>, <span class=\"number\">232</span>, <span class=\"number\">706</span>, <span class=\"number\">275</span>, <span class=\"number\">615</span>, <span class=\"number\">568</span>, <span class=\"number\">714</span>, <span class=\"number\">234</span>, <span class=\"number\">567</span>, <span class=\"number\">994</span>, <span class=\"number\">368</span>, <span class=\"number\">54</span>, <span class=\"number\">744</span>, <span class=\"number\">498</span>, <span class=\"number\">380</span>, <span class=\"number\">594</span>, <span class=\"number\">415</span>, <span class=\"number\">286</span>, <span class=\"number\">260</span>, <span class=\"number\">582</span>, <span class=\"number\">522</span>, <span class=\"number\">795</span>, <span class=\"number\">261</span>, <span class=\"number\">437</span>, <span class=\"number\">292</span>, <span class=\"number\">887</span>, <span class=\"number\">405</span>, <span class=\"number\">293</span>, <span class=\"number\">946</span>, <span class=\"number\">678</span>, <span class=\"number\">686</span>, <span class=\"number\">682</span>, <span class=\"number\">501</span>, <span class=\"number\">238</span>, <span class=\"number\">245</span>, <span class=\"number\">380</span>, <span class=\"number\">218</span>, <span class=\"number\">591</span>, <span class=\"number\">722</span>, <span class=\"number\">519</span>, <span class=\"number\">770</span>, <span class=\"number\">359</span>, <span class=\"number\">340</span>, <span class=\"number\">215</span>, <span class=\"number\">151</span>, <span class=\"number\">368</span>, <span class=\"number\">356</span>, <span class=\"number\">795</span>, <span class=\"number\">91</span>, <span class=\"number\">250</span>, <span class=\"number\">413</span>, <span class=\"number\">970</span>, <span class=\"number\">37</span>, <span class=\"number\">941</span>, <span class=\"number\">356</span>, <span class=\"number\">648</span>, <span class=\"number\">594</span>, <span class=\"number\">513</span>, <span class=\"number\">484</span>, <span class=\"number\">364</span>, <span class=\"number\">484</span>, <span class=\"number\">909</span>, <span class=\"number\">292</span>, <span class=\"number\">501</span>, <span class=\"number\">59</span>, <span class=\"number\">982</span>, <span class=\"number\">686</span>, <span class=\"number\">827</span>, <span class=\"number\">461</span>, <span class=\"number\">60</span>, <span class=\"number\">557</span>, <span class=\"number\">178</span>, <span class=\"number\">952</span>, <span class=\"number\">218</span>, <span class=\"number\">634</span>, <span class=\"number\">785</span>, <span class=\"number\">251</span>, <span class=\"number\">290</span>, <span class=\"number\">156</span>, <span class=\"number\">300</span>, <span class=\"number\">711</span>, <span class=\"number\">322</span>, <span class=\"number\">570</span>, <span class=\"number\">820</span>, <span class=\"number\">191</span>, <span class=\"number\">755</span>, <span class=\"number\">429</span>, <span class=\"number\">950</span>, <span class=\"number\">18</span>, <span class=\"number\">917</span>, <span class=\"number\">905</span>, <span class=\"number\">905</span>, <span class=\"number\">126</span>, <span class=\"number\">790</span>, <span class=\"number\">638</span>, <span class=\"number\">94</span>, <span class=\"number\">857</span>, <span class=\"number\">235</span>, <span class=\"number\">889</span>, <span class=\"number\">611</span>, <span class=\"number\">605</span>, <span class=\"number\">203</span>, <span class=\"number\">859</span>, <span class=\"number\">749</span>, <span class=\"number\">874</span>, <span class=\"number\">530</span>, <span class=\"number\">727</span>, <span class=\"number\">764</span>, <span class=\"number\">197</span>, <span class=\"number\">537</span>, <span class=\"number\">951</span>, <span class=\"number\">919</span>, <span class=\"number\">24</span>, <span class=\"number\">341</span>, <span class=\"number\">334</span>, <span class=\"number\">505</span>, <span class=\"number\">796</span>, <span class=\"number\">619</span>, <span class=\"number\">492</span>, <span class=\"number\">295</span>, <span class=\"number\">380</span>, <span class=\"number\">128</span>, <span class=\"number\">533</span>, <span class=\"number\">600</span>, <span class=\"number\">160</span>, <span class=\"number\">51</span>, <span class=\"number\">249</span>, <span class=\"number\">5</span>, <span class=\"number\">837</span>, <span class=\"number\">905</span>, <span class=\"number\">747</span>, <span class=\"number\">505</span>, <span class=\"number\">82</span>, <span class=\"number\">158</span>, <span class=\"number\">687</span>, <span class=\"number\">507</span>, <span class=\"number\">339</span>, <span class=\"number\">575</span>, <span class=\"number\">206</span>, <span class=\"number\">28</span>, <span class=\"number\">29</span>, <span class=\"number\">91</span>, <span class=\"number\">459</span>, <span class=\"number\">118</span>, <span class=\"number\">284</span>, <span class=\"number\">995</span>, <span class=\"number\">544</span>, <span class=\"number\">3</span>, <span class=\"number\">154</span>, <span class=\"number\">89</span>, <span class=\"number\">840</span>, <span class=\"number\">364</span>, <span class=\"number\">682</span>, <span class=\"number\">700</span>, <span class=\"number\">143</span>, <span class=\"number\">173</span>, <span class=\"number\">216</span>, <span class=\"number\">290</span>, <span class=\"number\">733</span>, <span class=\"number\">525</span>, <span class=\"number\">399</span>, <span class=\"number\">574</span>, <span class=\"number\">693</span>, <span class=\"number\">500</span>, <span class=\"number\">189</span>, <span class=\"number\">590</span>, <span class=\"number\">529</span>, <span class=\"number\">972</span>, <span class=\"number\">378</span>, <span class=\"number\">299</span>, <span class=\"number\">461</span>, <span class=\"number\">866</span>, <span class=\"number\">326</span>, <span class=\"number\">43</span>, <span class=\"number\">711</span>, <span class=\"number\">460</span>, <span class=\"number\">426</span>, <span class=\"number\">947</span>, <span class=\"number\">391</span>, <span class=\"number\">536</span>, <span class=\"number\">26</span>, <span class=\"number\">579</span>, <span class=\"number\">304</span>, <span class=\"number\">852</span>, <span class=\"number\">158</span>, <span class=\"number\">621</span>, <span class=\"number\">683</span>, <span class=\"number\">901</span>, <span class=\"number\">237</span>, <span class=\"number\">22</span>, <span class=\"number\">225</span>, <span class=\"number\">59</span>, <span class=\"number\">52</span>, <span class=\"number\">798</span>, <span class=\"number\">262</span>, <span class=\"number\">754</span>, <span class=\"number\">649</span>, <span class=\"number\">504</span>, <span class=\"number\">861</span>, <span class=\"number\">472</span>, <span class=\"number\">480</span>, <span class=\"number\">570</span>, <span class=\"number\">347</span>, <span class=\"number\">891</span>, <span class=\"number\">956</span>, <span class=\"number\">347</span>, <span class=\"number\">31</span>, <span class=\"number\">784</span>, <span class=\"number\">581</span>, <span class=\"number\">668</span>, <span class=\"number\">127</span>, <span class=\"number\">628</span>, <span class=\"number\">962</span>, <span class=\"number\">698</span>, <span class=\"number\">191</span>, <span class=\"number\">313</span>, <span class=\"number\">714</span>, <span class=\"number\">893</span>];</span><br><span class=\"line\"><span class=\"keyword\">var</span> target = <span class=\"number\">101</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> start = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getTime</span>();</span><br><span class=\"line\"><span class=\"keyword\">var</span> result = <span class=\"title function_\">twoSum</span>(numbers, target);</span><br><span class=\"line\"><span class=\"keyword\">var</span> cost = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getTime</span>() - start;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(cost);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(result);</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"maven开发web","published":1,"_content":"### 准备\nMaven是一个版本控制和编译的工具，所以普通的Eclipse是无法胜任这一工作的，我们需要给Eclipse做两个改动：\n\n1. m2e插件安装\n\n> 我使用的是`·Indigo Service Release 2·`, 第三方的m2e插件无法正常安装，但是可以使用`Install New Software`, \n> 加载官方的仓库路径`http://download.eclipse.org/releases/indigo`,\n> 然后选择`General Purpose Tolls` -> `m2e - Maven Integration for Eclipse`\n\n2. 安装相应的connectors -- `Maven Integration for WTP`\n\n> `Preference` -> `Maven` -> `Discovery` -> `Open Catalog` -> 'Maven Integration for WTP'安装相应的\n> ps. 这里的`WTP`全称是Web Tools Platform - eclipse中开发web应用必备的插件\n\n\n\n","source":"_posts/study/2015-05-09-maven开发web.md","raw":"---\nlayout: post\ntitle: maven开发web\ncategories: [学习]\ntags: [websocket,]\npublished: True\n\n---\n### 准备\nMaven是一个版本控制和编译的工具，所以普通的Eclipse是无法胜任这一工作的，我们需要给Eclipse做两个改动：\n\n1. m2e插件安装\n\n> 我使用的是`·Indigo Service Release 2·`, 第三方的m2e插件无法正常安装，但是可以使用`Install New Software`, \n> 加载官方的仓库路径`http://download.eclipse.org/releases/indigo`,\n> 然后选择`General Purpose Tolls` -> `m2e - Maven Integration for Eclipse`\n\n2. 安装相应的connectors -- `Maven Integration for WTP`\n\n> `Preference` -> `Maven` -> `Discovery` -> `Open Catalog` -> 'Maven Integration for WTP'安装相应的\n> ps. 这里的`WTP`全称是Web Tools Platform - eclipse中开发web应用必备的插件\n\n\n\n","slug":"study/2015-05-09-maven开发web","date":"2025-03-22T11:29:07.816Z","updated":"2025-03-22T11:29:07.816Z","comments":1,"photos":[],"_id":"cm8k4mbe8001aq69dgfd794r4","content":"<h3 id=\"准备\"><a href=\"#准备\" class=\"headerlink\" title=\"准备\"></a>准备</h3><p>Maven是一个版本控制和编译的工具，所以普通的Eclipse是无法胜任这一工作的，我们需要给Eclipse做两个改动：</p>\n<ol>\n<li>m2e插件安装</li>\n</ol>\n<blockquote>\n<p>我使用的是<code>·Indigo Service Release 2·</code>, 第三方的m2e插件无法正常安装，但是可以使用<code>Install New Software</code>,<br>加载官方的仓库路径<code>http://download.eclipse.org/releases/indigo</code>,<br>然后选择<code>General Purpose Tolls</code> -&gt; <code>m2e - Maven Integration for Eclipse</code></p>\n</blockquote>\n<ol start=\"2\">\n<li>安装相应的connectors – <code>Maven Integration for WTP</code></li>\n</ol>\n<blockquote>\n<p><code>Preference</code> -&gt; <code>Maven</code> -&gt; <code>Discovery</code> -&gt; <code>Open Catalog</code> -&gt; ‘Maven Integration for WTP’安装相应的<br>ps. 这里的<code>WTP</code>全称是Web Tools Platform - eclipse中开发web应用必备的插件</p>\n</blockquote>\n","excerpt":"","more":"<h3 id=\"准备\"><a href=\"#准备\" class=\"headerlink\" title=\"准备\"></a>准备</h3><p>Maven是一个版本控制和编译的工具，所以普通的Eclipse是无法胜任这一工作的，我们需要给Eclipse做两个改动：</p>\n<ol>\n<li>m2e插件安装</li>\n</ol>\n<blockquote>\n<p>我使用的是<code>·Indigo Service Release 2·</code>, 第三方的m2e插件无法正常安装，但是可以使用<code>Install New Software</code>,<br>加载官方的仓库路径<code>http://download.eclipse.org/releases/indigo</code>,<br>然后选择<code>General Purpose Tolls</code> -&gt; <code>m2e - Maven Integration for Eclipse</code></p>\n</blockquote>\n<ol start=\"2\">\n<li>安装相应的connectors – <code>Maven Integration for WTP</code></li>\n</ol>\n<blockquote>\n<p><code>Preference</code> -&gt; <code>Maven</code> -&gt; <code>Discovery</code> -&gt; <code>Open Catalog</code> -&gt; ‘Maven Integration for WTP’安装相应的<br>ps. 这里的<code>WTP</code>全称是Web Tools Platform - eclipse中开发web应用必备的插件</p>\n</blockquote>\n"},{"layout":"post","title":"区间查找算法","published":1,"_content":"有一个需求，业务里需要判断一个数组的数值变化趋势，所以定义了一套门限，但是现在觉得这个门限太全局了，需要缩小范围，\n最好一段一段的，趋势的判断也会改变原来的逻辑，每次获取门限的时候都带上数组的索引，因此需要设计一个算法，接受到一个\n数组索引，可以快速查询出对应的门限区间，进而拿到该门限。\n\n## 分析\n需要满足以下几个条件：\n1. 区间有可能会重合，需要做区间的去重操作；\n2. 区间的查询速度一定要快，因为原始的数组非常大，每个数组元素都会访问一遍；\n\n\n## 性能考虑\n因为有可能分段会非常多，所以提升速度，选用二叉搜索来提升效率，但是有一点需要注意，二叉查询前必须要确保区间没有重叠，\n这个可以最后做一下数据的预处理。\n\n## 可行性分析\n有序的区间序列有特点：当前区间的起始一定小于前一个区间的结束；因此如果给定一个值想知道在哪个区间，二分是可行的。\n\n## 搜索实现\n以下是保证区间没有重复后所实现的搜索方法。因为我的代码还没有用作实际的生产，所以只是定义接口进行测试.\n\n### 伪代码\n``` java\ndouble value; // 给定的值\nIRange wantedRange; // 结果区间\nIRange[] range; // 区间端信息\nint start=0, end=range.length; // 区间的默认始末\n\n// 二分查找\nwhile(start <= end)\n{\n\tmid = (start + end) / 2; //折半\n\n\tif(value <= range[mid].start)\n\t{\n  \t\tend = mid - 1; \n  \t\tcontinue; // 修正区间继续\n\t}\n\n\tif(value > range[mid].end)\n\t{\n  \t\tstart = mid + 1;\n  \t\tcontinue; // 修正区间继续\n\t}\n\n\twantedRange = range[mid]; // 找到了\n\tbreak;\n}\n```\n\n### 类型说明\n因为没有具体类型的设计，所以定义接口(`IRagion.java`)类型供算法使用:\n\n``` java\npackage com.moss.arithmetic;\n\n/**\n * 类型： 区域, 左开右闭\n */\npublic interface IRagion {\n\n    /**\n     * 获取区间起始\n     *\n     * @return 区间起始\n     */\n    double getStart();\n\n    /**\n     * 获取区间结束\n     *\n     * @return 区间结束\n     */\n    double getEnd();\n\n    /**\n     * 修正区间的起始\n     *\n     * @param start 新的区间起始\n     */\n    void setStart(double start);\n\n    /**\n     * 修正区间结束\n     *\n     * @param end 新的区间结束\n     */\n    void setEnd(double end);\n}\n```\n\n### 抽象成策略\n因为考虑到可能还会有更加完美的算法，所以搜素定义成策略接口(`IRagionStrategy.java`)，做到与具体实现分离:\n\n```java\npackage com.moss.arithmetic;\n/**\n * 区间搜索策略接口\n */\npublic interface IRagionStrategy {\n\n    /** 根据给定的值搜索所在的区间， 如果没有找到， 返回null */\n    IRagion search(double value);\n}\n```\n\n### 具体实现\n目前我能想到的好方法还只是使用二叉来提高搜索效率`RagionStrategy.java`:\n\n```java\npackage com.moss.arithmetic;\n\nimport java.util.List;\n\n/**\n * 分区查找策略\n */\npublic class RagionStrategy implements IRagionStrategy {\n\n    /**\n     * 保存分段信息\n     */\n    private List<IRagion> ragionList;\n\n    /**\n     * 当前的位置\n     */\n    private double value;\n\n    /**\n     * 入参务必要保证区间不能重合\n     *\n     * @param ragionList 区间列表\n     */\n    public RagionStrategy(List<IRagion> ragionList) {\n        this.ragionList = ragionList;\n    }\n\n    /**\n     * 搜索距离所在的区间\n     *\n     * @param value 输入的位置\n     * @return 位置所处的区间， 如果找不到返回null\n     */\n    @Override\n    public IRagion search(double value) {\n        return binarySearch(value);\n    }\n\n    /**\n     * 二分查找\n     *\n     * @param value 需要查询的值\n     * @return 找到的值所在区间\n     */\n    private IRagion binarySearch(double value) {\n\n        // 默认找不到区间\n        IRagion ret = null;\n\n        // 初始化区间的始末\n        int start = 0;\n        int end = ragionList.size() - 1;\n\n        // 只要区间合法， 就会一直搜索\n        while (start <= end) {\n\n            // 取出中点计算\n            int mid = (start + end) / 2;\n            IRagion ragion = ragionList.get(mid);\n\n            // 如果要找的值比区间起始还要小，则只有区间左边的才有可能是\n            if (Double.compare(value, ragion.getStart()) <= 0) {\n                end = mid - 1;\n                continue;\n            }\n\n            // 如果要找的值比区间的结束还要大，则只有区间右边的才有可能是\n            if (value > ragion.getEnd()) {\n                start = mid + 1;\n                continue;\n            }\n\n            // 如果改值落在区间内(start, end],则说明找到了\n            ret = ragion;\n            break;\n        }\n\n        return ret;\n    }\n\n}\n\n```\n\n## 处理区间，去除重叠部分\n假定我们的规则是，区间重叠部分认为是无效的部分，那么处理区间的逻辑简化为修正区间的起始和结束。\n\n### 伪代码\n1. 按照区间的起始位置排序, 这样区间至少起始是有序的；\n2. 如果区间存在重叠，那么一定是当前区间的结束位置要后于下一个区间的起始，则去除重复后, \n当前区间的结束就是下个区间的开始，下个区间的开始就是当前区间的结束，相当于交换前后当前区间的结束和下一个区间的开始\n\n### 代码实现\n因为是数据的特殊预处理，所以用一个简单的适配器`RagionAdapter.java`:\n\n```java\npackage com.moss.arithmetic;\n\nimport java.util.Collections;\nimport java.util.Comparator;\nimport java.util.List;\n\n/**\n * 区间适配器，在进入算法前，对数据进行预处理\n */\npublic class RagionAdapter {\n\n    /**\n     * 区间比较，按照区间的起始位置比较\n     */\n    private class RagionComparator implements Comparator<IRagion> {\n\n        @Override\n        public int compare(IRagion o1, IRagion o2) {\n            return Double.compare(o1.getStart(), o2.getStart());\n        }\n\n    }\n\n    /**\n     * 处理区间为后面的算法做准备，去除区间的重合部分\n     *\n     * @param ragionList 原始的区间列表\n     */\n    public void handleRagion(List<IRagion> ragionList) {\n\n        if (ragionList == null) {\n            return;\n        }\n\n        // 先排序区间\n        Collections.sort(ragionList, new RagionComparator());\n\n        for (int i = 0, end = ragionList.size() - 1; i < end; i++) {\n\n            IRagion currentRagion = ragionList.get(i);\n            IRagion nextRagion = ragionList.get(i + 1);\n\n            double currentEnd = currentRagion.getEnd();\n            double nextStart = nextRagion.getStart();\n\n            // 如果发现区间重合，直接去掉重合部分\n            if (nextStart > currentEnd) {\n                currentRagion.setEnd(nextStart);\n                nextRagion.setStart(currentEnd);\n            }\n\n        }\n    }\n}\n\n```\n","source":"_posts/study/2015-08-09-区间查找算法.md","raw":"---\nlayout: post\ntitle: 区间查找算法\ncategories: [算法]\ntags: [算法，java]\npublished: True\n\n---\n有一个需求，业务里需要判断一个数组的数值变化趋势，所以定义了一套门限，但是现在觉得这个门限太全局了，需要缩小范围，\n最好一段一段的，趋势的判断也会改变原来的逻辑，每次获取门限的时候都带上数组的索引，因此需要设计一个算法，接受到一个\n数组索引，可以快速查询出对应的门限区间，进而拿到该门限。\n\n## 分析\n需要满足以下几个条件：\n1. 区间有可能会重合，需要做区间的去重操作；\n2. 区间的查询速度一定要快，因为原始的数组非常大，每个数组元素都会访问一遍；\n\n\n## 性能考虑\n因为有可能分段会非常多，所以提升速度，选用二叉搜索来提升效率，但是有一点需要注意，二叉查询前必须要确保区间没有重叠，\n这个可以最后做一下数据的预处理。\n\n## 可行性分析\n有序的区间序列有特点：当前区间的起始一定小于前一个区间的结束；因此如果给定一个值想知道在哪个区间，二分是可行的。\n\n## 搜索实现\n以下是保证区间没有重复后所实现的搜索方法。因为我的代码还没有用作实际的生产，所以只是定义接口进行测试.\n\n### 伪代码\n``` java\ndouble value; // 给定的值\nIRange wantedRange; // 结果区间\nIRange[] range; // 区间端信息\nint start=0, end=range.length; // 区间的默认始末\n\n// 二分查找\nwhile(start <= end)\n{\n\tmid = (start + end) / 2; //折半\n\n\tif(value <= range[mid].start)\n\t{\n  \t\tend = mid - 1; \n  \t\tcontinue; // 修正区间继续\n\t}\n\n\tif(value > range[mid].end)\n\t{\n  \t\tstart = mid + 1;\n  \t\tcontinue; // 修正区间继续\n\t}\n\n\twantedRange = range[mid]; // 找到了\n\tbreak;\n}\n```\n\n### 类型说明\n因为没有具体类型的设计，所以定义接口(`IRagion.java`)类型供算法使用:\n\n``` java\npackage com.moss.arithmetic;\n\n/**\n * 类型： 区域, 左开右闭\n */\npublic interface IRagion {\n\n    /**\n     * 获取区间起始\n     *\n     * @return 区间起始\n     */\n    double getStart();\n\n    /**\n     * 获取区间结束\n     *\n     * @return 区间结束\n     */\n    double getEnd();\n\n    /**\n     * 修正区间的起始\n     *\n     * @param start 新的区间起始\n     */\n    void setStart(double start);\n\n    /**\n     * 修正区间结束\n     *\n     * @param end 新的区间结束\n     */\n    void setEnd(double end);\n}\n```\n\n### 抽象成策略\n因为考虑到可能还会有更加完美的算法，所以搜素定义成策略接口(`IRagionStrategy.java`)，做到与具体实现分离:\n\n```java\npackage com.moss.arithmetic;\n/**\n * 区间搜索策略接口\n */\npublic interface IRagionStrategy {\n\n    /** 根据给定的值搜索所在的区间， 如果没有找到， 返回null */\n    IRagion search(double value);\n}\n```\n\n### 具体实现\n目前我能想到的好方法还只是使用二叉来提高搜索效率`RagionStrategy.java`:\n\n```java\npackage com.moss.arithmetic;\n\nimport java.util.List;\n\n/**\n * 分区查找策略\n */\npublic class RagionStrategy implements IRagionStrategy {\n\n    /**\n     * 保存分段信息\n     */\n    private List<IRagion> ragionList;\n\n    /**\n     * 当前的位置\n     */\n    private double value;\n\n    /**\n     * 入参务必要保证区间不能重合\n     *\n     * @param ragionList 区间列表\n     */\n    public RagionStrategy(List<IRagion> ragionList) {\n        this.ragionList = ragionList;\n    }\n\n    /**\n     * 搜索距离所在的区间\n     *\n     * @param value 输入的位置\n     * @return 位置所处的区间， 如果找不到返回null\n     */\n    @Override\n    public IRagion search(double value) {\n        return binarySearch(value);\n    }\n\n    /**\n     * 二分查找\n     *\n     * @param value 需要查询的值\n     * @return 找到的值所在区间\n     */\n    private IRagion binarySearch(double value) {\n\n        // 默认找不到区间\n        IRagion ret = null;\n\n        // 初始化区间的始末\n        int start = 0;\n        int end = ragionList.size() - 1;\n\n        // 只要区间合法， 就会一直搜索\n        while (start <= end) {\n\n            // 取出中点计算\n            int mid = (start + end) / 2;\n            IRagion ragion = ragionList.get(mid);\n\n            // 如果要找的值比区间起始还要小，则只有区间左边的才有可能是\n            if (Double.compare(value, ragion.getStart()) <= 0) {\n                end = mid - 1;\n                continue;\n            }\n\n            // 如果要找的值比区间的结束还要大，则只有区间右边的才有可能是\n            if (value > ragion.getEnd()) {\n                start = mid + 1;\n                continue;\n            }\n\n            // 如果改值落在区间内(start, end],则说明找到了\n            ret = ragion;\n            break;\n        }\n\n        return ret;\n    }\n\n}\n\n```\n\n## 处理区间，去除重叠部分\n假定我们的规则是，区间重叠部分认为是无效的部分，那么处理区间的逻辑简化为修正区间的起始和结束。\n\n### 伪代码\n1. 按照区间的起始位置排序, 这样区间至少起始是有序的；\n2. 如果区间存在重叠，那么一定是当前区间的结束位置要后于下一个区间的起始，则去除重复后, \n当前区间的结束就是下个区间的开始，下个区间的开始就是当前区间的结束，相当于交换前后当前区间的结束和下一个区间的开始\n\n### 代码实现\n因为是数据的特殊预处理，所以用一个简单的适配器`RagionAdapter.java`:\n\n```java\npackage com.moss.arithmetic;\n\nimport java.util.Collections;\nimport java.util.Comparator;\nimport java.util.List;\n\n/**\n * 区间适配器，在进入算法前，对数据进行预处理\n */\npublic class RagionAdapter {\n\n    /**\n     * 区间比较，按照区间的起始位置比较\n     */\n    private class RagionComparator implements Comparator<IRagion> {\n\n        @Override\n        public int compare(IRagion o1, IRagion o2) {\n            return Double.compare(o1.getStart(), o2.getStart());\n        }\n\n    }\n\n    /**\n     * 处理区间为后面的算法做准备，去除区间的重合部分\n     *\n     * @param ragionList 原始的区间列表\n     */\n    public void handleRagion(List<IRagion> ragionList) {\n\n        if (ragionList == null) {\n            return;\n        }\n\n        // 先排序区间\n        Collections.sort(ragionList, new RagionComparator());\n\n        for (int i = 0, end = ragionList.size() - 1; i < end; i++) {\n\n            IRagion currentRagion = ragionList.get(i);\n            IRagion nextRagion = ragionList.get(i + 1);\n\n            double currentEnd = currentRagion.getEnd();\n            double nextStart = nextRagion.getStart();\n\n            // 如果发现区间重合，直接去掉重合部分\n            if (nextStart > currentEnd) {\n                currentRagion.setEnd(nextStart);\n                nextRagion.setStart(currentEnd);\n            }\n\n        }\n    }\n}\n\n```\n","slug":"study/2015-08-09-区间查找算法","date":"2025-03-22T11:29:07.816Z","updated":"2025-03-22T11:29:07.816Z","comments":1,"photos":[],"_id":"cm8k4mbe9001bq69d7j6ehphf","content":"<p>有一个需求，业务里需要判断一个数组的数值变化趋势，所以定义了一套门限，但是现在觉得这个门限太全局了，需要缩小范围，<br>最好一段一段的，趋势的判断也会改变原来的逻辑，每次获取门限的时候都带上数组的索引，因此需要设计一个算法，接受到一个<br>数组索引，可以快速查询出对应的门限区间，进而拿到该门限。</p>\n<h2 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h2><p>需要满足以下几个条件：</p>\n<ol>\n<li>区间有可能会重合，需要做区间的去重操作；</li>\n<li>区间的查询速度一定要快，因为原始的数组非常大，每个数组元素都会访问一遍；</li>\n</ol>\n<h2 id=\"性能考虑\"><a href=\"#性能考虑\" class=\"headerlink\" title=\"性能考虑\"></a>性能考虑</h2><p>因为有可能分段会非常多，所以提升速度，选用二叉搜索来提升效率，但是有一点需要注意，二叉查询前必须要确保区间没有重叠，<br>这个可以最后做一下数据的预处理。</p>\n<h2 id=\"可行性分析\"><a href=\"#可行性分析\" class=\"headerlink\" title=\"可行性分析\"></a>可行性分析</h2><p>有序的区间序列有特点：当前区间的起始一定小于前一个区间的结束；因此如果给定一个值想知道在哪个区间，二分是可行的。</p>\n<h2 id=\"搜索实现\"><a href=\"#搜索实现\" class=\"headerlink\" title=\"搜索实现\"></a>搜索实现</h2><p>以下是保证区间没有重复后所实现的搜索方法。因为我的代码还没有用作实际的生产，所以只是定义接口进行测试.</p>\n<h3 id=\"伪代码\"><a href=\"#伪代码\" class=\"headerlink\" title=\"伪代码\"></a>伪代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">double</span> value; <span class=\"comment\">// 给定的值</span></span><br><span class=\"line\">IRange wantedRange; <span class=\"comment\">// 结果区间</span></span><br><span class=\"line\">IRange[] range; <span class=\"comment\">// 区间端信息</span></span><br><span class=\"line\"><span class=\"type\">int</span> start=<span class=\"number\">0</span>, end=range.length; <span class=\"comment\">// 区间的默认始末</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 二分查找</span></span><br><span class=\"line\"><span class=\"keyword\">while</span>(start &lt;= end)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tmid = (start + end) / <span class=\"number\">2</span>; <span class=\"comment\">//折半</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(value &lt;= range[mid].start)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">  \t\tend = mid - <span class=\"number\">1</span>; </span><br><span class=\"line\">  \t\t<span class=\"keyword\">continue</span>; <span class=\"comment\">// 修正区间继续</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(value &gt; range[mid].end)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">  \t\tstart = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">  \t\t<span class=\"keyword\">continue</span>; <span class=\"comment\">// 修正区间继续</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\twantedRange = range[mid]; <span class=\"comment\">// 找到了</span></span><br><span class=\"line\">\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"类型说明\"><a href=\"#类型说明\" class=\"headerlink\" title=\"类型说明\"></a>类型说明</h3><p>因为没有具体类型的设计，所以定义接口(<code>IRagion.java</code>)类型供算法使用:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.moss.arithmetic;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 类型： 区域, 左开右闭</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">IRagion</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取区间起始</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 区间起始</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"type\">double</span> <span class=\"title function_\">getStart</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取区间结束</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 区间结束</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"type\">double</span> <span class=\"title function_\">getEnd</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 修正区间的起始</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> start 新的区间起始</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">setStart</span><span class=\"params\">(<span class=\"type\">double</span> start)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 修正区间结束</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> end 新的区间结束</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">setEnd</span><span class=\"params\">(<span class=\"type\">double</span> end)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"抽象成策略\"><a href=\"#抽象成策略\" class=\"headerlink\" title=\"抽象成策略\"></a>抽象成策略</h3><p>因为考虑到可能还会有更加完美的算法，所以搜素定义成策略接口(<code>IRagionStrategy.java</code>)，做到与具体实现分离:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.moss.arithmetic;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 区间搜索策略接口</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">IRagionStrategy</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/** 根据给定的值搜索所在的区间， 如果没有找到， 返回null */</span></span><br><span class=\"line\">    IRagion <span class=\"title function_\">search</span><span class=\"params\">(<span class=\"type\">double</span> value)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"具体实现\"><a href=\"#具体实现\" class=\"headerlink\" title=\"具体实现\"></a>具体实现</h3><p>目前我能想到的好方法还只是使用二叉来提高搜索效率<code>RagionStrategy.java</code>:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.moss.arithmetic;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 分区查找策略</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">RagionStrategy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">IRagionStrategy</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 保存分段信息</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;IRagion&gt; ragionList;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 当前的位置</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">double</span> value;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 入参务必要保证区间不能重合</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> ragionList 区间列表</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">RagionStrategy</span><span class=\"params\">(List&lt;IRagion&gt; ragionList)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.ragionList = ragionList;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 搜索距离所在的区间</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 输入的位置</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 位置所处的区间， 如果找不到返回null</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> IRagion <span class=\"title function_\">search</span><span class=\"params\">(<span class=\"type\">double</span> value)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> binarySearch(value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 二分查找</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 需要查询的值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 找到的值所在区间</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> IRagion <span class=\"title function_\">binarySearch</span><span class=\"params\">(<span class=\"type\">double</span> value)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 默认找不到区间</span></span><br><span class=\"line\">        <span class=\"type\">IRagion</span> <span class=\"variable\">ret</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 初始化区间的始末</span></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">start</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">end</span> <span class=\"operator\">=</span> ragionList.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 只要区间合法， 就会一直搜索</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (start &lt;= end) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 取出中点计算</span></span><br><span class=\"line\">            <span class=\"type\">int</span> <span class=\"variable\">mid</span> <span class=\"operator\">=</span> (start + end) / <span class=\"number\">2</span>;</span><br><span class=\"line\">            <span class=\"type\">IRagion</span> <span class=\"variable\">ragion</span> <span class=\"operator\">=</span> ragionList.get(mid);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 如果要找的值比区间起始还要小，则只有区间左边的才有可能是</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (Double.compare(value, ragion.getStart()) &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                end = mid - <span class=\"number\">1</span>;</span><br><span class=\"line\">                <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 如果要找的值比区间的结束还要大，则只有区间右边的才有可能是</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (value &gt; ragion.getEnd()) &#123;</span><br><span class=\"line\">                start = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">                <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 如果改值落在区间内(start, end],则说明找到了</span></span><br><span class=\"line\">            ret = ragion;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> ret;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"处理区间，去除重叠部分\"><a href=\"#处理区间，去除重叠部分\" class=\"headerlink\" title=\"处理区间，去除重叠部分\"></a>处理区间，去除重叠部分</h2><p>假定我们的规则是，区间重叠部分认为是无效的部分，那么处理区间的逻辑简化为修正区间的起始和结束。</p>\n<h3 id=\"伪代码-1\"><a href=\"#伪代码-1\" class=\"headerlink\" title=\"伪代码\"></a>伪代码</h3><ol>\n<li>按照区间的起始位置排序, 这样区间至少起始是有序的；</li>\n<li>如果区间存在重叠，那么一定是当前区间的结束位置要后于下一个区间的起始，则去除重复后,<br>当前区间的结束就是下个区间的开始，下个区间的开始就是当前区间的结束，相当于交换前后当前区间的结束和下一个区间的开始</li>\n</ol>\n<h3 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><p>因为是数据的特殊预处理，所以用一个简单的适配器<code>RagionAdapter.java</code>:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.moss.arithmetic;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Collections;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Comparator;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 区间适配器，在进入算法前，对数据进行预处理</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">RagionAdapter</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 区间比较，按照区间的起始位置比较</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">class</span> <span class=\"title class_\">RagionComparator</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Comparator</span>&lt;IRagion&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">compare</span><span class=\"params\">(IRagion o1, IRagion o2)</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> Double.compare(o1.getStart(), o2.getStart());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 处理区间为后面的算法做准备，去除区间的重合部分</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> ragionList 原始的区间列表</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">handleRagion</span><span class=\"params\">(List&lt;IRagion&gt; ragionList)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ragionList == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 先排序区间</span></span><br><span class=\"line\">        Collections.sort(ragionList, <span class=\"keyword\">new</span> <span class=\"title class_\">RagionComparator</span>());</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>, end = ragionList.size() - <span class=\"number\">1</span>; i &lt; end; i++) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"type\">IRagion</span> <span class=\"variable\">currentRagion</span> <span class=\"operator\">=</span> ragionList.get(i);</span><br><span class=\"line\">            <span class=\"type\">IRagion</span> <span class=\"variable\">nextRagion</span> <span class=\"operator\">=</span> ragionList.get(i + <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"type\">double</span> <span class=\"variable\">currentEnd</span> <span class=\"operator\">=</span> currentRagion.getEnd();</span><br><span class=\"line\">            <span class=\"type\">double</span> <span class=\"variable\">nextStart</span> <span class=\"operator\">=</span> nextRagion.getStart();</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 如果发现区间重合，直接去掉重合部分</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (nextStart &gt; currentEnd) &#123;</span><br><span class=\"line\">                currentRagion.setEnd(nextStart);</span><br><span class=\"line\">                nextRagion.setStart(currentEnd);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n","excerpt":"","more":"<p>有一个需求，业务里需要判断一个数组的数值变化趋势，所以定义了一套门限，但是现在觉得这个门限太全局了，需要缩小范围，<br>最好一段一段的，趋势的判断也会改变原来的逻辑，每次获取门限的时候都带上数组的索引，因此需要设计一个算法，接受到一个<br>数组索引，可以快速查询出对应的门限区间，进而拿到该门限。</p>\n<h2 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h2><p>需要满足以下几个条件：</p>\n<ol>\n<li>区间有可能会重合，需要做区间的去重操作；</li>\n<li>区间的查询速度一定要快，因为原始的数组非常大，每个数组元素都会访问一遍；</li>\n</ol>\n<h2 id=\"性能考虑\"><a href=\"#性能考虑\" class=\"headerlink\" title=\"性能考虑\"></a>性能考虑</h2><p>因为有可能分段会非常多，所以提升速度，选用二叉搜索来提升效率，但是有一点需要注意，二叉查询前必须要确保区间没有重叠，<br>这个可以最后做一下数据的预处理。</p>\n<h2 id=\"可行性分析\"><a href=\"#可行性分析\" class=\"headerlink\" title=\"可行性分析\"></a>可行性分析</h2><p>有序的区间序列有特点：当前区间的起始一定小于前一个区间的结束；因此如果给定一个值想知道在哪个区间，二分是可行的。</p>\n<h2 id=\"搜索实现\"><a href=\"#搜索实现\" class=\"headerlink\" title=\"搜索实现\"></a>搜索实现</h2><p>以下是保证区间没有重复后所实现的搜索方法。因为我的代码还没有用作实际的生产，所以只是定义接口进行测试.</p>\n<h3 id=\"伪代码\"><a href=\"#伪代码\" class=\"headerlink\" title=\"伪代码\"></a>伪代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">double</span> value; <span class=\"comment\">// 给定的值</span></span><br><span class=\"line\">IRange wantedRange; <span class=\"comment\">// 结果区间</span></span><br><span class=\"line\">IRange[] range; <span class=\"comment\">// 区间端信息</span></span><br><span class=\"line\"><span class=\"type\">int</span> start=<span class=\"number\">0</span>, end=range.length; <span class=\"comment\">// 区间的默认始末</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 二分查找</span></span><br><span class=\"line\"><span class=\"keyword\">while</span>(start &lt;= end)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tmid = (start + end) / <span class=\"number\">2</span>; <span class=\"comment\">//折半</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(value &lt;= range[mid].start)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">  \t\tend = mid - <span class=\"number\">1</span>; </span><br><span class=\"line\">  \t\t<span class=\"keyword\">continue</span>; <span class=\"comment\">// 修正区间继续</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(value &gt; range[mid].end)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">  \t\tstart = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">  \t\t<span class=\"keyword\">continue</span>; <span class=\"comment\">// 修正区间继续</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\twantedRange = range[mid]; <span class=\"comment\">// 找到了</span></span><br><span class=\"line\">\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"类型说明\"><a href=\"#类型说明\" class=\"headerlink\" title=\"类型说明\"></a>类型说明</h3><p>因为没有具体类型的设计，所以定义接口(<code>IRagion.java</code>)类型供算法使用:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.moss.arithmetic;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 类型： 区域, 左开右闭</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">IRagion</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取区间起始</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 区间起始</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"type\">double</span> <span class=\"title function_\">getStart</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取区间结束</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 区间结束</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"type\">double</span> <span class=\"title function_\">getEnd</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 修正区间的起始</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> start 新的区间起始</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">setStart</span><span class=\"params\">(<span class=\"type\">double</span> start)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 修正区间结束</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> end 新的区间结束</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">setEnd</span><span class=\"params\">(<span class=\"type\">double</span> end)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"抽象成策略\"><a href=\"#抽象成策略\" class=\"headerlink\" title=\"抽象成策略\"></a>抽象成策略</h3><p>因为考虑到可能还会有更加完美的算法，所以搜素定义成策略接口(<code>IRagionStrategy.java</code>)，做到与具体实现分离:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.moss.arithmetic;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 区间搜索策略接口</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">IRagionStrategy</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/** 根据给定的值搜索所在的区间， 如果没有找到， 返回null */</span></span><br><span class=\"line\">    IRagion <span class=\"title function_\">search</span><span class=\"params\">(<span class=\"type\">double</span> value)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"具体实现\"><a href=\"#具体实现\" class=\"headerlink\" title=\"具体实现\"></a>具体实现</h3><p>目前我能想到的好方法还只是使用二叉来提高搜索效率<code>RagionStrategy.java</code>:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.moss.arithmetic;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 分区查找策略</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">RagionStrategy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">IRagionStrategy</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 保存分段信息</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;IRagion&gt; ragionList;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 当前的位置</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">double</span> value;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 入参务必要保证区间不能重合</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> ragionList 区间列表</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">RagionStrategy</span><span class=\"params\">(List&lt;IRagion&gt; ragionList)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.ragionList = ragionList;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 搜索距离所在的区间</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 输入的位置</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 位置所处的区间， 如果找不到返回null</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> IRagion <span class=\"title function_\">search</span><span class=\"params\">(<span class=\"type\">double</span> value)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> binarySearch(value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 二分查找</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 需要查询的值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 找到的值所在区间</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> IRagion <span class=\"title function_\">binarySearch</span><span class=\"params\">(<span class=\"type\">double</span> value)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 默认找不到区间</span></span><br><span class=\"line\">        <span class=\"type\">IRagion</span> <span class=\"variable\">ret</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 初始化区间的始末</span></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">start</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">end</span> <span class=\"operator\">=</span> ragionList.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 只要区间合法， 就会一直搜索</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (start &lt;= end) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 取出中点计算</span></span><br><span class=\"line\">            <span class=\"type\">int</span> <span class=\"variable\">mid</span> <span class=\"operator\">=</span> (start + end) / <span class=\"number\">2</span>;</span><br><span class=\"line\">            <span class=\"type\">IRagion</span> <span class=\"variable\">ragion</span> <span class=\"operator\">=</span> ragionList.get(mid);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 如果要找的值比区间起始还要小，则只有区间左边的才有可能是</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (Double.compare(value, ragion.getStart()) &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                end = mid - <span class=\"number\">1</span>;</span><br><span class=\"line\">                <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 如果要找的值比区间的结束还要大，则只有区间右边的才有可能是</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (value &gt; ragion.getEnd()) &#123;</span><br><span class=\"line\">                start = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">                <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 如果改值落在区间内(start, end],则说明找到了</span></span><br><span class=\"line\">            ret = ragion;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> ret;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"处理区间，去除重叠部分\"><a href=\"#处理区间，去除重叠部分\" class=\"headerlink\" title=\"处理区间，去除重叠部分\"></a>处理区间，去除重叠部分</h2><p>假定我们的规则是，区间重叠部分认为是无效的部分，那么处理区间的逻辑简化为修正区间的起始和结束。</p>\n<h3 id=\"伪代码-1\"><a href=\"#伪代码-1\" class=\"headerlink\" title=\"伪代码\"></a>伪代码</h3><ol>\n<li>按照区间的起始位置排序, 这样区间至少起始是有序的；</li>\n<li>如果区间存在重叠，那么一定是当前区间的结束位置要后于下一个区间的起始，则去除重复后,<br>当前区间的结束就是下个区间的开始，下个区间的开始就是当前区间的结束，相当于交换前后当前区间的结束和下一个区间的开始</li>\n</ol>\n<h3 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><p>因为是数据的特殊预处理，所以用一个简单的适配器<code>RagionAdapter.java</code>:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.moss.arithmetic;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Collections;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Comparator;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 区间适配器，在进入算法前，对数据进行预处理</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">RagionAdapter</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 区间比较，按照区间的起始位置比较</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">class</span> <span class=\"title class_\">RagionComparator</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Comparator</span>&lt;IRagion&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">compare</span><span class=\"params\">(IRagion o1, IRagion o2)</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> Double.compare(o1.getStart(), o2.getStart());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 处理区间为后面的算法做准备，去除区间的重合部分</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> ragionList 原始的区间列表</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">handleRagion</span><span class=\"params\">(List&lt;IRagion&gt; ragionList)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ragionList == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 先排序区间</span></span><br><span class=\"line\">        Collections.sort(ragionList, <span class=\"keyword\">new</span> <span class=\"title class_\">RagionComparator</span>());</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>, end = ragionList.size() - <span class=\"number\">1</span>; i &lt; end; i++) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"type\">IRagion</span> <span class=\"variable\">currentRagion</span> <span class=\"operator\">=</span> ragionList.get(i);</span><br><span class=\"line\">            <span class=\"type\">IRagion</span> <span class=\"variable\">nextRagion</span> <span class=\"operator\">=</span> ragionList.get(i + <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"type\">double</span> <span class=\"variable\">currentEnd</span> <span class=\"operator\">=</span> currentRagion.getEnd();</span><br><span class=\"line\">            <span class=\"type\">double</span> <span class=\"variable\">nextStart</span> <span class=\"operator\">=</span> nextRagion.getStart();</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 如果发现区间重合，直接去掉重合部分</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (nextStart &gt; currentEnd) &#123;</span><br><span class=\"line\">                currentRagion.setEnd(nextStart);</span><br><span class=\"line\">                nextRagion.setStart(currentEnd);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"win下让Kafka以Service方式运行","published":1,"_content":"\nKafka是依赖于Zookeeper的，也就是说如果要启动kafka, 必须要先启动zookeeper，但是如果每次调试都要进入命令行启动两个黑框框就太蛋疼了，所以可以学习Tomcat来把Java的程序以windows的Service方式来运行，一下是修改Kafka的启动脚本`server.cmd`：\n\n``` java\n@echo off\nSetLocal\n\nset KAFKA_LOG4J_OPTS=-Dlog4j.ZKKFCONFIGuration=file:%~dp0..\\..\\ZKKFCONFIG\\log4j.properties\nset KAFKA_HEAP_OPTS=-Xmx512M -Xms512M\n\nset ZKSERVER_NAME=moss-zkServer\nset ZKSERVER_EXE=%~dp0%ZKSERVER_NAME%.exe\nset ZKKFMAIN_CLASS=org.apache.zookeeper.server.quorum.QuorumPeerMain\nset ZKKFCONFIG=\"%~dp0..\\..\\config\\zookeeper.properties\"\n\nset KFSERVER_NAME=moss-Kafka\nset KFSERVER_EXE=%~dp0%KFSERVER_NAME%.exe\nset KFMAIN_CLASS=kafka.Kafka\nset KFCONFIG=\"%~dp0..\\..\\config\\server.properties\"\n\ncall \"%~dp0kafka-run-class-cracked.bat\"\n\nREM \nif \"%1\" == \"\" goto showUsage\nif %1 == install goto doInstall\nif %1 == uninstall goto doUninstall\necho Unknown parameter \"%1\"\ngoto :showUsage\n\n:doInstall\n\"%ZKSERVER_EXE%\" //IS//%ZKSERVER_NAME% --DisplayName=\"%ZKSERVER_NAME%\" ^\n  \t--StdOutput=auto --StdError=auto --LogLevel=Debug --LogPath=\"%~dp0logs\" ^\n    --Startup=auto --StartMode=jvm --Jvm=\"%JAVA_HOME%\\jre\\bin\\server\\jvm.dll\" ^\n    --PidFile=\"%~dp0%ZKSERVER_NAME%.pid\" ^\n    --Classpath=\"%CLASSPATH%\" ^\n  \t--StartClass=\"%ZKKFMAIN_CLASS%\" ^\n    --StartParams=\"%ZKKFCONFIG%\" ^\n    --StartPath=\"%~dp0\" ^\n    --JvmOptions=\"%KAFKA_HEAP_OPTS% %KAFKA_JVM_PERFORMANCE_OPTS% %KAFKA_JMX_OPTS% %KAFKA_LOG4J_OPTS%\"\n\"%KFSERVER_EXE%\" //IS//%KFSERVER_NAME% --DisplayName=\"%KFSERVER_NAME%\" ^\n    --StdOutput=auto --StdError=auto --LogLevel=Debug --LogPath=\"%~dp0logs\" ^\n    --Startup=auto --StartMode=jvm --Jvm=\"%JAVA_HOME%\\jre\\bin\\server\\jvm.dll\" ^\n    --PidFile=\"%~dp0%KFSERVER_NAME%.pid\" ^\n    --Classpath=\"%CLASSPATH%\" ^\n    --StartClass=\"%KFMAIN_CLASS%\" ^\n    --StartParams=\"%KFCONFIG%\" ^\n    --StartPath=\"%~dp0\" ^\n    --JvmOptions=\"%KAFKA_HEAP_OPTS% %KAFKA_JVM_PERFORMANCE_OPTS% %KAFKA_JMX_OPTS% %KAFKA_LOG4J_OPTS%\"\ngoto :eof\n\n:doUninstall\n\"%ZKSERVER_EXE%\" //DS//%ZKSERVER_NAME%\n\"%KFSERVER_EXE%\" //DS//%KFSERVER_NAME%\ngoto :eof\n\n:showUsage\necho Usage: service.bat install/uninstall\ngoto :eof\nEndLocal\n```\n\n> 注意上面的`kafka-run-class-cracked.bat`是将`kafka-run-class.bat`注释了`%COMMAND%`这一行，只保留该脚本的环境变量操作。\n\n> 注意windows下的脚本需要考虑编码（linux下编辑的直接运行会诡异的错误）\n","source":"_posts/study/2015-11-15-kafka-work-as-windows-service.md","raw":"---\nlayout: post\ntitle: win下让Kafka以Service方式运行\ncategories: [学习]\ntags: [bat,windows]\npublished: True\n\n---\n\nKafka是依赖于Zookeeper的，也就是说如果要启动kafka, 必须要先启动zookeeper，但是如果每次调试都要进入命令行启动两个黑框框就太蛋疼了，所以可以学习Tomcat来把Java的程序以windows的Service方式来运行，一下是修改Kafka的启动脚本`server.cmd`：\n\n``` java\n@echo off\nSetLocal\n\nset KAFKA_LOG4J_OPTS=-Dlog4j.ZKKFCONFIGuration=file:%~dp0..\\..\\ZKKFCONFIG\\log4j.properties\nset KAFKA_HEAP_OPTS=-Xmx512M -Xms512M\n\nset ZKSERVER_NAME=moss-zkServer\nset ZKSERVER_EXE=%~dp0%ZKSERVER_NAME%.exe\nset ZKKFMAIN_CLASS=org.apache.zookeeper.server.quorum.QuorumPeerMain\nset ZKKFCONFIG=\"%~dp0..\\..\\config\\zookeeper.properties\"\n\nset KFSERVER_NAME=moss-Kafka\nset KFSERVER_EXE=%~dp0%KFSERVER_NAME%.exe\nset KFMAIN_CLASS=kafka.Kafka\nset KFCONFIG=\"%~dp0..\\..\\config\\server.properties\"\n\ncall \"%~dp0kafka-run-class-cracked.bat\"\n\nREM \nif \"%1\" == \"\" goto showUsage\nif %1 == install goto doInstall\nif %1 == uninstall goto doUninstall\necho Unknown parameter \"%1\"\ngoto :showUsage\n\n:doInstall\n\"%ZKSERVER_EXE%\" //IS//%ZKSERVER_NAME% --DisplayName=\"%ZKSERVER_NAME%\" ^\n  \t--StdOutput=auto --StdError=auto --LogLevel=Debug --LogPath=\"%~dp0logs\" ^\n    --Startup=auto --StartMode=jvm --Jvm=\"%JAVA_HOME%\\jre\\bin\\server\\jvm.dll\" ^\n    --PidFile=\"%~dp0%ZKSERVER_NAME%.pid\" ^\n    --Classpath=\"%CLASSPATH%\" ^\n  \t--StartClass=\"%ZKKFMAIN_CLASS%\" ^\n    --StartParams=\"%ZKKFCONFIG%\" ^\n    --StartPath=\"%~dp0\" ^\n    --JvmOptions=\"%KAFKA_HEAP_OPTS% %KAFKA_JVM_PERFORMANCE_OPTS% %KAFKA_JMX_OPTS% %KAFKA_LOG4J_OPTS%\"\n\"%KFSERVER_EXE%\" //IS//%KFSERVER_NAME% --DisplayName=\"%KFSERVER_NAME%\" ^\n    --StdOutput=auto --StdError=auto --LogLevel=Debug --LogPath=\"%~dp0logs\" ^\n    --Startup=auto --StartMode=jvm --Jvm=\"%JAVA_HOME%\\jre\\bin\\server\\jvm.dll\" ^\n    --PidFile=\"%~dp0%KFSERVER_NAME%.pid\" ^\n    --Classpath=\"%CLASSPATH%\" ^\n    --StartClass=\"%KFMAIN_CLASS%\" ^\n    --StartParams=\"%KFCONFIG%\" ^\n    --StartPath=\"%~dp0\" ^\n    --JvmOptions=\"%KAFKA_HEAP_OPTS% %KAFKA_JVM_PERFORMANCE_OPTS% %KAFKA_JMX_OPTS% %KAFKA_LOG4J_OPTS%\"\ngoto :eof\n\n:doUninstall\n\"%ZKSERVER_EXE%\" //DS//%ZKSERVER_NAME%\n\"%KFSERVER_EXE%\" //DS//%KFSERVER_NAME%\ngoto :eof\n\n:showUsage\necho Usage: service.bat install/uninstall\ngoto :eof\nEndLocal\n```\n\n> 注意上面的`kafka-run-class-cracked.bat`是将`kafka-run-class.bat`注释了`%COMMAND%`这一行，只保留该脚本的环境变量操作。\n\n> 注意windows下的脚本需要考虑编码（linux下编辑的直接运行会诡异的错误）\n","slug":"study/2015-11-15-kafka-work-as-windows-service","date":"2025-03-22T11:29:07.817Z","updated":"2025-03-22T11:29:07.817Z","comments":1,"photos":[],"_id":"cm8k4mbea001gq69d3dlbexp0","content":"<p>Kafka是依赖于Zookeeper的，也就是说如果要启动kafka, 必须要先启动zookeeper，但是如果每次调试都要进入命令行启动两个黑框框就太蛋疼了，所以可以学习Tomcat来把Java的程序以windows的Service方式来运行，一下是修改Kafka的启动脚本<code>server.cmd</code>：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@echo</span> off</span><br><span class=\"line\">SetLocal</span><br><span class=\"line\"></span><br><span class=\"line\">set KAFKA_LOG4J_OPTS=-Dlog4j.ZKKFCONFIGuration=file:%~dp0..\\..\\ZKKFCONFIG\\log4j.properties</span><br><span class=\"line\">set KAFKA_HEAP_OPTS=-Xmx512M -Xms512M</span><br><span class=\"line\"></span><br><span class=\"line\">set ZKSERVER_NAME=moss-zkServer</span><br><span class=\"line\">set ZKSERVER_EXE=%~dp0%ZKSERVER_NAME%.exe</span><br><span class=\"line\">set ZKKFMAIN_CLASS=org.apache.zookeeper.server.quorum.QuorumPeerMain</span><br><span class=\"line\">set ZKKFCONFIG=<span class=\"string\">&quot;%~dp0..\\..\\config\\zookeeper.properties&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">set KFSERVER_NAME=moss-Kafka</span><br><span class=\"line\">set KFSERVER_EXE=%~dp0%KFSERVER_NAME%.exe</span><br><span class=\"line\">set KFMAIN_CLASS=kafka.Kafka</span><br><span class=\"line\">set KFCONFIG=<span class=\"string\">&quot;%~dp0..\\..\\config\\server.properties&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">call <span class=\"string\">&quot;%~dp0kafka-run-class-cracked.bat&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">REM </span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"string\">&quot;%1&quot;</span> == <span class=\"string\">&quot;&quot;</span> <span class=\"keyword\">goto</span> showUsage</span><br><span class=\"line\"><span class=\"keyword\">if</span> %<span class=\"number\">1</span> == install <span class=\"keyword\">goto</span> doInstall</span><br><span class=\"line\"><span class=\"keyword\">if</span> %<span class=\"number\">1</span> == uninstall <span class=\"keyword\">goto</span> doUninstall</span><br><span class=\"line\">echo Unknown parameter <span class=\"string\">&quot;%1&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">goto</span> :showUsage</span><br><span class=\"line\"></span><br><span class=\"line\">:doInstall</span><br><span class=\"line\"><span class=\"string\">&quot;%ZKSERVER_EXE%&quot;</span> <span class=\"comment\">//IS//%ZKSERVER_NAME% --DisplayName=&quot;%ZKSERVER_NAME%&quot; ^</span></span><br><span class=\"line\">  \t--StdOutput=auto --StdError=auto --LogLevel=Debug --LogPath=<span class=\"string\">&quot;%~dp0logs&quot;</span> ^</span><br><span class=\"line\">    --Startup=auto --StartMode=jvm --Jvm=<span class=\"string\">&quot;%JAVA_HOME%\\jre\\bin\\server\\jvm.dll&quot;</span> ^</span><br><span class=\"line\">    --PidFile=<span class=\"string\">&quot;%~dp0%ZKSERVER_NAME%.pid&quot;</span> ^</span><br><span class=\"line\">    --Classpath=<span class=\"string\">&quot;%CLASSPATH%&quot;</span> ^</span><br><span class=\"line\">  \t--StartClass=<span class=\"string\">&quot;%ZKKFMAIN_CLASS%&quot;</span> ^</span><br><span class=\"line\">    --StartParams=<span class=\"string\">&quot;%ZKKFCONFIG%&quot;</span> ^</span><br><span class=\"line\">    --StartPath=<span class=\"string\">&quot;%~dp0&quot;</span> ^</span><br><span class=\"line\">    --JvmOptions=<span class=\"string\">&quot;%KAFKA_HEAP_OPTS% %KAFKA_JVM_PERFORMANCE_OPTS% %KAFKA_JMX_OPTS% %KAFKA_LOG4J_OPTS%&quot;</span></span><br><span class=\"line\"><span class=\"string\">&quot;%KFSERVER_EXE%&quot;</span> <span class=\"comment\">//IS//%KFSERVER_NAME% --DisplayName=&quot;%KFSERVER_NAME%&quot; ^</span></span><br><span class=\"line\">    --StdOutput=auto --StdError=auto --LogLevel=Debug --LogPath=<span class=\"string\">&quot;%~dp0logs&quot;</span> ^</span><br><span class=\"line\">    --Startup=auto --StartMode=jvm --Jvm=<span class=\"string\">&quot;%JAVA_HOME%\\jre\\bin\\server\\jvm.dll&quot;</span> ^</span><br><span class=\"line\">    --PidFile=<span class=\"string\">&quot;%~dp0%KFSERVER_NAME%.pid&quot;</span> ^</span><br><span class=\"line\">    --Classpath=<span class=\"string\">&quot;%CLASSPATH%&quot;</span> ^</span><br><span class=\"line\">    --StartClass=<span class=\"string\">&quot;%KFMAIN_CLASS%&quot;</span> ^</span><br><span class=\"line\">    --StartParams=<span class=\"string\">&quot;%KFCONFIG%&quot;</span> ^</span><br><span class=\"line\">    --StartPath=<span class=\"string\">&quot;%~dp0&quot;</span> ^</span><br><span class=\"line\">    --JvmOptions=<span class=\"string\">&quot;%KAFKA_HEAP_OPTS% %KAFKA_JVM_PERFORMANCE_OPTS% %KAFKA_JMX_OPTS% %KAFKA_LOG4J_OPTS%&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">goto</span> :eof</span><br><span class=\"line\"></span><br><span class=\"line\">:doUninstall</span><br><span class=\"line\"><span class=\"string\">&quot;%ZKSERVER_EXE%&quot;</span> <span class=\"comment\">//DS//%ZKSERVER_NAME%</span></span><br><span class=\"line\"><span class=\"string\">&quot;%KFSERVER_EXE%&quot;</span> <span class=\"comment\">//DS//%KFSERVER_NAME%</span></span><br><span class=\"line\"><span class=\"keyword\">goto</span> :eof</span><br><span class=\"line\"></span><br><span class=\"line\">:showUsage</span><br><span class=\"line\">echo Usage: service.bat install/uninstall</span><br><span class=\"line\"><span class=\"keyword\">goto</span> :eof</span><br><span class=\"line\">EndLocal</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意上面的<code>kafka-run-class-cracked.bat</code>是将<code>kafka-run-class.bat</code>注释了<code>%COMMAND%</code>这一行，只保留该脚本的环境变量操作。</p>\n</blockquote>\n<blockquote>\n<p>注意windows下的脚本需要考虑编码（linux下编辑的直接运行会诡异的错误）</p>\n</blockquote>\n","excerpt":"","more":"<p>Kafka是依赖于Zookeeper的，也就是说如果要启动kafka, 必须要先启动zookeeper，但是如果每次调试都要进入命令行启动两个黑框框就太蛋疼了，所以可以学习Tomcat来把Java的程序以windows的Service方式来运行，一下是修改Kafka的启动脚本<code>server.cmd</code>：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@echo</span> off</span><br><span class=\"line\">SetLocal</span><br><span class=\"line\"></span><br><span class=\"line\">set KAFKA_LOG4J_OPTS=-Dlog4j.ZKKFCONFIGuration=file:%~dp0..\\..\\ZKKFCONFIG\\log4j.properties</span><br><span class=\"line\">set KAFKA_HEAP_OPTS=-Xmx512M -Xms512M</span><br><span class=\"line\"></span><br><span class=\"line\">set ZKSERVER_NAME=moss-zkServer</span><br><span class=\"line\">set ZKSERVER_EXE=%~dp0%ZKSERVER_NAME%.exe</span><br><span class=\"line\">set ZKKFMAIN_CLASS=org.apache.zookeeper.server.quorum.QuorumPeerMain</span><br><span class=\"line\">set ZKKFCONFIG=<span class=\"string\">&quot;%~dp0..\\..\\config\\zookeeper.properties&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">set KFSERVER_NAME=moss-Kafka</span><br><span class=\"line\">set KFSERVER_EXE=%~dp0%KFSERVER_NAME%.exe</span><br><span class=\"line\">set KFMAIN_CLASS=kafka.Kafka</span><br><span class=\"line\">set KFCONFIG=<span class=\"string\">&quot;%~dp0..\\..\\config\\server.properties&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">call <span class=\"string\">&quot;%~dp0kafka-run-class-cracked.bat&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">REM </span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"string\">&quot;%1&quot;</span> == <span class=\"string\">&quot;&quot;</span> <span class=\"keyword\">goto</span> showUsage</span><br><span class=\"line\"><span class=\"keyword\">if</span> %<span class=\"number\">1</span> == install <span class=\"keyword\">goto</span> doInstall</span><br><span class=\"line\"><span class=\"keyword\">if</span> %<span class=\"number\">1</span> == uninstall <span class=\"keyword\">goto</span> doUninstall</span><br><span class=\"line\">echo Unknown parameter <span class=\"string\">&quot;%1&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">goto</span> :showUsage</span><br><span class=\"line\"></span><br><span class=\"line\">:doInstall</span><br><span class=\"line\"><span class=\"string\">&quot;%ZKSERVER_EXE%&quot;</span> <span class=\"comment\">//IS//%ZKSERVER_NAME% --DisplayName=&quot;%ZKSERVER_NAME%&quot; ^</span></span><br><span class=\"line\">  \t--StdOutput=auto --StdError=auto --LogLevel=Debug --LogPath=<span class=\"string\">&quot;%~dp0logs&quot;</span> ^</span><br><span class=\"line\">    --Startup=auto --StartMode=jvm --Jvm=<span class=\"string\">&quot;%JAVA_HOME%\\jre\\bin\\server\\jvm.dll&quot;</span> ^</span><br><span class=\"line\">    --PidFile=<span class=\"string\">&quot;%~dp0%ZKSERVER_NAME%.pid&quot;</span> ^</span><br><span class=\"line\">    --Classpath=<span class=\"string\">&quot;%CLASSPATH%&quot;</span> ^</span><br><span class=\"line\">  \t--StartClass=<span class=\"string\">&quot;%ZKKFMAIN_CLASS%&quot;</span> ^</span><br><span class=\"line\">    --StartParams=<span class=\"string\">&quot;%ZKKFCONFIG%&quot;</span> ^</span><br><span class=\"line\">    --StartPath=<span class=\"string\">&quot;%~dp0&quot;</span> ^</span><br><span class=\"line\">    --JvmOptions=<span class=\"string\">&quot;%KAFKA_HEAP_OPTS% %KAFKA_JVM_PERFORMANCE_OPTS% %KAFKA_JMX_OPTS% %KAFKA_LOG4J_OPTS%&quot;</span></span><br><span class=\"line\"><span class=\"string\">&quot;%KFSERVER_EXE%&quot;</span> <span class=\"comment\">//IS//%KFSERVER_NAME% --DisplayName=&quot;%KFSERVER_NAME%&quot; ^</span></span><br><span class=\"line\">    --StdOutput=auto --StdError=auto --LogLevel=Debug --LogPath=<span class=\"string\">&quot;%~dp0logs&quot;</span> ^</span><br><span class=\"line\">    --Startup=auto --StartMode=jvm --Jvm=<span class=\"string\">&quot;%JAVA_HOME%\\jre\\bin\\server\\jvm.dll&quot;</span> ^</span><br><span class=\"line\">    --PidFile=<span class=\"string\">&quot;%~dp0%KFSERVER_NAME%.pid&quot;</span> ^</span><br><span class=\"line\">    --Classpath=<span class=\"string\">&quot;%CLASSPATH%&quot;</span> ^</span><br><span class=\"line\">    --StartClass=<span class=\"string\">&quot;%KFMAIN_CLASS%&quot;</span> ^</span><br><span class=\"line\">    --StartParams=<span class=\"string\">&quot;%KFCONFIG%&quot;</span> ^</span><br><span class=\"line\">    --StartPath=<span class=\"string\">&quot;%~dp0&quot;</span> ^</span><br><span class=\"line\">    --JvmOptions=<span class=\"string\">&quot;%KAFKA_HEAP_OPTS% %KAFKA_JVM_PERFORMANCE_OPTS% %KAFKA_JMX_OPTS% %KAFKA_LOG4J_OPTS%&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">goto</span> :eof</span><br><span class=\"line\"></span><br><span class=\"line\">:doUninstall</span><br><span class=\"line\"><span class=\"string\">&quot;%ZKSERVER_EXE%&quot;</span> <span class=\"comment\">//DS//%ZKSERVER_NAME%</span></span><br><span class=\"line\"><span class=\"string\">&quot;%KFSERVER_EXE%&quot;</span> <span class=\"comment\">//DS//%KFSERVER_NAME%</span></span><br><span class=\"line\"><span class=\"keyword\">goto</span> :eof</span><br><span class=\"line\"></span><br><span class=\"line\">:showUsage</span><br><span class=\"line\">echo Usage: service.bat install/uninstall</span><br><span class=\"line\"><span class=\"keyword\">goto</span> :eof</span><br><span class=\"line\">EndLocal</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意上面的<code>kafka-run-class-cracked.bat</code>是将<code>kafka-run-class.bat</code>注释了<code>%COMMAND%</code>这一行，只保留该脚本的环境变量操作。</p>\n</blockquote>\n<blockquote>\n<p>注意windows下的脚本需要考虑编码（linux下编辑的直接运行会诡异的错误）</p>\n</blockquote>\n"},{"layout":"post","title":"Sublime-配置","published":1,"_content":"\n## 前言\n考虑到在sb2上有些插件已经不在支持了(sidebarenhancements), 所以我还是选择sb3, 但是暂时不选择购买, 还比较小资, 对我来说太贵了, 所以以后的文章都是针对sb3.\n\n## 系统的配置\n\n### 同步\n一劳永逸的事情, sb所有的包都是放在package里面, 所以选择同步这个文件夹就可以做到多个系统同步:\n1. 打开Sublime Text -> Browse Packages找到包的目录, mac下是`~/Library/Application Support/Sublime Text 3`\n2. 目录下的`Packages`移动到Dropbox,我的目录`~/Dropbox/Sync/Sublime3/Packages`\n3. 进入support目录,建立软连接`ln -s ~/Dropbox/Sync/Sublime3/Packages Packages`\n4. 选择喜欢的工具进行同步(github/dropbox)\n5. 下次需要使用的时候, 只要重复以上几步即可\n\n### 各系统Package的目录：\n\n* OS X:\n\n> ~/Library/Application Support/Sublime Text 3/Packages/\n\n* Linux:\n\n> ~/.config/sublime-text-2/Packages/\n\n* Windows:\n\n> %APPDATA%/Roaming/Sublime Text 3/Packages/\n\n\n### 更换图标\n\n* Mac下面直接找到应用`CMD+i`进入应用信息的查看,然后吧要准备好的图表拖拽到信息中的图标上就可以了\n\n* Windows下有待补充\n\n\n### 编辑器的配置\n因为考虑到我自己有些使用习惯，所以配置如下：\n\n```json\n// 让 minimap(就是大纲里面的小框) 里的当前位置更显眼点\n\"always_show_minimap_viewport\": true,\n\"draw_minimap_border\": true,\n\n// 设置主题的名称\n\"theme\": \"Soda Dark.sublime-theme\",\n\"soda_classic_tabs\": true,\n\"soda_folder_icons\": true,\n\n// 设置颜色主题\n\"color_scheme\": \"Packages/Monokai Extended/Monokai Extended.tmTheme\",\t\n\n// ST 里我经常找不到光标在哪儿, 这个开启后可以高亮当前行\n\"highlight_modified_tabs\": true,\n\n// 启用Vinageouss\n\"ignored_packages\":\n[\n],\n\n// Finder 里打开文件时, 不会新开窗口了\n\"open_files_in_new_window\": false,\n\n// 显示文件编码\n\"show_encoding\": true,\n\n// 标题栏上显示完整路径, 有时候不小心开错了文件, 这样能帮你早点发现.\n\"show_full_path\": true,\n\"show_line_endings\": true,\n\n// vim使用系统的剪贴板\n\"vintageous_use_sys_clipboard\": true\n```\n\n\n## 各种各样有意思的插件\n因为插件非常丰富,所以这里根据用途、平台、语言等来分类进行总结。\n\n### 基本的插件\n1. Git -- 用来替代命令行处理文件，我的博客放在github上，所以有时候写文章写到一半不想写了，用来撤销用\n2. GitGutter -- GitGutter 更好的帮助开发者查看文件之前的改动和差异，提升开发效率\n3. SideBarEnhancements -- 可以是你的sidebar右击多出很多有用的菜单\n4. AutoFileName -- 自动补全文件路径-非常方便\n5. PlainTasks -- 支持todo后缀的文件进行任务状态的跟踪\n\n### jekyll支持\n我的博客都是用Sublime编写的，并且使用的是jekyll排版系统，jekyll真的非常方便，但是它只专注于写文章，高亮和其他还需要其他插件完成\n\n1. 安装jekyll插件\n2. Markdown Extended -- 使用扩展的Markdown的方式，代码高亮非常好用(````里面可以书写语言就能高亮)\n3. MonoKai Extended -- 颜色主题，配合Markdown Extended进行语法高亮, 支持\n\n### web开发\n1. 编辑器的vi支持，自带的不好用，直接禁用：\n\n> \"Vintagous\" 非常棒的vi插件\n\n\n### 代码编辑\n代码编辑过程中有些事情很繁琐，譬如注释，代码补全，匹配括号高亮，自动对齐什么的，以下插件用来解决：\n\n1. DocBlockr -- 成为你编写代码文档的有效工具。当输入/**并且按下Tab键的时候，这个插件会自动解析任何一个函数并且为你准备好合适的模板\n\n>  \"jsdocs_extend_double_slash\": false //否则双斜杠了之后，下一行会跟着学习\n\n2. CodeIntel -- 语法补全\n3. BracketHighlighter -- 高亮匹配的括号\n\n### 主题安装\n这里推荐Soda Theme， 安装简单，功能稳定\n\n\n\n\n","source":"_posts/tools/2015-04-26-sublime配置.md","raw":"---\nlayout: post\ntitle: Sublime-配置\ncategories: [工具]\ntags: [2015,sublime,前端]\npublished: True\n---\n\n## 前言\n考虑到在sb2上有些插件已经不在支持了(sidebarenhancements), 所以我还是选择sb3, 但是暂时不选择购买, 还比较小资, 对我来说太贵了, 所以以后的文章都是针对sb3.\n\n## 系统的配置\n\n### 同步\n一劳永逸的事情, sb所有的包都是放在package里面, 所以选择同步这个文件夹就可以做到多个系统同步:\n1. 打开Sublime Text -> Browse Packages找到包的目录, mac下是`~/Library/Application Support/Sublime Text 3`\n2. 目录下的`Packages`移动到Dropbox,我的目录`~/Dropbox/Sync/Sublime3/Packages`\n3. 进入support目录,建立软连接`ln -s ~/Dropbox/Sync/Sublime3/Packages Packages`\n4. 选择喜欢的工具进行同步(github/dropbox)\n5. 下次需要使用的时候, 只要重复以上几步即可\n\n### 各系统Package的目录：\n\n* OS X:\n\n> ~/Library/Application Support/Sublime Text 3/Packages/\n\n* Linux:\n\n> ~/.config/sublime-text-2/Packages/\n\n* Windows:\n\n> %APPDATA%/Roaming/Sublime Text 3/Packages/\n\n\n### 更换图标\n\n* Mac下面直接找到应用`CMD+i`进入应用信息的查看,然后吧要准备好的图表拖拽到信息中的图标上就可以了\n\n* Windows下有待补充\n\n\n### 编辑器的配置\n因为考虑到我自己有些使用习惯，所以配置如下：\n\n```json\n// 让 minimap(就是大纲里面的小框) 里的当前位置更显眼点\n\"always_show_minimap_viewport\": true,\n\"draw_minimap_border\": true,\n\n// 设置主题的名称\n\"theme\": \"Soda Dark.sublime-theme\",\n\"soda_classic_tabs\": true,\n\"soda_folder_icons\": true,\n\n// 设置颜色主题\n\"color_scheme\": \"Packages/Monokai Extended/Monokai Extended.tmTheme\",\t\n\n// ST 里我经常找不到光标在哪儿, 这个开启后可以高亮当前行\n\"highlight_modified_tabs\": true,\n\n// 启用Vinageouss\n\"ignored_packages\":\n[\n],\n\n// Finder 里打开文件时, 不会新开窗口了\n\"open_files_in_new_window\": false,\n\n// 显示文件编码\n\"show_encoding\": true,\n\n// 标题栏上显示完整路径, 有时候不小心开错了文件, 这样能帮你早点发现.\n\"show_full_path\": true,\n\"show_line_endings\": true,\n\n// vim使用系统的剪贴板\n\"vintageous_use_sys_clipboard\": true\n```\n\n\n## 各种各样有意思的插件\n因为插件非常丰富,所以这里根据用途、平台、语言等来分类进行总结。\n\n### 基本的插件\n1. Git -- 用来替代命令行处理文件，我的博客放在github上，所以有时候写文章写到一半不想写了，用来撤销用\n2. GitGutter -- GitGutter 更好的帮助开发者查看文件之前的改动和差异，提升开发效率\n3. SideBarEnhancements -- 可以是你的sidebar右击多出很多有用的菜单\n4. AutoFileName -- 自动补全文件路径-非常方便\n5. PlainTasks -- 支持todo后缀的文件进行任务状态的跟踪\n\n### jekyll支持\n我的博客都是用Sublime编写的，并且使用的是jekyll排版系统，jekyll真的非常方便，但是它只专注于写文章，高亮和其他还需要其他插件完成\n\n1. 安装jekyll插件\n2. Markdown Extended -- 使用扩展的Markdown的方式，代码高亮非常好用(````里面可以书写语言就能高亮)\n3. MonoKai Extended -- 颜色主题，配合Markdown Extended进行语法高亮, 支持\n\n### web开发\n1. 编辑器的vi支持，自带的不好用，直接禁用：\n\n> \"Vintagous\" 非常棒的vi插件\n\n\n### 代码编辑\n代码编辑过程中有些事情很繁琐，譬如注释，代码补全，匹配括号高亮，自动对齐什么的，以下插件用来解决：\n\n1. DocBlockr -- 成为你编写代码文档的有效工具。当输入/**并且按下Tab键的时候，这个插件会自动解析任何一个函数并且为你准备好合适的模板\n\n>  \"jsdocs_extend_double_slash\": false //否则双斜杠了之后，下一行会跟着学习\n\n2. CodeIntel -- 语法补全\n3. BracketHighlighter -- 高亮匹配的括号\n\n### 主题安装\n这里推荐Soda Theme， 安装简单，功能稳定\n\n\n\n\n","slug":"tools/2015-04-26-sublime配置","date":"2025-03-22T11:29:07.898Z","updated":"2025-03-22T11:29:07.898Z","comments":1,"photos":[],"_id":"cm8k4mbeb001hq69dbwffd9dj","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>考虑到在sb2上有些插件已经不在支持了(sidebarenhancements), 所以我还是选择sb3, 但是暂时不选择购买, 还比较小资, 对我来说太贵了, 所以以后的文章都是针对sb3.</p>\n<h2 id=\"系统的配置\"><a href=\"#系统的配置\" class=\"headerlink\" title=\"系统的配置\"></a>系统的配置</h2><h3 id=\"同步\"><a href=\"#同步\" class=\"headerlink\" title=\"同步\"></a>同步</h3><p>一劳永逸的事情, sb所有的包都是放在package里面, 所以选择同步这个文件夹就可以做到多个系统同步:</p>\n<ol>\n<li>打开Sublime Text -&gt; Browse Packages找到包的目录, mac下是<code>~/Library/Application Support/Sublime Text 3</code></li>\n<li>目录下的<code>Packages</code>移动到Dropbox,我的目录<code>~/Dropbox/Sync/Sublime3/Packages</code></li>\n<li>进入support目录,建立软连接<code>ln -s ~/Dropbox/Sync/Sublime3/Packages Packages</code></li>\n<li>选择喜欢的工具进行同步(github&#x2F;dropbox)</li>\n<li>下次需要使用的时候, 只要重复以上几步即可</li>\n</ol>\n<h3 id=\"各系统Package的目录：\"><a href=\"#各系统Package的目录：\" class=\"headerlink\" title=\"各系统Package的目录：\"></a>各系统Package的目录：</h3><ul>\n<li>OS X:</li>\n</ul>\n<blockquote>\n<p>~&#x2F;Library&#x2F;Application Support&#x2F;Sublime Text 3&#x2F;Packages&#x2F;</p>\n</blockquote>\n<ul>\n<li>Linux:</li>\n</ul>\n<blockquote>\n<p>~&#x2F;.config&#x2F;sublime-text-2&#x2F;Packages&#x2F;</p>\n</blockquote>\n<ul>\n<li>Windows:</li>\n</ul>\n<blockquote>\n<p>%APPDATA%&#x2F;Roaming&#x2F;Sublime Text 3&#x2F;Packages&#x2F;</p>\n</blockquote>\n<h3 id=\"更换图标\"><a href=\"#更换图标\" class=\"headerlink\" title=\"更换图标\"></a>更换图标</h3><ul>\n<li><p>Mac下面直接找到应用<code>CMD+i</code>进入应用信息的查看,然后吧要准备好的图表拖拽到信息中的图标上就可以了</p>\n</li>\n<li><p>Windows下有待补充</p>\n</li>\n</ul>\n<h3 id=\"编辑器的配置\"><a href=\"#编辑器的配置\" class=\"headerlink\" title=\"编辑器的配置\"></a>编辑器的配置</h3><p>因为考虑到我自己有些使用习惯，所以配置如下：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 让 minimap(就是大纲里面的小框) 里的当前位置更显眼点</span></span><br><span class=\"line\"><span class=\"attr\">&quot;always_show_minimap_viewport&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;draw_minimap_border&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设置主题的名称</span></span><br><span class=\"line\"><span class=\"attr\">&quot;theme&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Soda Dark.sublime-theme&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;soda_classic_tabs&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;soda_folder_icons&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设置颜色主题</span></span><br><span class=\"line\"><span class=\"attr\">&quot;color_scheme&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Packages/Monokai Extended/Monokai Extended.tmTheme&quot;</span><span class=\"punctuation\">,</span>\t</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ST 里我经常找不到光标在哪儿, 这个开启后可以高亮当前行</span></span><br><span class=\"line\"><span class=\"attr\">&quot;highlight_modified_tabs&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 启用Vinageouss</span></span><br><span class=\"line\"><span class=\"attr\">&quot;ignored_packages&quot;</span><span class=\"punctuation\">:</span></span><br><span class=\"line\"><span class=\"punctuation\">[</span></span><br><span class=\"line\"><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Finder 里打开文件时, 不会新开窗口了</span></span><br><span class=\"line\"><span class=\"attr\">&quot;open_files_in_new_window&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 显示文件编码</span></span><br><span class=\"line\"><span class=\"attr\">&quot;show_encoding&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 标题栏上显示完整路径, 有时候不小心开错了文件, 这样能帮你早点发现.</span></span><br><span class=\"line\"><span class=\"attr\">&quot;show_full_path&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;show_line_endings&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// vim使用系统的剪贴板</span></span><br><span class=\"line\"><span class=\"attr\">&quot;vintageous_use_sys_clipboard&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"各种各样有意思的插件\"><a href=\"#各种各样有意思的插件\" class=\"headerlink\" title=\"各种各样有意思的插件\"></a>各种各样有意思的插件</h2><p>因为插件非常丰富,所以这里根据用途、平台、语言等来分类进行总结。</p>\n<h3 id=\"基本的插件\"><a href=\"#基本的插件\" class=\"headerlink\" title=\"基本的插件\"></a>基本的插件</h3><ol>\n<li>Git – 用来替代命令行处理文件，我的博客放在github上，所以有时候写文章写到一半不想写了，用来撤销用</li>\n<li>GitGutter – GitGutter 更好的帮助开发者查看文件之前的改动和差异，提升开发效率</li>\n<li>SideBarEnhancements – 可以是你的sidebar右击多出很多有用的菜单</li>\n<li>AutoFileName – 自动补全文件路径-非常方便</li>\n<li>PlainTasks – 支持todo后缀的文件进行任务状态的跟踪</li>\n</ol>\n<h3 id=\"jekyll支持\"><a href=\"#jekyll支持\" class=\"headerlink\" title=\"jekyll支持\"></a>jekyll支持</h3><p>我的博客都是用Sublime编写的，并且使用的是jekyll排版系统，jekyll真的非常方便，但是它只专注于写文章，高亮和其他还需要其他插件完成</p>\n<ol>\n<li>安装jekyll插件</li>\n<li>Markdown Extended – 使用扩展的Markdown的方式，代码高亮非常好用(&#96;&#96;&#96;&#96;里面可以书写语言就能高亮)</li>\n<li>MonoKai Extended – 颜色主题，配合Markdown Extended进行语法高亮, 支持</li>\n</ol>\n<h3 id=\"web开发\"><a href=\"#web开发\" class=\"headerlink\" title=\"web开发\"></a>web开发</h3><ol>\n<li>编辑器的vi支持，自带的不好用，直接禁用：</li>\n</ol>\n<blockquote>\n<p>“Vintagous” 非常棒的vi插件</p>\n</blockquote>\n<h3 id=\"代码编辑\"><a href=\"#代码编辑\" class=\"headerlink\" title=\"代码编辑\"></a>代码编辑</h3><p>代码编辑过程中有些事情很繁琐，譬如注释，代码补全，匹配括号高亮，自动对齐什么的，以下插件用来解决：</p>\n<ol>\n<li>DocBlockr – 成为你编写代码文档的有效工具。当输入&#x2F;**并且按下Tab键的时候，这个插件会自动解析任何一个函数并且为你准备好合适的模板</li>\n</ol>\n<blockquote>\n<p> “jsdocs_extend_double_slash”: false &#x2F;&#x2F;否则双斜杠了之后，下一行会跟着学习</p>\n</blockquote>\n<ol start=\"2\">\n<li>CodeIntel – 语法补全</li>\n<li>BracketHighlighter – 高亮匹配的括号</li>\n</ol>\n<h3 id=\"主题安装\"><a href=\"#主题安装\" class=\"headerlink\" title=\"主题安装\"></a>主题安装</h3><p>这里推荐Soda Theme， 安装简单，功能稳定</p>\n","excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>考虑到在sb2上有些插件已经不在支持了(sidebarenhancements), 所以我还是选择sb3, 但是暂时不选择购买, 还比较小资, 对我来说太贵了, 所以以后的文章都是针对sb3.</p>\n<h2 id=\"系统的配置\"><a href=\"#系统的配置\" class=\"headerlink\" title=\"系统的配置\"></a>系统的配置</h2><h3 id=\"同步\"><a href=\"#同步\" class=\"headerlink\" title=\"同步\"></a>同步</h3><p>一劳永逸的事情, sb所有的包都是放在package里面, 所以选择同步这个文件夹就可以做到多个系统同步:</p>\n<ol>\n<li>打开Sublime Text -&gt; Browse Packages找到包的目录, mac下是<code>~/Library/Application Support/Sublime Text 3</code></li>\n<li>目录下的<code>Packages</code>移动到Dropbox,我的目录<code>~/Dropbox/Sync/Sublime3/Packages</code></li>\n<li>进入support目录,建立软连接<code>ln -s ~/Dropbox/Sync/Sublime3/Packages Packages</code></li>\n<li>选择喜欢的工具进行同步(github&#x2F;dropbox)</li>\n<li>下次需要使用的时候, 只要重复以上几步即可</li>\n</ol>\n<h3 id=\"各系统Package的目录：\"><a href=\"#各系统Package的目录：\" class=\"headerlink\" title=\"各系统Package的目录：\"></a>各系统Package的目录：</h3><ul>\n<li>OS X:</li>\n</ul>\n<blockquote>\n<p>~&#x2F;Library&#x2F;Application Support&#x2F;Sublime Text 3&#x2F;Packages&#x2F;</p>\n</blockquote>\n<ul>\n<li>Linux:</li>\n</ul>\n<blockquote>\n<p>~&#x2F;.config&#x2F;sublime-text-2&#x2F;Packages&#x2F;</p>\n</blockquote>\n<ul>\n<li>Windows:</li>\n</ul>\n<blockquote>\n<p>%APPDATA%&#x2F;Roaming&#x2F;Sublime Text 3&#x2F;Packages&#x2F;</p>\n</blockquote>\n<h3 id=\"更换图标\"><a href=\"#更换图标\" class=\"headerlink\" title=\"更换图标\"></a>更换图标</h3><ul>\n<li><p>Mac下面直接找到应用<code>CMD+i</code>进入应用信息的查看,然后吧要准备好的图表拖拽到信息中的图标上就可以了</p>\n</li>\n<li><p>Windows下有待补充</p>\n</li>\n</ul>\n<h3 id=\"编辑器的配置\"><a href=\"#编辑器的配置\" class=\"headerlink\" title=\"编辑器的配置\"></a>编辑器的配置</h3><p>因为考虑到我自己有些使用习惯，所以配置如下：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 让 minimap(就是大纲里面的小框) 里的当前位置更显眼点</span></span><br><span class=\"line\"><span class=\"attr\">&quot;always_show_minimap_viewport&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;draw_minimap_border&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设置主题的名称</span></span><br><span class=\"line\"><span class=\"attr\">&quot;theme&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Soda Dark.sublime-theme&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;soda_classic_tabs&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;soda_folder_icons&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设置颜色主题</span></span><br><span class=\"line\"><span class=\"attr\">&quot;color_scheme&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Packages/Monokai Extended/Monokai Extended.tmTheme&quot;</span><span class=\"punctuation\">,</span>\t</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ST 里我经常找不到光标在哪儿, 这个开启后可以高亮当前行</span></span><br><span class=\"line\"><span class=\"attr\">&quot;highlight_modified_tabs&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 启用Vinageouss</span></span><br><span class=\"line\"><span class=\"attr\">&quot;ignored_packages&quot;</span><span class=\"punctuation\">:</span></span><br><span class=\"line\"><span class=\"punctuation\">[</span></span><br><span class=\"line\"><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Finder 里打开文件时, 不会新开窗口了</span></span><br><span class=\"line\"><span class=\"attr\">&quot;open_files_in_new_window&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 显示文件编码</span></span><br><span class=\"line\"><span class=\"attr\">&quot;show_encoding&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 标题栏上显示完整路径, 有时候不小心开错了文件, 这样能帮你早点发现.</span></span><br><span class=\"line\"><span class=\"attr\">&quot;show_full_path&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;show_line_endings&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// vim使用系统的剪贴板</span></span><br><span class=\"line\"><span class=\"attr\">&quot;vintageous_use_sys_clipboard&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"各种各样有意思的插件\"><a href=\"#各种各样有意思的插件\" class=\"headerlink\" title=\"各种各样有意思的插件\"></a>各种各样有意思的插件</h2><p>因为插件非常丰富,所以这里根据用途、平台、语言等来分类进行总结。</p>\n<h3 id=\"基本的插件\"><a href=\"#基本的插件\" class=\"headerlink\" title=\"基本的插件\"></a>基本的插件</h3><ol>\n<li>Git – 用来替代命令行处理文件，我的博客放在github上，所以有时候写文章写到一半不想写了，用来撤销用</li>\n<li>GitGutter – GitGutter 更好的帮助开发者查看文件之前的改动和差异，提升开发效率</li>\n<li>SideBarEnhancements – 可以是你的sidebar右击多出很多有用的菜单</li>\n<li>AutoFileName – 自动补全文件路径-非常方便</li>\n<li>PlainTasks – 支持todo后缀的文件进行任务状态的跟踪</li>\n</ol>\n<h3 id=\"jekyll支持\"><a href=\"#jekyll支持\" class=\"headerlink\" title=\"jekyll支持\"></a>jekyll支持</h3><p>我的博客都是用Sublime编写的，并且使用的是jekyll排版系统，jekyll真的非常方便，但是它只专注于写文章，高亮和其他还需要其他插件完成</p>\n<ol>\n<li>安装jekyll插件</li>\n<li>Markdown Extended – 使用扩展的Markdown的方式，代码高亮非常好用(&#96;&#96;&#96;&#96;里面可以书写语言就能高亮)</li>\n<li>MonoKai Extended – 颜色主题，配合Markdown Extended进行语法高亮, 支持</li>\n</ol>\n<h3 id=\"web开发\"><a href=\"#web开发\" class=\"headerlink\" title=\"web开发\"></a>web开发</h3><ol>\n<li>编辑器的vi支持，自带的不好用，直接禁用：</li>\n</ol>\n<blockquote>\n<p>“Vintagous” 非常棒的vi插件</p>\n</blockquote>\n<h3 id=\"代码编辑\"><a href=\"#代码编辑\" class=\"headerlink\" title=\"代码编辑\"></a>代码编辑</h3><p>代码编辑过程中有些事情很繁琐，譬如注释，代码补全，匹配括号高亮，自动对齐什么的，以下插件用来解决：</p>\n<ol>\n<li>DocBlockr – 成为你编写代码文档的有效工具。当输入&#x2F;**并且按下Tab键的时候，这个插件会自动解析任何一个函数并且为你准备好合适的模板</li>\n</ol>\n<blockquote>\n<p> “jsdocs_extend_double_slash”: false &#x2F;&#x2F;否则双斜杠了之后，下一行会跟着学习</p>\n</blockquote>\n<ol start=\"2\">\n<li>CodeIntel – 语法补全</li>\n<li>BracketHighlighter – 高亮匹配的括号</li>\n</ol>\n<h3 id=\"主题安装\"><a href=\"#主题安装\" class=\"headerlink\" title=\"主题安装\"></a>主题安装</h3><p>这里推荐Soda Theme， 安装简单，功能稳定</p>\n"},{"layout":"post","title":"vim-compile","published":1,"_content":"\n# Mac下编译\n\n```\n./configure --with-features=huge \\\n                  --enable-rubyinterp \\\n                  --enable-pythoninterp \\\n                  --enable-perlinterp \\\n                  --enable-cscope \\\n                  --enable-luainterp \\\n                  --enable-largefile \\\n                  --with-luajit \\\n```","source":"_posts/tools/2015-10-24-vim-compile.md","raw":"---\nlayout: post\ntitle: vim-compile\ncategories: []\ntags: []\npublished: True\n\n---\n\n# Mac下编译\n\n```\n./configure --with-features=huge \\\n                  --enable-rubyinterp \\\n                  --enable-pythoninterp \\\n                  --enable-perlinterp \\\n                  --enable-cscope \\\n                  --enable-luainterp \\\n                  --enable-largefile \\\n                  --with-luajit \\\n```","slug":"tools/2015-10-24-vim-compile","date":"2025-03-22T11:29:07.898Z","updated":"2025-03-22T11:29:07.898Z","comments":1,"photos":[],"_id":"cm8k4mbee001lq69d5s8c6dyr","content":"<h1 id=\"Mac下编译\"><a href=\"#Mac下编译\" class=\"headerlink\" title=\"Mac下编译\"></a>Mac下编译</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure --with-features=huge \\</span><br><span class=\"line\">                  --enable-rubyinterp \\</span><br><span class=\"line\">                  --enable-pythoninterp \\</span><br><span class=\"line\">                  --enable-perlinterp \\</span><br><span class=\"line\">                  --enable-cscope \\</span><br><span class=\"line\">                  --enable-luainterp \\</span><br><span class=\"line\">                  --enable-largefile \\</span><br><span class=\"line\">                  --with-luajit \\</span><br></pre></td></tr></table></figure>","excerpt":"","more":"<h1 id=\"Mac下编译\"><a href=\"#Mac下编译\" class=\"headerlink\" title=\"Mac下编译\"></a>Mac下编译</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure --with-features=huge \\</span><br><span class=\"line\">                  --enable-rubyinterp \\</span><br><span class=\"line\">                  --enable-pythoninterp \\</span><br><span class=\"line\">                  --enable-perlinterp \\</span><br><span class=\"line\">                  --enable-cscope \\</span><br><span class=\"line\">                  --enable-luainterp \\</span><br><span class=\"line\">                  --enable-largefile \\</span><br><span class=\"line\">                  --with-luajit \\</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"Tomcat支持双向认证","published":1,"_content":"\n因为项目中需要加密传输网络，所以考虑让tomcat支持双向认证，客户端需要验证服务器的可信性，服务器端也需要验证客户端的可信性，实现如下：\n\n### 1.生成服务器端的密钥，用于加密服务器端的信息：\n\n```bash\nkeytool -genkey -keystore tomcat.keystore -dname \"CN=Moss, OU=Moss, O=Moss, L=Xi'an, ST=Shanxi, C=CN\" -validity 36500 -storetype jks -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass tomcat -storepass tomcat -alias tomcat\n```\n\n### 2. 生成客户端的个人证书（P12）:\n浏览器连接服务器用的钥匙，服务器只是信任密钥，用户需要在使用前导入P12证书证明自己的身份。\n\n``` bash\n keytool -genkey -keystore client.p12 -dname \"CN=Moss, OU=Moss, O=Moss, L=Xi'an, ST=Shanxi, C=CN\" -validity 36500 -storetype PKCS12 -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass client -storepass client -alias client\n```\n\n### 3. 导出可信个人可信证书cer文件\n因为PKCS12格式的文件无法直接导入密钥，需要从个人信息中提取cer格式证书。\n\n``` bash\nkeytool -export -file client.cer  -keystore client.p12 -storetype PKCS12 -storepass client -rfc -alias client\n```\n\n### 4. 导入个人可信证书入服务器密钥\n将个人可信证书导入服务器密钥，这样客户端就作为可信源自由连接服务器。\n\n``` bash\necho y | keytool -import -v -file client.cer -keystore tomcat.keystore -storepass tomcat -alias client\n```\n\n导入后cer文件就没有用了，因为可信证书已经进了服务器的密钥库了，所以进行删除。\n\n``` bash\nrm -f client.cer\n```\n\n### 5. 查看当前服务器端密钥证书情况\n这时如果不出问题，应该是有两个证书存在，一个是服务器本身的密钥，用于加密服务器的对外的服务内容；另一个是客户端的可信证书，用于验证客户端身份；\n\n``` bash\nkeytool -list -keystore tomcat.keystore -storepass tomcat\n```\n\n如果按照上面的操作无误， 那么得到的应该如下：\n\n```\n密钥库类型: JKS\n密钥库提供方: SUN\n\n您的密钥库包含 2 个条目\n\nclient, 2015-6-19, trustedCertEntry,\n证书指纹 (SHA1): 7D:98:5C:75:17:81:30:67:6E:66:E8:5E:6A:57:75:8E:7C:31:F5:BE\ntomcat, 2015-6-19, PrivateKeyEntry,\n证书指纹 (SHA1): 7D:0E:84:75:56:8D:F3:F8:7B:B1:26:80:B2:FA:71:89:F0:94:1E:FD\n```\n\n### 6. 将服务器端导出为可信机构证书\n\n因为我们的服务器进行了加密，所以我们需要导入服务器端的可信证书来进行服务器的访问。\n\n``` bash\nkeytool -rfc -file tomcat.cer -keystore tomcat.keystore -export -alias tomcat -storepass tomcat\n```\n\n### 7. 总结\n因为急用，所以写得有些伧俗，之后有时间喝咖啡的时候再把这段批处理调整一下，到时可以支持指定需要生成什么样的文件（可信机构证书、服务器密钥、个人证书）。\n\n``` bash\n#!/bin/sh\n\necho \"清除历史文件\"\nrm *.cer *.keystore *.p12\n\necho \"生成服务器端的密钥\"\nkeytool -genkey -keystore tomcat.keystore -dname \"CN=Moss, OU=Moss, O=Moss, L=Xi'an, ST=Shanxi, C=CN\" -validity 36500 -storetype jks -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass tomcat -storepass tomcat -alias tomcat\n\necho \"生成客户端的证书\"\nkeytool -genkey -keystore client.p12 -dname \"CN=Moss, OU=Moss, O=Moss, L=Xi'an, ST=Shanxi, C=CN\" -validity 36500 -storetype PKCS12 -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass client -storepass client -alias client\n\necho \"导出个人信息为cer格式的证书\"\nkeytool -export -file client.cer  -keystore client.p12 -storetype PKCS12 -storepass client -rfc -alias client\n\necho \"导出客户端cer证书到服务端信任里\"\necho y | keytool -import -v -file client.cer -keystore tomcat.keystore -storepass tomcat -alias client\n\necho \"可信个人证书导入，删除个人可信证书\"\nrm -f client.cer\n\necho \"打印密钥信息\"\nkeytool -list -keystore tomcat.keystore -storepass tomcat\n\necho \"导出为客户端的导入机构证书\"\nkeytool -rfc -file tomcat.cer -keystore tomcat.keystore -export -alias tomcat -storepass tomcat\n\n```\n\n\n\n","source":"_posts/web/2015-06-18-Tomcat支持双向认证.md","raw":"---\nlayout: post\ntitle: Tomcat支持双向认证\ncategories: [网页]\ntags: [java,keytool]\npublished: True\n\n---\n\n因为项目中需要加密传输网络，所以考虑让tomcat支持双向认证，客户端需要验证服务器的可信性，服务器端也需要验证客户端的可信性，实现如下：\n\n### 1.生成服务器端的密钥，用于加密服务器端的信息：\n\n```bash\nkeytool -genkey -keystore tomcat.keystore -dname \"CN=Moss, OU=Moss, O=Moss, L=Xi'an, ST=Shanxi, C=CN\" -validity 36500 -storetype jks -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass tomcat -storepass tomcat -alias tomcat\n```\n\n### 2. 生成客户端的个人证书（P12）:\n浏览器连接服务器用的钥匙，服务器只是信任密钥，用户需要在使用前导入P12证书证明自己的身份。\n\n``` bash\n keytool -genkey -keystore client.p12 -dname \"CN=Moss, OU=Moss, O=Moss, L=Xi'an, ST=Shanxi, C=CN\" -validity 36500 -storetype PKCS12 -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass client -storepass client -alias client\n```\n\n### 3. 导出可信个人可信证书cer文件\n因为PKCS12格式的文件无法直接导入密钥，需要从个人信息中提取cer格式证书。\n\n``` bash\nkeytool -export -file client.cer  -keystore client.p12 -storetype PKCS12 -storepass client -rfc -alias client\n```\n\n### 4. 导入个人可信证书入服务器密钥\n将个人可信证书导入服务器密钥，这样客户端就作为可信源自由连接服务器。\n\n``` bash\necho y | keytool -import -v -file client.cer -keystore tomcat.keystore -storepass tomcat -alias client\n```\n\n导入后cer文件就没有用了，因为可信证书已经进了服务器的密钥库了，所以进行删除。\n\n``` bash\nrm -f client.cer\n```\n\n### 5. 查看当前服务器端密钥证书情况\n这时如果不出问题，应该是有两个证书存在，一个是服务器本身的密钥，用于加密服务器的对外的服务内容；另一个是客户端的可信证书，用于验证客户端身份；\n\n``` bash\nkeytool -list -keystore tomcat.keystore -storepass tomcat\n```\n\n如果按照上面的操作无误， 那么得到的应该如下：\n\n```\n密钥库类型: JKS\n密钥库提供方: SUN\n\n您的密钥库包含 2 个条目\n\nclient, 2015-6-19, trustedCertEntry,\n证书指纹 (SHA1): 7D:98:5C:75:17:81:30:67:6E:66:E8:5E:6A:57:75:8E:7C:31:F5:BE\ntomcat, 2015-6-19, PrivateKeyEntry,\n证书指纹 (SHA1): 7D:0E:84:75:56:8D:F3:F8:7B:B1:26:80:B2:FA:71:89:F0:94:1E:FD\n```\n\n### 6. 将服务器端导出为可信机构证书\n\n因为我们的服务器进行了加密，所以我们需要导入服务器端的可信证书来进行服务器的访问。\n\n``` bash\nkeytool -rfc -file tomcat.cer -keystore tomcat.keystore -export -alias tomcat -storepass tomcat\n```\n\n### 7. 总结\n因为急用，所以写得有些伧俗，之后有时间喝咖啡的时候再把这段批处理调整一下，到时可以支持指定需要生成什么样的文件（可信机构证书、服务器密钥、个人证书）。\n\n``` bash\n#!/bin/sh\n\necho \"清除历史文件\"\nrm *.cer *.keystore *.p12\n\necho \"生成服务器端的密钥\"\nkeytool -genkey -keystore tomcat.keystore -dname \"CN=Moss, OU=Moss, O=Moss, L=Xi'an, ST=Shanxi, C=CN\" -validity 36500 -storetype jks -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass tomcat -storepass tomcat -alias tomcat\n\necho \"生成客户端的证书\"\nkeytool -genkey -keystore client.p12 -dname \"CN=Moss, OU=Moss, O=Moss, L=Xi'an, ST=Shanxi, C=CN\" -validity 36500 -storetype PKCS12 -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass client -storepass client -alias client\n\necho \"导出个人信息为cer格式的证书\"\nkeytool -export -file client.cer  -keystore client.p12 -storetype PKCS12 -storepass client -rfc -alias client\n\necho \"导出客户端cer证书到服务端信任里\"\necho y | keytool -import -v -file client.cer -keystore tomcat.keystore -storepass tomcat -alias client\n\necho \"可信个人证书导入，删除个人可信证书\"\nrm -f client.cer\n\necho \"打印密钥信息\"\nkeytool -list -keystore tomcat.keystore -storepass tomcat\n\necho \"导出为客户端的导入机构证书\"\nkeytool -rfc -file tomcat.cer -keystore tomcat.keystore -export -alias tomcat -storepass tomcat\n\n```\n\n\n\n","slug":"web/2015-06-18-Tomcat支持双向认证","date":"2025-03-22T11:29:07.975Z","updated":"2025-03-22T11:29:07.975Z","comments":1,"photos":[],"_id":"cm8k4mbee001oq69d8end9w61","content":"<p>因为项目中需要加密传输网络，所以考虑让tomcat支持双向认证，客户端需要验证服务器的可信性，服务器端也需要验证客户端的可信性，实现如下：</p>\n<h3 id=\"1-生成服务器端的密钥，用于加密服务器端的信息：\"><a href=\"#1-生成服务器端的密钥，用于加密服务器端的信息：\" class=\"headerlink\" title=\"1.生成服务器端的密钥，用于加密服务器端的信息：\"></a>1.生成服务器端的密钥，用于加密服务器端的信息：</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keytool -genkey -keystore tomcat.keystore -dname <span class=\"string\">&quot;CN=Moss, OU=Moss, O=Moss, L=Xi&#x27;an, ST=Shanxi, C=CN&quot;</span> -validity 36500 -storetype jks -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass tomcat -storepass tomcat -<span class=\"built_in\">alias</span> tomcat</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-生成客户端的个人证书（P12）\"><a href=\"#2-生成客户端的个人证书（P12）\" class=\"headerlink\" title=\"2. 生成客户端的个人证书（P12）:\"></a>2. 生成客户端的个人证书（P12）:</h3><p>浏览器连接服务器用的钥匙，服务器只是信任密钥，用户需要在使用前导入P12证书证明自己的身份。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keytool -genkey -keystore client.p12 -dname <span class=\"string\">&quot;CN=Moss, OU=Moss, O=Moss, L=Xi&#x27;an, ST=Shanxi, C=CN&quot;</span> -validity 36500 -storetype PKCS12 -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass client -storepass client -<span class=\"built_in\">alias</span> client</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-导出可信个人可信证书cer文件\"><a href=\"#3-导出可信个人可信证书cer文件\" class=\"headerlink\" title=\"3. 导出可信个人可信证书cer文件\"></a>3. 导出可信个人可信证书cer文件</h3><p>因为PKCS12格式的文件无法直接导入密钥，需要从个人信息中提取cer格式证书。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keytool -<span class=\"built_in\">export</span> -file client.cer  -keystore client.p12 -storetype PKCS12 -storepass client -rfc -<span class=\"built_in\">alias</span> client</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-导入个人可信证书入服务器密钥\"><a href=\"#4-导入个人可信证书入服务器密钥\" class=\"headerlink\" title=\"4. 导入个人可信证书入服务器密钥\"></a>4. 导入个人可信证书入服务器密钥</h3><p>将个人可信证书导入服务器密钥，这样客户端就作为可信源自由连接服务器。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> y | keytool -import -v -file client.cer -keystore tomcat.keystore -storepass tomcat -<span class=\"built_in\">alias</span> client</span><br></pre></td></tr></table></figure>\n\n<p>导入后cer文件就没有用了，因为可信证书已经进了服务器的密钥库了，所以进行删除。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">rm</span> -f client.cer</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-查看当前服务器端密钥证书情况\"><a href=\"#5-查看当前服务器端密钥证书情况\" class=\"headerlink\" title=\"5. 查看当前服务器端密钥证书情况\"></a>5. 查看当前服务器端密钥证书情况</h3><p>这时如果不出问题，应该是有两个证书存在，一个是服务器本身的密钥，用于加密服务器的对外的服务内容；另一个是客户端的可信证书，用于验证客户端身份；</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keytool -list -keystore tomcat.keystore -storepass tomcat</span><br></pre></td></tr></table></figure>\n\n<p>如果按照上面的操作无误， 那么得到的应该如下：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">密钥库类型: JKS</span><br><span class=\"line\">密钥库提供方: SUN</span><br><span class=\"line\"></span><br><span class=\"line\">您的密钥库包含 2 个条目</span><br><span class=\"line\"></span><br><span class=\"line\">client, 2015-6-19, trustedCertEntry,</span><br><span class=\"line\">证书指纹 (SHA1): 7D:98:5C:75:17:81:30:67:6E:66:E8:5E:6A:57:75:8E:7C:31:F5:BE</span><br><span class=\"line\">tomcat, 2015-6-19, PrivateKeyEntry,</span><br><span class=\"line\">证书指纹 (SHA1): 7D:0E:84:75:56:8D:F3:F8:7B:B1:26:80:B2:FA:71:89:F0:94:1E:FD</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-将服务器端导出为可信机构证书\"><a href=\"#6-将服务器端导出为可信机构证书\" class=\"headerlink\" title=\"6. 将服务器端导出为可信机构证书\"></a>6. 将服务器端导出为可信机构证书</h3><p>因为我们的服务器进行了加密，所以我们需要导入服务器端的可信证书来进行服务器的访问。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keytool -rfc -file tomcat.cer -keystore tomcat.keystore -<span class=\"built_in\">export</span> -<span class=\"built_in\">alias</span> tomcat -storepass tomcat</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-总结\"><a href=\"#7-总结\" class=\"headerlink\" title=\"7. 总结\"></a>7. 总结</h3><p>因为急用，所以写得有些伧俗，之后有时间喝咖啡的时候再把这段批处理调整一下，到时可以支持指定需要生成什么样的文件（可信机构证书、服务器密钥、个人证书）。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;清除历史文件&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">rm</span> *.cer *.keystore *.p12</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;生成服务器端的密钥&quot;</span></span><br><span class=\"line\">keytool -genkey -keystore tomcat.keystore -dname <span class=\"string\">&quot;CN=Moss, OU=Moss, O=Moss, L=Xi&#x27;an, ST=Shanxi, C=CN&quot;</span> -validity 36500 -storetype jks -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass tomcat -storepass tomcat -<span class=\"built_in\">alias</span> tomcat</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;生成客户端的证书&quot;</span></span><br><span class=\"line\">keytool -genkey -keystore client.p12 -dname <span class=\"string\">&quot;CN=Moss, OU=Moss, O=Moss, L=Xi&#x27;an, ST=Shanxi, C=CN&quot;</span> -validity 36500 -storetype PKCS12 -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass client -storepass client -<span class=\"built_in\">alias</span> client</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;导出个人信息为cer格式的证书&quot;</span></span><br><span class=\"line\">keytool -<span class=\"built_in\">export</span> -file client.cer  -keystore client.p12 -storetype PKCS12 -storepass client -rfc -<span class=\"built_in\">alias</span> client</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;导出客户端cer证书到服务端信任里&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> y | keytool -import -v -file client.cer -keystore tomcat.keystore -storepass tomcat -<span class=\"built_in\">alias</span> client</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;可信个人证书导入，删除个人可信证书&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">rm</span> -f client.cer</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;打印密钥信息&quot;</span></span><br><span class=\"line\">keytool -list -keystore tomcat.keystore -storepass tomcat</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;导出为客户端的导入机构证书&quot;</span></span><br><span class=\"line\">keytool -rfc -file tomcat.cer -keystore tomcat.keystore -<span class=\"built_in\">export</span> -<span class=\"built_in\">alias</span> tomcat -storepass tomcat</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n","excerpt":"","more":"<p>因为项目中需要加密传输网络，所以考虑让tomcat支持双向认证，客户端需要验证服务器的可信性，服务器端也需要验证客户端的可信性，实现如下：</p>\n<h3 id=\"1-生成服务器端的密钥，用于加密服务器端的信息：\"><a href=\"#1-生成服务器端的密钥，用于加密服务器端的信息：\" class=\"headerlink\" title=\"1.生成服务器端的密钥，用于加密服务器端的信息：\"></a>1.生成服务器端的密钥，用于加密服务器端的信息：</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keytool -genkey -keystore tomcat.keystore -dname <span class=\"string\">&quot;CN=Moss, OU=Moss, O=Moss, L=Xi&#x27;an, ST=Shanxi, C=CN&quot;</span> -validity 36500 -storetype jks -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass tomcat -storepass tomcat -<span class=\"built_in\">alias</span> tomcat</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-生成客户端的个人证书（P12）\"><a href=\"#2-生成客户端的个人证书（P12）\" class=\"headerlink\" title=\"2. 生成客户端的个人证书（P12）:\"></a>2. 生成客户端的个人证书（P12）:</h3><p>浏览器连接服务器用的钥匙，服务器只是信任密钥，用户需要在使用前导入P12证书证明自己的身份。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keytool -genkey -keystore client.p12 -dname <span class=\"string\">&quot;CN=Moss, OU=Moss, O=Moss, L=Xi&#x27;an, ST=Shanxi, C=CN&quot;</span> -validity 36500 -storetype PKCS12 -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass client -storepass client -<span class=\"built_in\">alias</span> client</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-导出可信个人可信证书cer文件\"><a href=\"#3-导出可信个人可信证书cer文件\" class=\"headerlink\" title=\"3. 导出可信个人可信证书cer文件\"></a>3. 导出可信个人可信证书cer文件</h3><p>因为PKCS12格式的文件无法直接导入密钥，需要从个人信息中提取cer格式证书。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keytool -<span class=\"built_in\">export</span> -file client.cer  -keystore client.p12 -storetype PKCS12 -storepass client -rfc -<span class=\"built_in\">alias</span> client</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-导入个人可信证书入服务器密钥\"><a href=\"#4-导入个人可信证书入服务器密钥\" class=\"headerlink\" title=\"4. 导入个人可信证书入服务器密钥\"></a>4. 导入个人可信证书入服务器密钥</h3><p>将个人可信证书导入服务器密钥，这样客户端就作为可信源自由连接服务器。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> y | keytool -import -v -file client.cer -keystore tomcat.keystore -storepass tomcat -<span class=\"built_in\">alias</span> client</span><br></pre></td></tr></table></figure>\n\n<p>导入后cer文件就没有用了，因为可信证书已经进了服务器的密钥库了，所以进行删除。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">rm</span> -f client.cer</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-查看当前服务器端密钥证书情况\"><a href=\"#5-查看当前服务器端密钥证书情况\" class=\"headerlink\" title=\"5. 查看当前服务器端密钥证书情况\"></a>5. 查看当前服务器端密钥证书情况</h3><p>这时如果不出问题，应该是有两个证书存在，一个是服务器本身的密钥，用于加密服务器的对外的服务内容；另一个是客户端的可信证书，用于验证客户端身份；</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keytool -list -keystore tomcat.keystore -storepass tomcat</span><br></pre></td></tr></table></figure>\n\n<p>如果按照上面的操作无误， 那么得到的应该如下：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">密钥库类型: JKS</span><br><span class=\"line\">密钥库提供方: SUN</span><br><span class=\"line\"></span><br><span class=\"line\">您的密钥库包含 2 个条目</span><br><span class=\"line\"></span><br><span class=\"line\">client, 2015-6-19, trustedCertEntry,</span><br><span class=\"line\">证书指纹 (SHA1): 7D:98:5C:75:17:81:30:67:6E:66:E8:5E:6A:57:75:8E:7C:31:F5:BE</span><br><span class=\"line\">tomcat, 2015-6-19, PrivateKeyEntry,</span><br><span class=\"line\">证书指纹 (SHA1): 7D:0E:84:75:56:8D:F3:F8:7B:B1:26:80:B2:FA:71:89:F0:94:1E:FD</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-将服务器端导出为可信机构证书\"><a href=\"#6-将服务器端导出为可信机构证书\" class=\"headerlink\" title=\"6. 将服务器端导出为可信机构证书\"></a>6. 将服务器端导出为可信机构证书</h3><p>因为我们的服务器进行了加密，所以我们需要导入服务器端的可信证书来进行服务器的访问。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keytool -rfc -file tomcat.cer -keystore tomcat.keystore -<span class=\"built_in\">export</span> -<span class=\"built_in\">alias</span> tomcat -storepass tomcat</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-总结\"><a href=\"#7-总结\" class=\"headerlink\" title=\"7. 总结\"></a>7. 总结</h3><p>因为急用，所以写得有些伧俗，之后有时间喝咖啡的时候再把这段批处理调整一下，到时可以支持指定需要生成什么样的文件（可信机构证书、服务器密钥、个人证书）。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;清除历史文件&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">rm</span> *.cer *.keystore *.p12</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;生成服务器端的密钥&quot;</span></span><br><span class=\"line\">keytool -genkey -keystore tomcat.keystore -dname <span class=\"string\">&quot;CN=Moss, OU=Moss, O=Moss, L=Xi&#x27;an, ST=Shanxi, C=CN&quot;</span> -validity 36500 -storetype jks -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass tomcat -storepass tomcat -<span class=\"built_in\">alias</span> tomcat</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;生成客户端的证书&quot;</span></span><br><span class=\"line\">keytool -genkey -keystore client.p12 -dname <span class=\"string\">&quot;CN=Moss, OU=Moss, O=Moss, L=Xi&#x27;an, ST=Shanxi, C=CN&quot;</span> -validity 36500 -storetype PKCS12 -keyalg RSA -keysize 4096 -sigalg SHA256withRSA -keypass client -storepass client -<span class=\"built_in\">alias</span> client</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;导出个人信息为cer格式的证书&quot;</span></span><br><span class=\"line\">keytool -<span class=\"built_in\">export</span> -file client.cer  -keystore client.p12 -storetype PKCS12 -storepass client -rfc -<span class=\"built_in\">alias</span> client</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;导出客户端cer证书到服务端信任里&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> y | keytool -import -v -file client.cer -keystore tomcat.keystore -storepass tomcat -<span class=\"built_in\">alias</span> client</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;可信个人证书导入，删除个人可信证书&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">rm</span> -f client.cer</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;打印密钥信息&quot;</span></span><br><span class=\"line\">keytool -list -keystore tomcat.keystore -storepass tomcat</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;导出为客户端的导入机构证书&quot;</span></span><br><span class=\"line\">keytool -rfc -file tomcat.cer -keystore tomcat.keystore -<span class=\"built_in\">export</span> -<span class=\"built_in\">alias</span> tomcat -storepass tomcat</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n"},{"layout":"post","title":"TimeLine学习手记","published":1,"_content":"\n\n\n<!-- 嵌入 -->\n<iframe src=\"\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\"></iframe>\n\n","source":"_posts/web/2016-07-16-timeline-guide.markdown","raw":"---\nlayout: post\ntitle: TimeLine学习手记\ncategories: [网页]\ntags: [javascript]\npublished: True\n---\n\n\n\n<!-- 嵌入 -->\n<iframe src=\"\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\"></iframe>\n\n","slug":"web/2016-07-16-timeline-guide","date":"2025-03-22T11:29:07.975Z","updated":"2025-03-22T11:29:07.975Z","comments":1,"photos":[],"_id":"cm8k4mbeu003aq69d3lsrgbby","content":"<!-- 嵌入 -->\n<iframe src=\"\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\"></iframe>\n\n","excerpt":"","more":"<!-- 嵌入 -->\n<iframe src=\"\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\"></iframe>\n\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cm8k4mbdo0006q69d6z2bdufi","category_id":"cm8k4mbdk0003q69d3nhnb5y7","_id":"cm8k4mbdt000cq69d5f4f0pmq"},{"post_id":"cm8k4mbd90001q69d8p8qdz7n","category_id":"cm8k4mbdk0003q69d3nhnb5y7","_id":"cm8k4mbdw000gq69dcpowcudc"},{"post_id":"cm8k4mbdp0007q69d92wl00w8","category_id":"cm8k4mbdk0003q69d3nhnb5y7","_id":"cm8k4mbdx000jq69dh3qbawnr"},{"post_id":"cm8k4mbdr000aq69d9wz57bg0","category_id":"cm8k4mbdk0003q69d3nhnb5y7","_id":"cm8k4mbdz000oq69dclis27ki"},{"post_id":"cm8k4mbdd0002q69dh9f5dmti","category_id":"cm8k4mbdq0008q69desf4hdog","_id":"cm8k4mbe1000rq69d5sg0cmx5"},{"post_id":"cm8k4mbdn0005q69d8j48224v","category_id":"cm8k4mbdk0003q69d3nhnb5y7","_id":"cm8k4mbe2000vq69dfi5kdl3y"},{"post_id":"cm8k4mbdt000bq69d2h13eyeh","category_id":"cm8k4mbdy000lq69d2kjz3y95","_id":"cm8k4mbe3000yq69d0ota2fxs"},{"post_id":"cm8k4mbdv000fq69d1771dq99","category_id":"cm8k4mbe1000sq69d4qyx0ibp","_id":"cm8k4mbe60014q69d8ff8gwws"},{"post_id":"cm8k4mbdx000iq69d5p742wsj","category_id":"cm8k4mbe3000zq69dgmxwhz83","_id":"cm8k4mbea001dq69d6eea76pw"},{"post_id":"cm8k4mbe0000qq69dhmck4qqc","category_id":"cm8k4mbe3000zq69dgmxwhz83","_id":"cm8k4mbed001jq69d5vfs4j7q"},{"post_id":"cm8k4mbe9001bq69d7j6ehphf","category_id":"cm8k4mbdq0008q69desf4hdog","_id":"cm8k4mbee001mq69de3gjfwdt"},{"post_id":"cm8k4mbe1000uq69dbvks2h3z","category_id":"cm8k4mbe3000zq69dgmxwhz83","_id":"cm8k4mbef001pq69dbdg7dvyv"},{"post_id":"cm8k4mbe3000xq69d1lygdvfr","category_id":"cm8k4mbec001iq69d9a995yzg","_id":"cm8k4mbeh001tq69d4g2y7kmm"},{"post_id":"cm8k4mbe40010q69d8fox4ijb","category_id":"cm8k4mbec001iq69d9a995yzg","_id":"cm8k4mbeh001wq69de65u78gt"},{"post_id":"cm8k4mbe50013q69dbob2dm0r","category_id":"cm8k4mbeg001sq69de0z637on","_id":"cm8k4mbei0021q69ddepmewg5"},{"post_id":"cm8k4mbe60016q69d655946qy","category_id":"cm8k4mbeg001sq69de0z637on","_id":"cm8k4mbej0025q69dga46dczq"},{"post_id":"cm8k4mbe8001aq69dgfd794r4","category_id":"cm8k4mbeg001sq69de0z637on","_id":"cm8k4mbek0029q69d7mlc0q3u"},{"post_id":"cm8k4mbea001gq69d3dlbexp0","category_id":"cm8k4mbeg001sq69de0z637on","_id":"cm8k4mbel002bq69d4wox6dh7"},{"post_id":"cm8k4mbeb001hq69dbwffd9dj","category_id":"cm8k4mbek0028q69dgcrg718w","_id":"cm8k4mbel002gq69d6b7y27cm"},{"post_id":"cm8k4mbee001oq69d8end9w61","category_id":"cm8k4mbel002dq69d7n4og5yh","_id":"cm8k4mbem002iq69dcd92cgbn"},{"post_id":"cm8k4mbeu003aq69d3lsrgbby","category_id":"cm8k4mbel002dq69d7n4og5yh","_id":"cm8k4mbev003cq69d5t7fb9c8"}],"PostTag":[{"post_id":"cm8k4mbd90001q69d8p8qdz7n","tag_id":"cm8k4mbdm0004q69d463191bv","_id":"cm8k4mbdw000hq69d8nakbis9"},{"post_id":"cm8k4mbd90001q69d8p8qdz7n","tag_id":"cm8k4mbdr0009q69dcgtb2m7n","_id":"cm8k4mbdy000kq69dff1ghd5l"},{"post_id":"cm8k4mbdd0002q69dh9f5dmti","tag_id":"cm8k4mbdu000eq69dggxie8ij","_id":"cm8k4mbe0000pq69dazsl1hdm"},{"post_id":"cm8k4mbdn0005q69d8j48224v","tag_id":"cm8k4mbdy000mq69d9m1n5sgr","_id":"cm8k4mbe2000wq69d08er0wtt"},{"post_id":"cm8k4mbdo0006q69d6z2bdufi","tag_id":"cm8k4mbdm0004q69d463191bv","_id":"cm8k4mbe50012q69dcphh5hqw"},{"post_id":"cm8k4mbdo0006q69d6z2bdufi","tag_id":"cm8k4mbe1000tq69d21ul1xiq","_id":"cm8k4mbe60015q69dhib0bis3"},{"post_id":"cm8k4mbdp0007q69d92wl00w8","tag_id":"cm8k4mbdy000mq69d9m1n5sgr","_id":"cm8k4mbe80019q69d1gmfgsnr"},{"post_id":"cm8k4mbdr000aq69d9wz57bg0","tag_id":"cm8k4mbdy000mq69d9m1n5sgr","_id":"cm8k4mbea001fq69d9btwb5ac"},{"post_id":"cm8k4mbdv000fq69d1771dq99","tag_id":"cm8k4mbea001eq69dajma2tyt","_id":"cm8k4mbee001nq69d7ogv5m7x"},{"post_id":"cm8k4mbdx000iq69d5p742wsj","tag_id":"cm8k4mbed001kq69d9ooy51qn","_id":"cm8k4mbeh001vq69d1hnabqff"},{"post_id":"cm8k4mbdx000iq69d5p742wsj","tag_id":"cm8k4mbeg001rq69dglk83qt3","_id":"cm8k4mbeh001yq69dh2pmaytd"},{"post_id":"cm8k4mbe0000qq69dhmck4qqc","tag_id":"cm8k4mbeh001uq69dgjkm8pj9","_id":"cm8k4mbej0023q69d2f2m3fm5"},{"post_id":"cm8k4mbe0000qq69dhmck4qqc","tag_id":"cm8k4mbei001zq69d9c9k1ad3","_id":"cm8k4mbej0026q69d6yp85f10"},{"post_id":"cm8k4mbe1000uq69dbvks2h3z","tag_id":"cm8k4mbei0022q69d35d40fqu","_id":"cm8k4mbel002cq69d9e8pcyle"},{"post_id":"cm8k4mbe1000uq69dbvks2h3z","tag_id":"cm8k4mbej0027q69d7uxkht4c","_id":"cm8k4mbel002eq69d1tkedqfi"},{"post_id":"cm8k4mbe3000xq69d1lygdvfr","tag_id":"cm8k4mbek002aq69d5sla64r6","_id":"cm8k4mbem002kq69d6t4i7fxp"},{"post_id":"cm8k4mbe3000xq69d1lygdvfr","tag_id":"cm8k4mbel002fq69df5xhcbiz","_id":"cm8k4mbem002lq69d5x3ogzwe"},{"post_id":"cm8k4mbe3000xq69d1lygdvfr","tag_id":"cm8k4mbem002hq69dfrhx0qmk","_id":"cm8k4mben002nq69danph67zb"},{"post_id":"cm8k4mbe40010q69d8fox4ijb","tag_id":"cm8k4mbek002aq69d5sla64r6","_id":"cm8k4mben002qq69dcsyt1hwf"},{"post_id":"cm8k4mbe40010q69d8fox4ijb","tag_id":"cm8k4mbel002fq69df5xhcbiz","_id":"cm8k4mbeo002rq69d9bxkd6pb"},{"post_id":"cm8k4mbe40010q69d8fox4ijb","tag_id":"cm8k4mbem002hq69dfrhx0qmk","_id":"cm8k4mbeo002tq69d8kzd1dkb"},{"post_id":"cm8k4mbe8001aq69dgfd794r4","tag_id":"cm8k4mben002pq69d2i6q21as","_id":"cm8k4mbeo002uq69dec46a3mb"},{"post_id":"cm8k4mbe9001bq69d7j6ehphf","tag_id":"cm8k4mbeo002sq69d03btccwx","_id":"cm8k4mbeo002wq69dcxjb5j42"},{"post_id":"cm8k4mbea001gq69d3dlbexp0","tag_id":"cm8k4mbeo002vq69d2gqx9c1x","_id":"cm8k4mbep002zq69dfjim87kh"},{"post_id":"cm8k4mbea001gq69d3dlbexp0","tag_id":"cm8k4mbep002xq69daj0s9bsn","_id":"cm8k4mbep0030q69d3ivg94n6"},{"post_id":"cm8k4mbeb001hq69dbwffd9dj","tag_id":"cm8k4mbep002yq69d1dt2hc58","_id":"cm8k4mbeq0034q69d5kkafoxr"},{"post_id":"cm8k4mbeb001hq69dbwffd9dj","tag_id":"cm8k4mbep0031q69dfivj40jn","_id":"cm8k4mbeq0035q69dh46z73jw"},{"post_id":"cm8k4mbeb001hq69dbwffd9dj","tag_id":"cm8k4mbeq0032q69d409ucqtx","_id":"cm8k4mber0037q69de8ewaj6u"},{"post_id":"cm8k4mbee001oq69d8end9w61","tag_id":"cm8k4mbeq0033q69dh8ha59sb","_id":"cm8k4mber0038q69dg8u75fmi"},{"post_id":"cm8k4mbee001oq69d8end9w61","tag_id":"cm8k4mbeq0036q69dcgfd1pxa","_id":"cm8k4mber0039q69d0mh16xup"},{"post_id":"cm8k4mbeu003aq69d3lsrgbby","tag_id":"cm8k4mbdr0009q69dcgtb2m7n","_id":"cm8k4mbeu003bq69df5bj44ey"}],"Tag":[{"name":"blog","_id":"cm8k4mbdm0004q69d463191bv"},{"name":"javascript","_id":"cm8k4mbdr0009q69dcgtb2m7n"},{"name":"算法，统计","_id":"cm8k4mbdu000eq69dggxie8ij"},{"name":"技术","_id":"cm8k4mbdy000mq69d9m1n5sgr"},{"name":"bash","_id":"cm8k4mbe1000tq69d21ul1xiq"},{"name":"数学，图形，Geogebra","_id":"cm8k4mbea001eq69dajma2tyt"},{"name":"about","_id":"cm8k4mbed001kq69d9ooy51qn"},{"name":"me","_id":"cm8k4mbeg001rq69dglk83qt3"},{"name":"nodejs","_id":"cm8k4mbeh001uq69dgjkm8pj9"},{"name":"自动化","_id":"cm8k4mbei001zq69d9c9k1ad3"},{"name":"git","_id":"cm8k4mbei0022q69d35d40fqu"},{"name":"ssh","_id":"cm8k4mbej0027q69d7uxkht4c"},{"name":"android","_id":"cm8k4mbek002aq69d5sla64r6"},{"name":"生活","_id":"cm8k4mbel002fq69df5xhcbiz"},{"name":"效率","_id":"cm8k4mbem002hq69dfrhx0qmk"},{"name":"websocket","_id":"cm8k4mben002pq69d2i6q21as"},{"name":"算法，java","_id":"cm8k4mbeo002sq69d03btccwx"},{"name":"bat","_id":"cm8k4mbeo002vq69d2gqx9c1x"},{"name":"windows","_id":"cm8k4mbep002xq69daj0s9bsn"},{"name":"2015","_id":"cm8k4mbep002yq69d1dt2hc58"},{"name":"sublime","_id":"cm8k4mbep0031q69dfivj40jn"},{"name":"前端","_id":"cm8k4mbeq0032q69d409ucqtx"},{"name":"java","_id":"cm8k4mbeq0033q69dh8ha59sb"},{"name":"keytool","_id":"cm8k4mbeq0036q69dcgfd1pxa"}]}}